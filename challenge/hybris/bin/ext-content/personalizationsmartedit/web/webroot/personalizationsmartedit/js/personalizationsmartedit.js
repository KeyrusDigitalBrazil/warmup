!function(t){var e={};function __webpack_require__(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}__webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,n){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)__webpack_require__.d(n,o,function(e){return t[e]}.bind(null,o));return n},__webpack_require__.n=function(t){var e=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=17)}([function(t,e){t.exports=smarteditcommons},function(t,e){t.exports=angular},function(t,e){t.exports=moment},function(t,e,n){var o={"./combinedView/personalizationsmarteditCombinedViewComponentLightUpDecorator.js":4,"./componentLightUpDecorator/personalizationsmarteditComponentLightUpDecorator.js":5,"./contextMenu/personalizationsmarteditContextMenu.js":6,"./customizeView/personalizationsmarteditCustomizeViewService.js":7,"./externalComponentDecorator/personalizationsmarteditExternalComponentDecorator.js":8,"./service/personalizationsmarteditContextualMenuService.js":9,"./sharedSlotDecorator/personalizationsmarteditSharedSlotDecorator.js":10,"./templates.js":11};function webpackContext(t){var e=webpackContextResolve(t);return n(e)}function webpackContextResolve(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=3},function(t,e){angular.module("personalizationsmarteditCombinedViewComponentLightUpDecorator",["personalizationsmarteditTemplates","personalizationsmarteditServicesModule"]).directive("personalizationsmarteditCombinedViewComponentLightUp",["personalizationsmarteditContextService","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",function(t,e){return{templateUrl:"personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(n,o){var i=[];Object.keys(e).forEach(function(t,n){i.push(e[n].borderClass)}),i=i.join(" "),n.letterForElement="",n.classForElement="",n.getPersonalizationComponentBorderClass=function(){var a=t.getCombinedView();if(a.enabled){var r=o.parent().closest('[class~="smartEditComponentX"][data-smartedit-container-source-id][data-smartedit-container-type="CxCmsComponentContainer"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');r.length>0&&(r.removeClass(i),(a.selectedItems||[]).forEach(function(t,o){var i=r.data().smarteditPersonalizationCustomizationId===t.customization.code;i=i&&r.data().smarteditPersonalizationVariationId===t.variation.code;var a=o%Object.keys(e).length;i&&(r.addClass(e[a].borderClass),n.letterForElement=String.fromCharCode("a".charCodeAt()+a).toUpperCase(),n.classForElement=e[a].listClass)}))}}}}}])},function(t,e){angular.module("personalizationsmarteditComponentLightUpDecorator",["yjqueryModule","personalizationsmarteditTemplates","personalizationsmarteditServicesModule","componentHandlerServiceModule"]).directive("personalizationsmarteditComponentLightUp",["yjQuery","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","CONTAINER_SOURCE_ID_ATTR","OVERLAY_COMPONENT_CLASS","CONTAINER_TYPE_ATTRIBUTE","ID_ATTRIBUTE","TYPE_ATTRIBUTE","CATALOG_VERSION_UUID_ATTRIBUTE",function(t,e,n,o,i,a,r,s,l){return{templateUrl:"personalizationsmarteditComponentLightUpDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,scope:{smarteditComponentId:"@",smarteditComponentType:"@"},link:function(c,d){var p='[class~="'+i+'"]['+o+"]["+a+'="CxCmsComponentContainer"]',m='[class~="'+i+'"]['+a+'="CxCmsComponentContainer"][data-smartedit-personalization-action-id]',u="["+r+"]["+l+"]["+s+"]",C=function(t){var n=!1,o=e.getCustomize();o.selectedCustomization&&o.selectedVariations&&(n=t.closest(m).length>0);return n};c.getPersonalizationComponentBorderClass=function(){var o=d.parent().closest(u),i=o.closest(p);i.toggleClass("perso__component-decorator",C(o)),i.toggleClass("hyicon hyicon-checkedlg perso__component-decorator-icon",C(o)),i.toggleClass("personalizationsmarteditComponentSelected",function(){var o=!1;if(angular.isArray(e.getCustomize().selectedVariations)){var i=n.getParentContainerIdForComponent(d);o=t.inArray(i,e.getCustomize().selectedComponents)>-1}return o}())}}}}])},function(t,e){angular.module("personalizationsmarteditContextMenu",["personalizationsmarteditServicesModule","smarteditRootModule"]).factory("personalizationsmarteditContextModal",["gatewayProxy",function(t){var e=function(){this.gatewayId="personalizationsmarteditContextModal",t.initForService(this)};return e.prototype.openDeleteAction=function(){},e.prototype.openAddAction=function(){},e.prototype.openEditAction=function(){},e.prototype.openEditComponentAction=function(){},new e}]).factory("personalizationsmarteditContextModalHelper",["personalizationsmarteditContextModal","personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService",function(t,e,n){var o={},i=function(t){if(e.getCombinedView().enabled){var n=e.getCombinedView().customize.selectedCustomization;return!n&&t&&(n=e.getCombinedView().selectedItems.filter(function(e){return e.customization.code===t})[0].customization),n}return e.getCustomize().selectedCustomization},a=function(t){var e=n.getAllSlotsSelector();e+=' [data-smartedit-container-source-id="'+t+'"]';var o=n.getFromSelector(e);return Array.prototype.slice.call(o.map(function(){return n.getParentSlotIdForComponent(n.getFromSelector(this))}))};return o.openDeleteAction=function(e){var n=angular.fromJson(e.properties),o={};o.containerId=e.containerId,o.containerSourceId=n.smarteditContainerSourceId,o.slotId=e.slotId,o.actionId=n.smarteditPersonalizationActionId||null,o.selectedVariationCode=n.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null;var r=n.smarteditCatalogVersionUuid.split("/");o.componentCatalog=r[0],o.componentCatalogVersion=r[1];var s=i(o.selectedCustomizationCode);return o.catalog=s.catalog,o.catalogVersion=s.catalogVersion,o.slotsToRefresh=a(n.smarteditContainerSourceId),t.openDeleteAction(o)},o.openAddAction=function(o){var r=angular.fromJson(o.properties),s={};s.componentType=o.componentType,s.componentId=o.componentId,s.containerId=o.containerId,s.containerSourceId=r.smarteditContainerSourceId,s.slotId=o.slotId,s.actionId=r.smarteditPersonalizationActionId||null,s.selectedVariationCode=e.getCombinedView().enabled?e.getCombinedView().customize.selectedVariations.code:e.getCustomize().selectedVariations.code;var l=r.smarteditCatalogVersionUuid.split("/");s.componentCatalog=l[0];var c=i();s.catalog=c.catalog,s.selectedCustomizationCode=c.code;var d=n.getParentSlotForComponent(o.element),p=n.getCatalogVersionUuid(d).split("/");return s.slotCatalog=p[0],s.slotsToRefresh=a(r.smarteditContainerSourceId),s.slotsToRefresh.push(o.slotId),t.openAddAction(s)},o.openEditAction=function(e){var n=angular.fromJson(e.properties),o={};return o.componentType=e.componentType,o.componentId=e.componentId,o.containerId=e.containerId,o.containerSourceId=n.smarteditContainerSourceId,o.slotId=e.slotId,o.actionId=n.smarteditPersonalizationActionId||null,o.selectedVariationCode=n.smarteditPersonalizationVariationId||null,o.selectedCustomizationCode=n.smarteditPersonalizationCustomizationId||null,o.componentUuid=n.smarteditComponentUuid||null,o.slotsToRefresh=a(n.smarteditContainerSourceId),t.openEditAction(o)},o.openEditComponentAction=function(e){var n=angular.fromJson(e.properties),o={};return o.smarteditComponentType=n.smarteditComponentType,o.smarteditComponentUuid=n.smarteditComponentUuid,o.smarteditCatalogVersionUuid=n.smarteditCatalogVersionUuid,t.openEditComponentAction(o)},o}])},function(t,e){angular.module("personalizationsmarteditCustomizeViewServiceModule",["personalizationsmarteditServicesModule","smarteditRootModule"]).factory("personalizationsmarteditCustomizeViewProxy",["gatewayProxy","personalizationsmarteditCustomizeViewHelper",function(t,e){var n=function(){this.gatewayId="personalizationsmarteditCustomizeViewGateway",t.initForService(this)};return n.prototype.getSourceContainersInfo=function(){return e.getSourceContainersInfo()},new n}])},function(t,e){angular.module("personalizationsmarteditExternalComponentDecoratorModule",[]).directive("personalizationsmarteditExternalComponentDecorator",function(){return{templateUrl:"externalComponentDecoratorTemplate.html",restrict:"C",transclude:!0,replace:!1,controller:"externalComponentDecoratorController",controllerAs:"ctrl",scope:{},bindToController:{active:"=",componentAttributes:"<"}}})},function(t,e){angular.module("personalizationsmarteditContextualMenuServiceModule",["personalizationsmarteditServicesModule","personalizationsmarteditCommons","yjqueryModule","personalizationsmarteditCommonsModule"]).factory("personalizationsmarteditContextualMenuService",["personalizationsmarteditContextService","personalizationsmarteditComponentHandlerService","yjQuery","personalizationsmarteditUtils",function(t,e,n,o){var i,a,r,s,l={},c=function(){i=t.getPersonalization(),a=t.getCustomize(),r=t.getCombinedView(),s=t.getSeData()},d=function(t){return angular.isObject(t.selectedCustomization)&&angular.isObject(t.selectedVariations)&&!angular.isArray(t.selectedVariations)},p=function(t){var n=e.getParentSlotForComponent(t.element),o=e.getCatalogVersionUuid(n);return s.seExperienceData.catalogDescriptor.catalogVersionUuid===o},m=function(){var e=a.selectedCustomization||r.customize.selectedCustomization;return!!e&&o.isItemFromCurrentCatalog(e,t.getSeData())};return l.isContextualMenuAddItemEnabled=function(t){c();var e=d(a)||r.enabled&&d(r.customize);return e=(e=(e=e&&!function(t){return r.enabled?n.inArray(t.componentAttributes.smarteditContainerSourceId,r.customize.selectedComponents)>-1:n.inArray(t.componentAttributes.smarteditContainerSourceId,a.selectedComponents)>-1}(t))&&p(t))&&m()},l.isContextualMenuEditItemEnabled=function(e){c();var n=i.enabled;return n=(n=(n=n&&angular.isDefined(e.componentAttributes.smarteditPersonalizationActionId))&&p(e))&&(m()||function(e){var n=(r.selectedItems||[]).filter(function(t){return t.customization.code===e.componentAttributes.smarteditPersonalizationCustomizationId&&t.variation.code===e.componentAttributes.smarteditPersonalizationVariationId});return!!(n=n.shift())&&o.isItemFromCurrentCatalog(n.customization,t.getSeData())}(e))},l.isContextualMenuDeleteItemEnabled=function(t){return l.isContextualMenuEditItemEnabled(t)},l.isContextualMenuShowActionListEnabled=function(t){c();var e=angular.isDefined(t.componentAttributes.smarteditPersonalizationActionId);return e=(e=e&&r.enabled)&&!r.customize.selectedCustomization},l.isContextualMenuInfoItemEnabled=function(){c();var t=i.enabled;return t=(t=(t=t&&!angular.isObject(a.selectedVariations))||angular.isArray(a.selectedVariations))&&!r.enabled},l.isContextualMenuEditComponentItemEnabled=function(t){c();var e=i.enabled;return e=e&&!r.enabled&&function(t){return s.seExperienceData.catalogDescriptor.catalogVersionUuid===t.componentAttributes.smarteditCatalogVersionUuid}(t)},l}])},function(t,e){angular.module("personalizationsmarteditSharedSlotDecorator",["slotSharedServiceModule"]).controller("personalizationsmarteditSharedSlotController",["slotSharedService","$element",function(t,e){var n=this;this.$onChanges=function(t){t.active&&t.active.currentValue&&(e.offset().top<=e.find(".decorative-panel-area").height()&&e.find(".decorative-panel-area").css("margin-top",e.find(".decorator-padding-container").height()),n.isPopupOpened=!1)},this.$onInit=function(){n.slotSharedFlag=!1,t.isSlotShared(n.smarteditComponentId).then(function(t){n.slotSharedFlag=t})}}]).directive("personalizationsmarteditSharedSlot",function(){return{templateUrl:"personalizationsmarteditSharedSlotDecoratorTemplate.html",restrict:"C",controller:"personalizationsmarteditSharedSlotController",controllerAs:"ctrl",scope:{},transclude:!0,bindToController:{smarteditComponentId:"@",active:"<"}}})},function(t,e){angular.module("personalizationsmarteditTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationsmartedit/combinedView/personalizationsmarteditCombinedViewComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div ng-class="classForElement">{{letterForElement}}</div>\n    <div data-ng-transclude></div>\n</div>'),t.put("web/features/personalizationsmartedit/componentLightUpDecorator/personalizationsmarteditComponentLightUpDecoratorTemplate.html",'<div ng-class="getPersonalizationComponentBorderClass()">\n    <div data-ng-transclude></div>\n</div>'),t.put("web/features/personalizationsmartedit/contextMenu/ShowActionList/personalizationsmarteditShowActionListTemplate.html",'<div class="pe-combinedview-ranking">\n    <div class="pe-combinedview-ranking__info-layout">\n        <div class="pe-combinedview-ranking__title"\n            data-translate="personalization.modal.showactionlist.title"></div>\n        <div class="perso__page-level-help-message"\n            data-translate="personalization.modal.showactionlist.help.label"></div>\n    </div>\n    <div class="pe-combinedview-ranking__list-item"\n        data-ng-repeat="item in $ctrl.selectedItems"\n        data-ng-init="$ctrl.initItem(item)"\n        data-ng-show="item.visible">\n        <div class="pe-combinedview-ranking__letter-layout">\n            <div data-ng-class="$ctrl.getClassForElement($index)"\n                data-ng-bind="$ctrl.getLetterForElement($index)"></div>\n        </div>\n        <div class="pe-combinedview-ranking__names-layout">\n            <div class="perso-wrap-ellipsis"\n                data-ng-bind="item.customization.name"\n                title="{{item.customization.name}}"></div>\n            <div class="perso-wrap-ellipsis perso-tree__primary-data"\n                data-ng-bind="item.variation.name"\n                title="{{item.variation.name}}"></div>\n        </div>\n        <div class="pe-combinedview-ranking__icon">\n            <span data-ng-if="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                class="perso__globe-icon hyicon hyicon-globe"\n                data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}"\n                data-tooltip-placement="top right"></span>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/contextMenu/ShowComponentInfoList/personalizationsmarteditShowComponentInfoListTemplate.html",'<div class="pe-component-info">\n    <div class="pe-component-info__info-layout">\n        <div class="pe-component-info__title"\n            data-translate="personalization.modal.showcomponentinfolist.title"></div>\n        <div class="perso__page-level-help-message"\n            data-ng-show="$ctrl.pagination.totalCount > 0"\n            data-translate="personalization.modal.showcomponentinfolist.help.label"></div>\n\n        <div class="perso__page-level-help-message"\n            data-ng-show="$ctrl.pagination.totalCount === 0"\n            data-translate="personalization.modal.showcomponentinfolist.help.nocustomizations">\n        </div>\n    </div>\n    <div class="perso__page-level-help-message pe-component-info__info-layout"\n        data-ng-show="$ctrl.pagination.totalCount > 0">\n        <span data-translate="personalization.modal.showcomponentinfolist.help.numberofenabledcustomizations"></span>\n        <span data-ng-bind="$ctrl.pagination.totalCount"></span>\n    </div>\n    <div class="pe-component-info__wrapper"\n        personalization-infinite-scroll="$ctrl.addMoreItems()"\n        personalization-infinite-scroll-distance="2"\n        data-personalization-prevent-parent-scroll>\n        <div data-ng-class="$ctrl.customizationVisible() ? \'pe-component-info__list-item\':\'\'"\n            data-ng-repeat="item in $ctrl.actions">\n            <div class="pe-component-info__names-layout">\n                <div class="perso-wrap-ellipsis"\n                    data-ng-bind="item.customizationName"\n                    title="{{item.customizationName}}"></div>\n                <div class="perso-wrap-ellipsis perso-tree__primary-data"\n                    data-ng-bind="item.variationName"\n                    title="{{item.variationName}}"></div>\n            </div>\n            <div data-ng-class="$ctrl.customizationVisible() ? \'pe-component-info__icon\':\'\'">\n                <span data-ng-show="!$ctrl.isCustomizationFromCurrentCatalog(item.customization)"\n                    data-ng-class="$ctrl.customizationVisible()?\'perso__globe-icon hyicon hyicon-globe\':\'\'"\n                    data-uib-tooltip="{{item.customization.catalogVersionNameL10N}}"\n                    data-tooltip-placement="top right"></span>\n            </div>\n        </div>\n        <div class="pe-spinner--inner"\n            data-ng-show="$ctrl.moreCustomizationsRequestProcessing">\n            <div data-ng-include="\'waitDialog.html\'"></div>\n        </div>\n    </div>\n</div>'),t.put("web/features/personalizationsmartedit/sharedSlotDecorator/personalizationsmarteditSharedSlotDecoratorTemplate.html",'<div>\n    <div class="cmsx-ctx-wrapper1 se-slot-contextual-menu-level1">\n        <div class="cmsx-ctx-wrapper2 se-slot-contextual-menu-level2">\n            <div class="decorative-panel-area"\n                data-ng-if="ctrl.active && ctrl.slotSharedFlag">\n                <div class="decorator-panel-padding-center"></div>\n                <div class="decorative-panel-slot-contextual-menu">\n                    <div class="shared-slot-button-template"\n                        data-ng-if="ctrl.slotSharedFlag">\n                        <div class="btn-group se-slot-ctx-menu__btn-group"\n                            data-uib-dropdown\n                            data-dropdown-append-to="\'#smarteditoverlay\'"\n                            data-auto-close="outsideClick"\n                            data-is-open="ctrl.isPopupOpened">\n                            <button type="button"\n                                data-uib-dropdown-toggle\n                                class="btn btn-primary shared-slot-button-template__btn se-slot-ctx-menu__divider"\n                                data-ng-class="{\'ySESharedSlotOpen\': ctrl.isPopupOpened}"\n                                id="sharedSlotButton-{{::ctrl.smarteditComponentId}}">\n                                <span class="hyicon hyicon-linked se-slot-ctx-menu__icon-shared"></span>\n                            </button>\n                            <div class="dropdown-menu dropdown-menu-right btn-block shared-slot__dropdown"\n                                data-uib-dropdown-menu>\n                                <div class="shared-slot__description"\n                                    data-translate="personalization.slot.shared.popover.message"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="decorator-padding-container">\n                <div class="decorator-padding-left"\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div data-ng-class="ctrl.active && ctrl.slotSharedFlag ? \'decorator-slot-border active\' : \'\'"></div>\n                <div class="yWrapperData"\n                    data-ng-transclude\n                    data-ng-class="{active: ctrl.active}"></div>\n                <div class="decorator-padding-right"\n                    data-ng-class="{active: ctrl.active}"></div>\n            </div>\n        </div>\n    </div>\n</div>')}])},function(t,e,n){var o={"./personalizationsmarteditCommons.js":13,"./personalizationsmarteditInfiniteScroll.js":14,"./templates.js":15};function webpackContext(t){var e=webpackContextResolve(t);return n(e)}function webpackContextResolve(t){var e=o[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,t.exports=webpackContext,webpackContext.id=12},function(t,e){angular.module("personalizationsmarteditCommons",["personalizationcommonsTemplates","yjqueryModule","alertServiceModule","seConstantsModule","l10nModule","smarteditServicesModule","personalizationsmarteditCommonsModule"]).run(["$rootScope","PERSONALIZATION_MODEL_STATUS_CODES",function(t,e){t.PERSONALIZATION_MODEL_STATUS_CODES=e}]).filter("statusNotDeleted",["personalizationsmarteditUtils",function(t){return function(e){return angular.isArray(e)?t.getVisibleItems(e):e}}]).directive("negate",[function(){return{require:"ngModel",link:function(t,e,n,o){o.$isEmpty=function(t){return!!t},o.$formatters.unshift(function(t){return!t}),o.$parsers.unshift(function(t){return!t})}}}]).directive("personalizationCurrentElement",[function(){return{restrict:"A",link:function(t,e,n){n.personalizationCurrentElement&&t.$eval(n.personalizationCurrentElement)(e)}}}]).directive("personalizationPreventParentScroll",function(){return{restrict:"A",scope:!1,link:function(t,e){var n=function(t){var n=t.originalEvent&&(t.originalEvent.wheelDeltaY||t.originalEvent.wheelDelta),o=-(t.deltaY||t.delta)||0;e[0].scrollTop-=t.wheelDeltaY||n||t.wheelDelta||o,t.stopPropagation(),t.preventDefault(),t.returnValue=!1};e[0].addEventListener("wheel",n,!1),t.$on("$destroy",function(){e[0].removeEventListener("wheel",n,!1)})}}})},function(t,e){angular.module("personalizationsmarteditCommons").directive("personalizationInfiniteScroll",["$rootScope","yjQuery","$window","$timeout",function(t,e,n,o){return{link:function(i,a,r){var s,l,c,d;return n=angular.element(n),c=0,null!==r.personalizationInfiniteScrollDistance&&i.$watch(r.personalizationInfiniteScrollDistance,function(t){return c=parseInt(t,10)}),d=!0,s=!1,null!==r.personalizationInfiniteScrollDisabled&&i.$watch(r.personalizationInfiniteScrollDisabled,function(t){if((d=!t)&&s)return s=!1,l()}),t.$on("refreshStart",function(){a.animate({scrollTop:"0"})}),l=function(){var n,o,l;if(!(a.children().length<=0))return n=e(a.children()[0]),o=a.offset().top+a.height(),(l=n.offset().top+n.height()-o<=a.height()*c)&&d?t.$$phase?i.$eval(r.personalizationInfiniteScroll):i.$apply(r.personalizationInfiniteScroll):l?s=!0:void 0},a.on("scroll",l),i.$on("$destroy",function(){return n.off("scroll",l)}),o(function(){return r.personalizationInfiniteScrollImmediateCheck?i.$eval(r.personalizationInfiniteScrollImmediateCheck)?l():void 0:l()},0)}}}])},function(t,e){angular.module("personalizationcommonsTemplates",[]).run(["$templateCache",function(t){"use strict";t.put("web/features/personalizationcommons/dateTimePickerRange/dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range">\n    <div class="col-md-6 pe-datetime-range__from"\n        data-ng-class="{\'has-error\': !$ctrl.isFromDateValid}">\n        <label for="customization-start-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate"\n            class="personalization-modal__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help></span>\'">\n        </y-help>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="form-control pe-date-field__input"\n                placeholder="{{ $ctrl.placeholderText | translate}}"\n                data-ng-disabled="!$ctrl.isEditable"\n                name="{{$ctrl.name}}"\n                data-ng-model="$ctrl.dateFrom"\n                id="customization-start-date" />\n            <span class="input-group-addon pe-datetime-range__picker"\n                data-ng-show="$ctrl.isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-from"\n            data-ng-show="!$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_from_key"\n                class="form-control pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}"\n                data-ng-model="$ctrl.dateFrom"\n                data-date-formatter\n                id="customization-start-date"\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span data-ng-if="!$ctrl.isFromDateValid"\n            class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description">\n        </span>\n    </div>\n    <div class="col-md-6 pe-datetime-range__to"\n        data-ng-class="{\'has-error\':!$ctrl.isToDateValid, \'has-warning\':$ctrl.isEndDateInThePast}">\n        <label for="customization-end-date"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate"\n            class="personalization-modal__label"></label>\n        <y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help></span>\'">\n        </y-help>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-to">\n            <input type=\'text\'\n                name="date_to_key"\n                class="form-control pe-date-field__input"\n                placeholder="{{ $ctrl.placeholderText | translate}}"\n                data-ng-disabled="!$ctrl.isEditable"\n                name="{{$ctrl.name}}"\n                data-ng-model="$ctrl.dateTo"\n                id="customization-end-date" />\n            <span class="input-group-addon pe-datetime-range__picker"\n                data-ng-show="$ctrl.isEditable">\n                <span class="glyphicon glyphicon-calendar pe-datetime-range__picker__icon"></span>\n            </span>\n        </div>\n        <div class="input-group date pe-date-field"\n            id="date-picker-range-to"\n            data-ng-show="!$ctrl.isEditable">\n            <input type=\'text\'\n                name="date_to_key"\n                class="form-control pe-date-field__input "\n                data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}"\n                data-ng-model="$ctrl.dateTo"\n                data-date-formatter\n                id="customization-end-date"\n                data-ng-disabled="true"\n                data-format-type="short">\n        </div>\n        <span class="help-block pe-datetime__error-msg pe-datetime__msg"\n            data-ng-if="!$ctrl.isToDateValid"\n            data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description">\n        </span>\n        <span data-ng-if="$ctrl.isEndDateInThePast"\n            class="help-block pe-datetime__warning-msg pe-datetime__msg">\n            <span class="hyicon hyicon-msgwarning"></span>\n            <span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span>\n        </span>\n    </div>\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom"\n    data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneBottom"\n    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollBottom()"\n    data-ng-mouseleave="$ctrl.stopScroll()">\n</div>'),t.put("web/features/personalizationcommons/personalizationsmarteditScrollZone/personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top"\n    data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'"\n    data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneTop"\n    data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollTop()"\n    data-ng-mouseleave="$ctrl.stopScroll()">\n</div>')}])},function(t,e){function webpackEmptyContext(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,t.exports=webpackEmptyContext,webpackEmptyContext.id=16},function(t,e,n){"use strict";function importAll(t){t.keys().forEach(function(e){t(e)})}n.r(e);var o=n(0),i=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},a=function(){function BodyDirective(t,e){this.personalizationsmarteditContextService=t,this.$log=e}return BodyDirective.$inject=["personalizationsmarteditContextService","$log"],BodyDirective.prototype.$onChanges=function(t){if(t.class&&t.class.currentValue){var e=t.class.currentValue.split(" ").filter(function(t){return/smartedit-page-uid\-(\S+)/.test(t)});if(e.length>0){var n=/smartedit-page-uid\-(\S+)/.exec(e[0])[1];this.personalizationsmarteditContextService.setPageId(n),e.length>1&&this.$log.error("more than one page- class element attribute defined")}}},BodyDirective=i([Object(o.SeDirective)({selector:"body",inputs:["class:@"]})],BodyDirective)}(),r=function(){return function Personalization(){this.enabled=!1}}(),s=function(){return function Customize(){this.enabled=!1,this.selectedCustomization=null,this.selectedVariations=null,this.selectedComponents=null}}(),l=function(){return function CombinedView(){this.enabled=!1,this.selectedItems=null,this.customize=new s}}(),c=function(){return function SeData(){this.pageId=null,this.seExperienceData=null,this.seConfigurationData=null}}(),d=n(1),p=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},m=function(){function PersonalizationsmarteditContextUtils(){}return PersonalizationsmarteditContextUtils.prototype.getContextObject=function(){return{personalization:new r,customize:new s,combinedView:new l,seData:new c}},PersonalizationsmarteditContextUtils.prototype.clearCustomizeContext=function(t){var e=t.getCustomize();e.enabled=!1,e.selectedCustomization=null,e.selectedVariations=null,e.selectedComponents=null,t.setCustomize(e)},PersonalizationsmarteditContextUtils.prototype.clearCustomizeContextAndReloadPreview=function(t,e){var n=d.copy(e.getCustomize().selectedVariations);this.clearCustomizeContext(e),d.isObject(n)&&!d.isArray(n)&&t.removePersonalizationDataFromPreview()},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewCustomizeContext=function(t){var e=t.getCombinedView();e.customize.enabled=!1,e.customize.selectedCustomization=null,e.customize.selectedVariations=null,e.customize.selectedComponents=null,(e.selectedItems||[]).forEach(function(t){delete t.highlighted}),t.setCombinedView(e)},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContext=function(t){var e=t.getCombinedView();e.enabled=!1,e.selectedItems=null,t.setCombinedView(e)},PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContextAndReloadPreview=function(t,e){var n=d.copy(e.getCombinedView().enabled),o=d.copy(e.getCombinedView().selectedItems);this.clearCombinedViewContext(e),n&&o&&t.removePersonalizationDataFromPreview()},PersonalizationsmarteditContextUtils=p([Object(o.SeInjectable)()],PersonalizationsmarteditContextUtils)}(),u=n(2),C=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},f={provide:"PERSONALIZATION_DATE_FORMATS",useValue:{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}},h=function(){function PersonalizationsmarteditDateUtils(t,e,n,o){this.$filter=t,this.DATE_CONSTANTS=e,this.PERSONALIZATION_DATE_FORMATS=n,this.isBlank=o}return PersonalizationsmarteditDateUtils.$inject=["$filter","DATE_CONSTANTS","PERSONALIZATION_DATE_FORMATS","isBlank"],PersonalizationsmarteditDateUtils.prototype.formatDate=function(t,e){return e=e||this.DATE_CONSTANTS.MOMENT_FORMAT,t?(t.match&&t.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)&&(t=t.slice(0,-2)+":"+t.slice(-2)),u(new Date(t)).format(e)):""},PersonalizationsmarteditDateUtils.prototype.formatDateWithMessage=function(t,e){return e=e||this.PERSONALIZATION_DATE_FORMATS.SHORT_DATE_FORMAT,t?this.formatDate(t,e):this.$filter("translate")("personalization.toolbar.pagecustomizations.nodatespecified")},PersonalizationsmarteditDateUtils.prototype.isDateInThePast=function(t){return!this.isBlank(t)&&u(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isBefore()},PersonalizationsmarteditDateUtils.prototype.isDateValidOrEmpty=function(t){return this.isBlank(t)||u(t,this.DATE_CONSTANTS.MOMENT_FORMAT).isValid()},PersonalizationsmarteditDateUtils.prototype.isDateRangeValid=function(t,e){return!(!this.isBlank(t)&&!this.isBlank(e))||u(new Date(t)).isSameOrBefore(u(new Date(e)))},PersonalizationsmarteditDateUtils.prototype.isDateStrFormatValid=function(t,e){return e=e||this.DATE_CONSTANTS.MOMENT_FORMAT,!this.isBlank(t)&&u(t,e,!0).isValid()},PersonalizationsmarteditDateUtils=C([Object(o.SeInjectable)()],PersonalizationsmarteditDateUtils)}(),g=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},z={provide:"PERSONALIZATION_MODEL_STATUS_CODES",useValue:{ENABLED:"ENABLED",DISABLED:"DISABLED"}},S={provide:"PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",useValue:{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}},v={provide:"PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",useValue:{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}},y=function(){function PersonalizationsmarteditUtils(t,e,n,o,i,a,r){this.$q=t,this.$filter=e,this.l10nFilter=n,this.PERSONALIZATION_MODEL_STATUS_CODES=o,this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=i,this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=a,this.catalogService=r}return PersonalizationsmarteditUtils.$inject=["$q","$filter","l10nFilter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","catalogService"],PersonalizationsmarteditUtils.prototype.pushToArrayIfValueExists=function(t,e,n){n&&t.push({key:e,value:n})},PersonalizationsmarteditUtils.prototype.getVariationCodes=function(t){return void 0===typeof t||null===t?[]:t.map(function(t){return t.code}).filter(function(t){return void 0!==t})},PersonalizationsmarteditUtils.prototype.getVariationKey=function(t,e){return void 0===t||void 0===e?[]:e.map(function(e){return{variationCode:e.code,customizationCode:t,catalog:e.catalog,catalogVersion:e.catalogVersion}})},PersonalizationsmarteditUtils.prototype.getSegmentTriggerForVariation=function(t){var e=(t.triggers||[]).filter(function(t){return"segmentTriggerData"===t.type});return 0===e.length?{}:e[0]},PersonalizationsmarteditUtils.prototype.isPersonalizationItemEnabled=function(t){return t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED},PersonalizationsmarteditUtils.prototype.getTranslateFilter=function(){return this.$filter("translate")},PersonalizationsmarteditUtils.prototype.getEnablementTextForCustomization=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".customization.enabled"):this.getTranslateFilter()(e+".customization.disabled")},PersonalizationsmarteditUtils.prototype.getEnablementTextForVariation=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".variation.enabled"):this.getTranslateFilter()(e+".variation.disabled")},PersonalizationsmarteditUtils.prototype.getEnablementActionTextForVariation=function(t,e){return e=e||"personalization",this.isPersonalizationItemEnabled(t)?this.getTranslateFilter()(e+".variation.options.disable"):this.getTranslateFilter()(e+".variation.options.enable")},PersonalizationsmarteditUtils.prototype.getActivityStateForCustomization=function(t){return t.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED?u().isBetween(new Date(t.enabledStartDate),new Date(t.enabledEndDate),"minute","[]")?"perso__status--enabled":"perso__status--ignore":"perso__status--disabled"},PersonalizationsmarteditUtils.prototype.getActivityStateForVariation=function(t,e){return e.enabled?this.getActivityStateForCustomization(t):"perso__status--disabled"},PersonalizationsmarteditUtils.prototype.isItemVisible=function(t){return"DELETED"!==t.status},PersonalizationsmarteditUtils.prototype.getVisibleItems=function(t){var e=this;return t.filter(function(t){return e.isItemVisible(t)})},PersonalizationsmarteditUtils.prototype.getValidRank=function(t,e,n){for(var o=t.indexOf(e),i=n<0?-1:1,a=o+n;a>=0&&a<t.length&&!this.isItemVisible(t[a]);)a+=i;return t[a=(a=a>=t.length?t.length-1:a)<0?0:a].rank},PersonalizationsmarteditUtils.prototype.getStatusesMapping=function(){var t=[];return t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL,text:"personalization.context.status.all",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED,this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]}),t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED]}),t.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]}),t},PersonalizationsmarteditUtils.prototype.getClassForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[e].listClass},PersonalizationsmarteditUtils.prototype.getLetterForElement=function(t){var e=t%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return String.fromCharCode("a".charCodeAt(0)+e).toUpperCase()},PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltip=function(t,e,n){var o=this;e=e||"",n=n||"\n";var i="";return d.forEach(t.commerceCustomizations,function(t,a){i+=e+o.$filter("translate")("personalization.modal.manager.commercecustomization."+a)+": "+t+n}),i},PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltipHTML=function(t){return this.getCommerceCustomizationTooltip(t,"<div>","</div>")},PersonalizationsmarteditUtils.prototype.isItemFromCurrentCatalog=function(t,e){var n=e.seExperienceData.catalogDescriptor;return t.catalog===n.catalogId&&t.catalogVersion===n.catalogVersion},PersonalizationsmarteditUtils.prototype.hasCommerceActions=function(t){return t.numberOfCommerceActions>0},PersonalizationsmarteditUtils.prototype.getCatalogVersionNameByUuid=function(t){var e=this,n=this.$q.defer();return this.catalogService.getCatalogVersionByUuid(t).then(function(t){n.resolve(e.l10nFilter(t.catalogName)+" ("+t.version+")")}),n.promise},PersonalizationsmarteditUtils.prototype.getAndSetCatalogVersionNameL10N=function(t){this.getCatalogVersionNameByUuid(t.catalog+"/"+t.catalogVersion).then(function(e){t.catalogVersionNameL10N=e})},PersonalizationsmarteditUtils=g([Object(o.SeInjectable)()],PersonalizationsmarteditUtils)}(),_=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},P=function(){function DateTimePickerRangeComponent(t,e,n,o,i){this.DATE_CONSTANTS=t,this.personalizationsmarteditDateUtils=e,this.$element=n,this.$scope=o,this.languageService=i,this.placeholderText="personalization.commons.datetimepicker.placeholder",this.isFromDateValid=!1,this.isToDateValid=!1,this.isEndDateInThePast=!1}return DateTimePickerRangeComponent.$inject=["DATE_CONSTANTS","personalizationsmarteditDateUtils","$element","$scope","languageService"],DateTimePickerRangeComponent.prototype.$onInit=function(){this.actionsIfisEditable()},DateTimePickerRangeComponent.prototype.getDateOrDefault=function(t){try{return u(new Date(t))}catch(t){return!1}},DateTimePickerRangeComponent.prototype.actionsIfisEditable=function(){var t=this;this.isEditable&&(this.getFromPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,void 0);this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateTo)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(e,this.dateTo)&&(e=d.copy(this.dateTo)),this.dateFrom=e}.bind(this)),this.getToPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:!0,showClose:!0,useCurrent:!1,keepInvalid:!0,locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide",function(t){var e=this.personalizationsmarteditDateUtils.formatDate(t.date,void 0);this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateFrom)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(this.dateFrom,e)&&(e=d.copy(this.dateFrom)),this.dateTo=e}.bind(this)),this.$scope.$watch("this.$ctrl.dateFrom",function(){t.isFromDateValid=t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateFrom),t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateFrom,t.DATE_CONSTANTS.MOMENT_FORMAT)?t.getToDatetimepicker().minDate(t.getMinToDate(t.dateFrom)):t.getToDatetimepicker().minDate(u())},!0),this.$scope.$watch("this.$ctrl.dateTo",function(){t.personalizationsmarteditDateUtils.isDateValidOrEmpty(t.dateTo)?(t.isToDateValid=!0,t.isEndDateInThePast=t.personalizationsmarteditDateUtils.isDateInThePast(t.dateTo)):(t.isToDateValid=!1,t.isEndDateInThePast=!1),t.personalizationsmarteditDateUtils.isDateStrFormatValid(t.dateTo,t.DATE_CONSTANTS.MOMENT_FORMAT)?t.getFromDatetimepicker().maxDate(t.getDateOrDefault(t.dateTo)):""===t.dateTo&&t.getFromDatetimepicker().maxDate(!1)},!0))},DateTimePickerRangeComponent.prototype.getMinToDate=function(t){return this.personalizationsmarteditDateUtils.isDateInThePast(t)?u():this.getDateOrDefault(t)},DateTimePickerRangeComponent.prototype.getFromPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-from")},DateTimePickerRangeComponent.prototype.getFromDatetimepicker=function(){return this.getFromPickerNode().datetimepicker().data("DateTimePicker")},DateTimePickerRangeComponent.prototype.getToPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-to")},DateTimePickerRangeComponent.prototype.getToDatetimepicker=function(){return this.getToPickerNode().datetimepicker().data("DateTimePicker")},DateTimePickerRangeComponent=_([Object(o.SeComponent)({templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]})],DateTimePickerRangeComponent)}(),b=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},T=function(){function IsDateValidOrEmptyDirective(t){this.personalizationsmarteditDateUtils=t}return IsDateValidOrEmptyDirective.$inject=["personalizationsmarteditDateUtils"],IsDateValidOrEmptyDirective.prototype.isDateInThePast=function(t){return this.personalizationsmarteditDateUtils.isDateValidOrEmpty(t)},IsDateValidOrEmptyDirective=b([Object(o.SeDirective)({require:"ngModel",selector:"[isdatevalidorempty]"})],IsDateValidOrEmptyDirective)}(),I=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},E=function(){function PaginationHelper(t){t=t||{},this.count=t.count||0,this.page=t.page||0,this.totalCount=t.totalCount||0,this.totalPages=t.totalPages||0}return PaginationHelper.$inject=["initialData"],PaginationHelper.prototype.reset=function(){this.count=50,this.page=-1,this.totalPages=1,this.totalCount=0},PaginationHelper.prototype.getCount=function(){return this.count},PaginationHelper.prototype.getPage=function(){return this.page},PaginationHelper.prototype.getTotalCount=function(){return this.totalCount},PaginationHelper.prototype.getTotalPages=function(){return this.totalPages},PaginationHelper=I([Object(o.SeInjectable)()],PaginationHelper)}(),D=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},O=function(){function PersonalizationsmarteditMessageHandler(t){this.alertService=t}return PersonalizationsmarteditMessageHandler.$inject=["alertService"],PersonalizationsmarteditMessageHandler.prototype.sendInformation=function(t){this.alertService.showInfo(t)},PersonalizationsmarteditMessageHandler.prototype.sendError=function(t){this.alertService.showDanger(t)},PersonalizationsmarteditMessageHandler.prototype.sendWarning=function(t){this.alertService.showWarning(t)},PersonalizationsmarteditMessageHandler.prototype.sendSuccess=function(t){this.alertService.showSuccess(t)},PersonalizationsmarteditMessageHandler=D([Object(o.SeInjectable)()],PersonalizationsmarteditMessageHandler)}(),A=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},x=function(){function PersonalizationsmarteditCommerceCustomizationService(){this.nonCommerceActionTypes=["cxCmsActionData"],this.types=[]}return PersonalizationsmarteditCommerceCustomizationService.prototype.isNonCommerceAction=function(t){return this.nonCommerceActionTypes.some(function(e){return e===t.type})},PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceAction=function(t){return!this.isNonCommerceAction(t)},PersonalizationsmarteditCommerceCustomizationService.prototype.isTypeEnabled=function(t,e){return void 0!==e&&null!==e&&!0===e[t.confProperty]},PersonalizationsmarteditCommerceCustomizationService.prototype.registerType=function(t){var e=t.type,n=!1;this.types.forEach(function(t){t.type===e&&(n=!0)}),n||this.types.push(t)},PersonalizationsmarteditCommerceCustomizationService.prototype.getAvailableTypes=function(t){var e=this;return this.types.filter(function(n){return e.isTypeEnabled(n,t)})},PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceCustomizationEnabled=function(t){return this.getAvailableTypes(t).length>0},PersonalizationsmarteditCommerceCustomizationService.prototype.getNonCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isNonCommerceAction,this).length},PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCountMap=function(t){var e={};return(t.actions||[]).filter(this.isCommerceAction,this).forEach(function(t){var n=t.type.toLowerCase(),o=e[n];void 0===o?o=1:o+=1,e[n]=o}),e},PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCount=function(t){return(t.actions||[]).filter(this.isCommerceAction,this).length},PersonalizationsmarteditCommerceCustomizationService=A([Object(o.SeInjectable)()],PersonalizationsmarteditCommerceCustomizationService)}(),w=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},N=function(){function PersonalizationsmarteditScrollZoneComponent(t,e,n,o){this.$scope=t,this.$timeout=e,this.$compile=n,this.yjQuery=o,this.scrollZoneTop=!0,this.scrollZoneBottom=!0,this.start=!1,this.scrollZoneVisible=!1,this.isTransparent=!1,this.elementToScroll={},this.scrollZoneId=""}return PersonalizationsmarteditScrollZoneComponent.$inject=["$scope","$timeout","$compile","yjQuery"],PersonalizationsmarteditScrollZoneComponent.prototype.stopScroll=function(){this.start=!1},PersonalizationsmarteditScrollZoneComponent.prototype.scrollTop=function(){var t=this;this.start&&(this.scrollZoneTop=!(this.elementToScroll.scrollTop()<=2),this.scrollZoneBottom=!0,this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()-15),this.$timeout(function(){t.scrollTop()},100))},PersonalizationsmarteditScrollZoneComponent.prototype.scrollBottom=function(){var t=this;if(this.start){this.scrollZoneTop=!0;var e=this.elementToScroll.get(0).scrollHeight-this.elementToScroll.scrollTop();this.scrollZoneBottom=!(Math.abs(e-this.elementToScroll.outerHeight())<2),this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()+15),this.$timeout(function(){t.scrollBottom()},100)}},PersonalizationsmarteditScrollZoneComponent.prototype.$onChanges=function(t){t.scrollZoneVisible&&(this.start=t.scrollZoneVisible.currentValue,this.scrollZoneTop=!0,this.scrollZoneBottom=!0)},PersonalizationsmarteditScrollZoneComponent.prototype.$onInit=function(){var t=this.$compile('<div id="sliderTopScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(this.$scope);d.element("body").append(t);var e=this.$compile('<div id="sliderBottomScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(this.$scope);d.element("body").append(e),this.elementToScroll=this.getElementToScroll()},PersonalizationsmarteditScrollZoneComponent.prototype.$onDestroy=function(){var t=this;d.element("#sliderTopScrollZone"+this.scrollZoneId).scope().$destroy(),d.element("#sliderTopScrollZone"+this.scrollZoneId).remove(),d.element("#sliderBottomScrollZone"+this.scrollZoneId).scope().$destroy(),d.element("#sliderBottomScrollZone"+this.scrollZoneId).remove(),d.element("body").contents().each(function(e){e.nodeType===Node.COMMENT_NODE&&e.data.indexOf("personalizationsmarteditScrollZone")>-1&&t.yjQuery(e).remove()})},PersonalizationsmarteditScrollZoneComponent=w([Object(o.SeComponent)({inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]})],PersonalizationsmarteditScrollZoneComponent)}(),R=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},M=function(){function PersonalizationsmarteditCommonsModule(){}return PersonalizationsmarteditCommonsModule=R([Object(o.SeModule)({imports:["smarteditServicesModule","yjqueryModule","l10nModule","alertServiceModule"],providers:[E,{provide:"PaginationHelper",useFactory:function(){return function(t){return new E(t)}}},h,m,f,z,S,v,y,O,x],declarations:[T,P,N]})],PersonalizationsmarteditCommonsModule)}(),V=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},j={provide:"COMPONENT_CONTAINER_TYPE",useValue:"CxCmsComponentContainer"},U={provide:"CONTAINER_SOURCE_ID_ATTR",useValue:"data-smartedit-container-source-id"},L=function(){function PersonalizationsmarteditComponentHandlerService(t,e,n,o,i,a,r,s){this.componentHandlerService=t,this.yjQuery=e,this.CONTAINER_TYPE_ATTRIBUTE=n,this.CONTAINER_ID_ATTRIBUTE=o,this.TYPE_ATTRIBUTE=i,this.CONTENT_SLOT_TYPE=a,this.COMPONENT_CONTAINER_TYPE=r,this.CONTAINER_SOURCE_ID_ATTR=s}return PersonalizationsmarteditComponentHandlerService.$inject=["componentHandlerService","yjQuery","CONTAINER_TYPE_ATTRIBUTE","CONTAINER_ID_ATTRIBUTE","TYPE_ATTRIBUTE","CONTENT_SLOT_TYPE","COMPONENT_CONTAINER_TYPE","CONTAINER_SOURCE_ID_ATTR"],PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]")},PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerIdForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]").attr(this.CONTAINER_ID_ATTRIBUTE)},PersonalizationsmarteditComponentHandlerService.prototype.getParentContainerSourceIdForComponent=function(t){return t.closest("["+this.CONTAINER_TYPE_ATTRIBUTE+"="+this.COMPONENT_CONTAINER_TYPE+"]").attr(this.CONTAINER_SOURCE_ID_ATTR)},PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotForComponent=function(t){return t.closest("["+this.TYPE_ATTRIBUTE+"="+this.CONTENT_SLOT_TYPE+"]")},PersonalizationsmarteditComponentHandlerService.prototype.getParentSlotIdForComponent=function(t){return this.componentHandlerService.getParentSlotForComponent(t)},PersonalizationsmarteditComponentHandlerService.prototype.getOriginalComponent=function(t,e){return this.componentHandlerService.getOriginalComponent(t,e)},PersonalizationsmarteditComponentHandlerService.prototype.isExternalComponent=function(t,e){return this.componentHandlerService.isExternalComponent(t,e)},PersonalizationsmarteditComponentHandlerService.prototype.getCatalogVersionUuid=function(t){return this.componentHandlerService.getCatalogVersionUuid(t)},PersonalizationsmarteditComponentHandlerService.prototype.getAllSlotsSelector=function(){return this.componentHandlerService.getAllSlotsSelector()},PersonalizationsmarteditComponentHandlerService.prototype.getFromSelector=function(t){return this.yjQuery(t)},PersonalizationsmarteditComponentHandlerService.prototype.getContainerSourceIdForContainerId=function(t){var e=this.getAllSlotsSelector();e+=" ["+this.CONTAINER_ID_ATTRIBUTE+'="'+t+'"]';var n=this.getFromSelector(e);return n[0]?n[0].getAttribute(this.CONTAINER_SOURCE_ID_ATTR):""},PersonalizationsmarteditComponentHandlerService=V([Object(o.SeInjectable)()],PersonalizationsmarteditComponentHandlerService)}(),$=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},k=function(){function PersonalizationsmarteditCustomizeViewHelper(t,e){this.personalizationsmarteditComponentHandlerService=t,this.lodash=e}return PersonalizationsmarteditCustomizeViewHelper.$inject=["personalizationsmarteditComponentHandlerService","lodash"],PersonalizationsmarteditCustomizeViewHelper.prototype.getSourceContainersInfo=function(){var t=this,e=this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();e+=" [data-smartedit-container-source-id]";var n=this.personalizationsmarteditComponentHandlerService.getFromSelector(e).map(function(e,n){var o=t.personalizationsmarteditComponentHandlerService.getFromSelector(n);return{containerId:t.personalizationsmarteditComponentHandlerService.getParentContainerIdForComponent(o),containerSourceId:t.personalizationsmarteditComponentHandlerService.getParentContainerSourceIdForComponent(o)}});return this.lodash.countBy(n,"containerSourceId")},PersonalizationsmarteditCustomizeViewHelper=$([Object(o.SeInjectable)()],PersonalizationsmarteditCustomizeViewHelper)}(),F=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},B=function(){function PersonalizationsmarteditContextService(t,e,n,o){this.yjQuery=t,this.contextualMenuService=e,this.personalizationsmarteditContextServiceReverseProxy=n,this.personalizationsmarteditContextUtils=o;var i=o.getContextObject();this.setPersonalization(i.personalization),this.setCustomize(i.customize),this.setCombinedView(i.combinedView),this.setSeData(i.seData)}return PersonalizationsmarteditContextService.$inject=["yjQuery","contextualMenuService","personalizationsmarteditContextServiceReverseProxy","personalizationsmarteditContextUtils"],PersonalizationsmarteditContextService.prototype.getPersonalization=function(){return this.personalization},PersonalizationsmarteditContextService.prototype.setPersonalization=function(t){this.personalization=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getCustomize=function(){return this.customize},PersonalizationsmarteditContextService.prototype.setCustomize=function(t){this.customize=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getCombinedView=function(){return this.combinedView},PersonalizationsmarteditContextService.prototype.setCombinedView=function(t){this.combinedView=t,this.contextualMenuService.refreshMenuItems()},PersonalizationsmarteditContextService.prototype.getSeData=function(){return this.seData},PersonalizationsmarteditContextService.prototype.setSeData=function(t){this.seData=t},PersonalizationsmarteditContextService.prototype.setPageId=function(t){this.seData.pageId=t,this.personalizationsmarteditContextServiceReverseProxy.setPageId(t)},PersonalizationsmarteditContextService=F([Object(o.SeInjectable)()],PersonalizationsmarteditContextService)}(),H=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},Z=function(){function PersonalizationsmarteditContextServiceProxy(t){this.personalizationsmarteditContextService=t}return PersonalizationsmarteditContextServiceProxy.$inject=["personalizationsmarteditContextService"],PersonalizationsmarteditContextServiceProxy.prototype.setPersonalization=function(t){this.personalizationsmarteditContextService.setPersonalization(t)},PersonalizationsmarteditContextServiceProxy.prototype.setCustomize=function(t){this.personalizationsmarteditContextService.setCustomize(t)},PersonalizationsmarteditContextServiceProxy.prototype.setCombinedView=function(t){this.personalizationsmarteditContextService.setCombinedView(t)},PersonalizationsmarteditContextServiceProxy.prototype.setSeData=function(t){this.personalizationsmarteditContextService.setSeData(t)},PersonalizationsmarteditContextServiceProxy=H([Object(o.GatewayProxied)("setPersonalization","setCustomize","setCombinedView","setSeData"),Object(o.SeInjectable)()],PersonalizationsmarteditContextServiceProxy)}(),q=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},Y=function(){function PersonalizationsmarteditContextServiceReverseProxy(){}return PersonalizationsmarteditContextServiceReverseProxy.prototype.applySynchronization=function(){"proxyFunction"},PersonalizationsmarteditContextServiceReverseProxy.prototype.setPageId=function(t){"proxyFunction"},PersonalizationsmarteditContextServiceReverseProxy=q([Object(o.GatewayProxied)("applySynchronization","setPageId"),Object(o.SeInjectable)()],PersonalizationsmarteditContextServiceReverseProxy)}(),K=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},W={provide:"ACTIONS_DETAILS",useValue:"/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/actions"},G=function(){function PersonalizationsmarteditRestService(t,e,n){this.restServiceFactory=t,this.personalizationsmarteditContextService=e,this.ACTIONS_DETAILS=n}return PersonalizationsmarteditRestService.$inject=["restServiceFactory","personalizationsmarteditContextService","ACTIONS_DETAILS"],PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCatalogAwarePathVariables=function(t,e){e=e||{};var n=this.personalizationsmarteditContextService.getSeData().seExperienceData,o={catalogId:e.catalog||n.catalogDescriptor.catalogId,catalogVersion:e.catalogVersion||n.catalogDescriptor.catalogVersion};return t=d.extend(t,o)},PersonalizationsmarteditRestService.prototype.getCxCmsAllActionsForContainer=function(t,e){var n;e=e||{};var o=this.restServiceFactory.get(this.ACTIONS_DETAILS);return n={type:"CXCMSACTION",customizationStatus:"ENABLED",variationStatus:"ENABLED",catalogs:"ALL",needsTotal:!0,containerId:t,pageSize:e.currentSize||25,currentPage:e.currentPage||0},n=this.extendRequestParamObjWithCatalogAwarePathVariables(n,void 0),o.get(n)},PersonalizationsmarteditRestService=K([Object(o.SeInjectable)()],PersonalizationsmarteditRestService)}(),Q=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},J=function(){function PersonalizationsmarteditServicesModule(){}return PersonalizationsmarteditServicesModule=Q([Object(o.SeModule)({imports:["smarteditServicesModule","yLoDashModule","personalizationsmarteditCommons","contextualMenuServiceModule","personalizationsmarteditCommonsModule"],providers:[L,k,B,Z,Y,G,j,U,W]})],PersonalizationsmarteditServicesModule)}(),X=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},tt=function(){function PersonalizationsmarteditShowComponentInfoListComponent(t,e,n,o,i,a){this.personalizationsmarteditContextService=t,this.personalizationsmarteditUtils=e,this.personalizationsmarteditRestService=n,this.personalizationsmarteditMessageHandler=o,this.$filter=i,this.personalizationsmarteditComponentHandlerService=a}return PersonalizationsmarteditShowComponentInfoListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","$filter","personalizationsmarteditComponentHandlerService"],PersonalizationsmarteditShowComponentInfoListComponent.prototype.$onInit=function(){this.initPageSize=25,this.moreCustomizationsRequestProcessing=!1,this.isContainerIdEmpty=!this.component||!this.component.containerId,this.containerSourceId=this.isContainerIdEmpty?"":this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.component.containerId),this.pagination=new E({}),this.pagination.reset()},PersonalizationsmarteditShowComponentInfoListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){return!!t&&this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditShowComponentInfoListComponent.prototype.customizationVisible=function(){return!!this.actions&&(!this.isContainerIdEmpty&&this.actions.length>0)},PersonalizationsmarteditShowComponentInfoListComponent.prototype.getCustomizationsFilterObject=function(){return{currentSize:this.initPageSize,currentPage:this.pagination.getPage()+1}},PersonalizationsmarteditShowComponentInfoListComponent.prototype.getAllActionsAffectingContainerId=function(t,e){var n=this;this.personalizationsmarteditRestService.getCxCmsAllActionsForContainer(t,e).then(function(t){n.actions=n.actions||{};for(var e=t.actions||{},o=0,i=e;o<i.length;o++){var a=i[o];a.customization={},a.customization.catalog=a.actionCatalog,a.customization.catalogVersion=a.actionCatalogVersion,n.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(a.customization)}Array.prototype.push.apply(n.actions,e),n.pagination=new E(t.pagination),n.moreCustomizationsRequestProcessing=!1},function(){n.personalizationsmarteditMessageHandler.sendError(n.$filter("translate")("personalization.error.gettingactions")),n.moreCustomizationsRequestProcessing=!1})},PersonalizationsmarteditShowComponentInfoListComponent.prototype.addMoreItems=function(){this.pagination.getPage()<this.pagination.getTotalPages()-1&&!this.moreCustomizationsRequestProcessing&&!this.isContainerIdEmpty&&(this.moreCustomizationsRequestProcessing=!0,this.getAllActionsAffectingContainerId(this.containerSourceId,this.getCustomizationsFilterObject()))},PersonalizationsmarteditShowComponentInfoListComponent=X([Object(o.SeComponent)({templateUrl:"personalizationsmarteditShowComponentInfoListTemplate.html",inputs:["component"]})],PersonalizationsmarteditShowComponentInfoListComponent)}(),et=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},nt=function(){function PersonalizationsmarteditShowComponentInfoListModule(){}return PersonalizationsmarteditShowComponentInfoListModule=et([Object(o.SeModule)({imports:["personalizationsmarteditCommons","personalizationsmarteditCommonsModule"],declarations:[tt]})],PersonalizationsmarteditShowComponentInfoListModule)}(),ot=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},it=function(){function PersonalizationsmarteditShowActionListComponent(t,e,n){this.personalizationsmarteditContextService=t,this.personalizationsmarteditUtils=e,this.personalizationsmarteditComponentHandlerService=n}return PersonalizationsmarteditShowActionListComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditComponentHandlerService"],PersonalizationsmarteditShowActionListComponent.prototype.$onInit=function(){this.selectedItems=this.personalizationsmarteditContextService.getCombinedView().selectedItems,this.containerSourceId=this.personalizationsmarteditComponentHandlerService.getContainerSourceIdForContainerId(this.component.containerId)},PersonalizationsmarteditShowActionListComponent.prototype.getLetterForElement=function(t){return this.personalizationsmarteditUtils.getLetterForElement(t)},PersonalizationsmarteditShowActionListComponent.prototype.getClassForElement=function(t){return this.personalizationsmarteditUtils.getClassForElement(t)},PersonalizationsmarteditShowActionListComponent.prototype.initItem=function(t){var e=this;t.visible=!1,(t.variation.actions||[]).forEach(function(n){n.containerId&&n.containerId===e.containerSourceId&&(t.visible=!0)}),this.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(t.variation)},PersonalizationsmarteditShowActionListComponent.prototype.isCustomizationFromCurrentCatalog=function(t){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(t,this.personalizationsmarteditContextService.getSeData())},PersonalizationsmarteditShowActionListComponent=ot([Object(o.SeComponent)({templateUrl:"personalizationsmarteditShowActionListTemplate.html",inputs:["component"]})],PersonalizationsmarteditShowActionListComponent)}(),at=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r},rt=function(){function PersonalizationsmarteditShowActionListModule(){}return PersonalizationsmarteditShowActionListModule=at([Object(o.SeModule)({imports:["personalizationsmarteditCommons"],declarations:[it]})],PersonalizationsmarteditShowActionListModule)}();n.d(e,"Personalizationsmarteditmodule",function(){return lt});var st=function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};!function doImport(){importAll(n(3)),importAll(n(12)),importAll(n(16))}();var lt=function(){function Personalizationsmarteditmodule(){}return Personalizationsmarteditmodule=st([Object(o.SeModule)({imports:[rt,M,J,nt,"personalizationsmarteditTemplates","decoratorServiceModule","personalizationsmarteditComponentLightUpDecorator","personalizationsmarteditCombinedViewComponentLightUpDecorator","personalizationsmarteditContextMenu","personalizationsmarteditCommons","personalizationsmarteditSharedSlotDecorator","featureServiceModule","yjqueryModule","personalizationsmarteditContextualMenuServiceModule","externalComponentDecoratorModule","externalComponentButtonModule","personalizationsmarteditCustomizeViewServiceModule","personalizationsmarteditExternalComponentDecoratorModule"],declarations:[a],initialize:["yjQuery","domain","$q","personalizationsmarteditComponentHandlerService","personalizationsmarteditContextualMenuService","personalizationsmarteditContextServiceProxy","personalizationsmarteditContextModalHelper","personalizationsmarteditCustomizeViewProxy","bodyDirective","decoratorService","featureService",function(t,e,n,o,i,a,r,s,l,c,d){"ngInject";!function(e){var n=t("<link rel='stylesheet' type='text/css' href='"+e+"'>");t("head").append(n)}(e+"/personalizationsmartedit/css/style.css"),c.addMappings({"^.*Slot$":["personalizationsmarteditSharedSlot"]}),c.addMappings({"^.*Component$":["personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp"]}),c.addMappings({"^((?!Slot).)*$":["personalizationsmarteditExternalComponentDecorator"]}),d.addDecorator({key:"personalizationsmarteditExternalComponentDecorator",nameI18nKey:"personalizationsmarteditExternalComponentDecorator",displayCondition:function(t,e){var i=o.getOriginalComponent(e,t),a=o.getParentContainerForComponent(i);return a.length>0&&a[0].attributes["data-smartedit-personalization-action-id"]?n.when(!1):n.when(o.isExternalComponent(e,t))}}),d.addDecorator({key:"personalizationsmarteditComponentLightUp",nameI18nKey:"personalizationsmarteditComponentLightUp"}),d.addDecorator({key:"personalizationsmarteditCombinedViewComponentLightUp",nameI18nKey:"personalizationsmarteditCombinedViewComponentLightUp"}),d.addDecorator({key:"personalizationsmarteditSharedSlot",nameI18nKey:"personalizationsmarteditSharedSlot"}),d.addContextualMenuButton({key:"personalizationsmartedit.context.show.action.list",i18nKey:"personalization.context.action.list.show",nameI18nKey:"personalization.context.action.list.show",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuShowActionListEnabled(t)},action:{template:'<personalizationsmartedit-show-action-list data-component="componentDetails"></personalizationsmartedit-show-action-list>'},displayClass:"showactionlistbutton",displayIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-combinedview cmsx-ctx__icon--small",permissions:["se.read.page"],priority:500}),d.addContextualMenuButton({key:"personalizationsmartedit.context.info.action",i18nKey:"personalization.context.action.info",nameI18nKey:"personalization.context.action.info",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuInfoItemEnabled(t.element)},action:{template:'<personalizationsmartedit-show-component-info-list data-component="componentDetails"></personalizationsmartedit-show-component-info-list>'},displayClass:"infoactionbutton",displayIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-msginfo cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:510}),d.addContextualMenuButton({key:"personalizationsmartedit.context.add.action",i18nKey:"personalization.context.action.add",nameI18nKey:"personalization.context.action.add",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuAddItemEnabled(t)},callback:function(t,e){r.openAddAction(t)},displayClass:"addactionbutton",displayIconClass:"hyicon hyicon-addlg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-addlg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:520}),d.addContextualMenuButton({key:"personalizationsmartedit.context.component.edit.action",i18nKey:"personalization.context.component.action.edit",nameI18nKey:"personalization.context.component.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditComponentItemEnabled(t)},callback:function(t,e){r.openEditComponentAction(t)},displayClass:"editbutton",displayIconClass:"hyicon hyicon-edit cmsx-ctx__icon",displaySmallIconClass:"hyicon hyicon-edit cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:530}),d.addContextualMenuButton({key:"personalizationsmartedit.context.edit.action",i18nKey:"personalization.context.action.edit",nameI18nKey:"personalization.context.action.edit",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuEditItemEnabled(t)},callback:function(t,e){r.openEditAction(t)},displayClass:"replaceactionbutton",displayIconClass:"hyicon hyicon-change cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-change cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:540}),d.addContextualMenuButton({key:"personalizationsmartedit.context.delete.action",i18nKey:"personalization.context.action.delete",nameI18nKey:"personalization.context.action.delete",regexpKeys:["^.*Component$"],condition:function(t){return i.isContextualMenuDeleteItemEnabled(t)},callback:function(t,e){r.openDeleteAction(t)},displayClass:"removeactionbutton",displayIconClass:"hyicon hyicon-removelg cmsx-ctx__icon personalization-ctx__icon",displaySmallIconClass:"hyicon hyicon-removelg cmsx-ctx__icon--small",permissions:["se.edit.page"],priority:550})}]})],Personalizationsmarteditmodule)}()}]);