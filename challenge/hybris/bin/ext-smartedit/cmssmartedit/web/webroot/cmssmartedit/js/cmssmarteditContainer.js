!function(e){var t={};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=135)}([function(e,t){e.exports=smarteditcommons},function(e,t){e.exports=angular},function(e,t,n){var i={"./components/cmsComponents/cmsItemDropdown/cmsItemDropdown.js":3,"./components/cmsComponents/cmsItemDropdown/components/nestedComponent.js":4,"./components/cmsComponents/cmsItemDropdown/services/cmsItemDropdownDropdownPopulator.js":5,"./components/cmsComponents/cmsItemDropdown/services/nestedComponentManagementService.js":6,"./components/cmsComponents/componentMenu/componentMenu.js":7,"./components/cmsComponents/componentMenu/components/componentItem.js":8,"./components/cmsComponents/componentMenu/components/componentSearch.js":9,"./components/cmsComponents/componentMenu/components/componentType.js":10,"./components/cmsComponents/componentMenu/filters/nameFilter.js":11,"./components/cmsComponents/componentMenu/services/componentMenuService.js":12,"./components/cmsComponents/componentMenu/tabs/componentTypesTab.js":13,"./components/cmsComponents/componentMenu/tabs/componentsTab.js":14,"./components/cmsComponents/editorModal/componentEditor/componentEditor.js":15,"./components/cmsComponents/editorModal/editorModalService.js":16,"./components/cmsComponents/editorModal/tabs/generic/genericTab.js":17,"./components/cmsComponents/restrictionEditor/componentRestrictionsEditor.js":18,"./components/cmsComponents/restrictionEditor/pageRestrictionsEditor.js":19,"./components/dragAndDrop/cmsDragAndDropService.js":20,"./components/editorTabset/editorTabset.js":21,"./components/genericEditor/catalog/components/catalogAwareSelector/catalogAwareSelector.js":22,"./components/genericEditor/catalog/components/categorySelector/categorySelector.js":23,"./components/genericEditor/catalog/components/itemSelectorPanel/itemSelectorPanel.js":24,"./components/genericEditor/catalog/components/productSelector/productSelector.js":25,"./components/genericEditor/catalog/components/services/seCatalogInformationService.js":26,"./components/genericEditor/cmsLinkToSelect/cmsLinkToSelect.js":27,"./components/genericEditor/cmsLinkToSelect/dropdownPopulators/cmsLinkComponentContentPageDropdownPopulator.js":28,"./components/genericEditor/config/cmsGenericEditorMappingService.js":29,"./components/genericEditor/linkToggle/linkToggle.js":30,"./components/genericEditor/media/components/errorsList/seErrorsList.js":31,"./components/genericEditor/media/components/fileSelector/seFileSelector.js":32,"./components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedProperties.js":33,"./components/genericEditor/media/components/mediaContainerField/seMediaContainerField.js":34,"./components/genericEditor/media/components/mediaField/seMediaField.js":35,"./components/genericEditor/media/components/mediaFormat/seMediaFormat.js":36,"./components/genericEditor/media/components/mediaPreview/seMediaPreview.js":37,"./components/genericEditor/media/components/mediaSelector/seMediaPrinter.js":38,"./components/genericEditor/media/components/mediaSelector/seMediaSelector.js":39,"./components/genericEditor/media/components/mediaUploadForm/seMediaUploadField.js":40,"./components/genericEditor/media/components/mediaUploadForm/seMediaUploadForm.js":41,"./components/genericEditor/media/services/mediaService.js":42,"./components/genericEditor/media/services/seBackendValidationHandler.js":43,"./components/genericEditor/media/services/seFileMimeTypeService.js":44,"./components/genericEditor/media/services/seFileValidationService.js":45,"./components/genericEditor/media/services/seMediaService.js":46,"./components/genericEditor/media/services/seObjectValidatorFactory.js":47,"./components/genericEditor/navigationNode/components/breadcrumb/seBreadcrumb.js":48,"./components/genericEditor/navigationNode/components/navigationNodePicker/seNavigationNodePicker.js":49,"./components/genericEditor/navigationNode/components/navigationNodeSelector/seNavigationNodeSelector.js":50,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/categoryDropdownPopulator.js":51,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/productCatalogDropdownPopulator.js":52,"./components/genericEditor/singleActiveCatalogAwareSelector/dropdownPopulators/productDropdownPopulator.js":53,"./components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelector.js":54,"./components/itemManagement/itemManagement.js":55,"./components/navigation/navigationEditor/navigationEditorNodeService.js":56,"./components/pages/addPageWizard/components/newPageDisplayCondition/newPageDisplayConditionComponent.js":57,"./components/pages/addPageWizard/components/selectPageTemplate/selectPageTemplate.js":58,"./components/pages/addPageWizard/components/selectPageType/selectPageType.js":59,"./components/pages/addPageWizard/components/selectTargetCatalogVersion/selectTargetCatalogVersion.js":60,"./components/pages/clonePageWizard/components/clonePageInfo/componentCloneInfoFormComponent.js":61,"./components/pages/clonePageWizard/components/clonePageOptions/componentCloneOptionFormComponent.js":62,"./components/pages/deletePageMenu/deletePageToolbarItem.js":63,"./components/pages/displayConditions/displayConditionsEditor/displayConditionsEditor.js":64,"./components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfo.js":65,"./components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfoController.js":66,"./components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariations.js":67,"./components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariationsController.js":68,"./components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPage.js":69,"./components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPageController.js":70,"./components/pages/pageList/pageListController.js":71,"./components/pages/pageList/pageListLink.js":72,"./components/pages/pageList/pageListTemplatePrinter/pageListTemplatePrinter.js":73,"./components/pages/pageRestrictionsInfoMessage/pageRestrictionsInfoMessage.js":74,"./components/restrictions/restrictionManagement/flavours/restrictionManagementEdit.js":75,"./components/restrictions/restrictionManagement/flavours/restrictionManagementSelect.js":76,"./components/restrictions/restrictionManagement/restrictionManagement.js":77,"./components/restrictions/restrictionsEditor/restrictionsEditor.js":78,"./components/restrictions/restrictionsTable/restrictionsTable.js":79,"./components/synchronize/catalogs/synchronizeCatalog.js":80,"./components/synchronize/pages/pageListSyncIcon/pageListSyncIcon.js":81,"./components/synchronize/pages/pageSynchronizationHeader.js":82,"./components/synchronize/pages/pageSynchronizationPanel.js":83,"./components/synchronize/pages/syncMenu/pageSyncMenuToolbarItem.js":84,"./components/synchronize/pages/syncPageModal/syncPageModalService.js":85,"./dao/catalogVersionRestService.js":86,"./dao/createPageService.js":87,"./dao/pageRestrictionsRestService.js":88,"./dao/pageTypeService.js":89,"./dao/pageTypesRestrictionTypesRestService.js":90,"./dao/pagesFallbacksRestService.js":91,"./dao/pagesRestService.js":92,"./dao/pagesVariationsRestService.js":93,"./dao/restrictionTypesRestService.js":94,"./dao/structuresRestService.js":95,"./dao/typeStructureRestService.js":96,"./facades/displayConditionsFacade.js":97,"./facades/pageFacade.js":98,"./facades/pageRestrictionsFacade.js":99,"./services/actionableAlert/actionableAlertService.js":100,"./services/actionableAlert/clonePageAlertService.js":101,"./services/actionableAlert/componentVisibilityAlertService.js":102,"./services/clonePage/clonePageWizardService.js":103,"./services/contextAwareCatalogService.js":104,"./services/contextAwarePageStructureService.js":105,"./services/genericEditorModalService.js":106,"./services/pageDisplayConditions/displayConditionsEditorModel.js":107,"./services/pageDisplayConditions/pageDisplayConditionsService.js":108,"./services/pageRestrictions/pageRestrictionCriteriaService.js":109,"./services/pageRestrictions/pageRestrictionsService.js":110,"./services/pageRestrictions/pageTypesRestrictionTypesService.js":111,"./services/pageRestrictions/restrictionTypesService.js":112,"./services/pageTemplateService.js":113,"./services/pages/addPageWizardService.js":114,"./services/pages/pageListService.js":115,"./services/pages/pageService.js":116,"./services/pages/restrictionsStepHandlerFactory.js":117,"./services/removeComponentService.js":118,"./services/restrictions/restrictionsCriteriaService.js":119,"./services/restrictionsService.js":120,"./services/rulesAndPermissionsRegistrationService.js":121,"./services/slotRestrictionsService.js":122,"./templates.js":123};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=2},function(e,t){angular.module("cmsItemDropdownModule",["nestedComponentModule","smarteditServicesModule","nestedComponentManagementServiceModule","genericEditorModule","cmsItemDropdownDropdownPopulatorModule"]).controller("cmsItemDropdownController",["CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","ON_EDIT_NESTED_COMPONENT_EVENT","systemEventService","genericEditorStackService","nestedComponentManagementService","selectComponentTypeModalService",function(e,t,n,i,o,a,r){this.$onInit=function(){this.itemTemplateUrl="cmsItemSearchTemplate.html",this.editorStackId=this.ge.editor.editorStackId,this.field.params=this.field.params||{},this.field.editorStackId=this.editorStackId,this.field.params.catalogId=e,this.field.params.catalogVersion=t,this._recompileDom=function(){},this.componentButtonPressedEventId="CREATE_NESTED_COMPONENT_BUTTON_PRESSED_EVENT_"+this.qualifier,this.createComponentButtonUnRegFn=i.subscribe(this.componentButtonPressedEventId,this.onCreateComponentButtonPressed.bind(this)),this.editComponentClickedUnRegFn=i.subscribe(n,this.onEditComponentClicked.bind(this))},this.$onDestroy=function(){this.createComponentButtonUnRegFn(),this.editComponentClickedUnRegFn()},this.onCreateComponentButtonPressed=function(e,t){if(this.textTyped=t,o.isTopEditorInStack(this.editorStackId,this.id)&&this.field.subTypes){var n=Object.keys(this.field.subTypes);n.length>1?r.open(this.field.subTypes).then(function(e){this.createNestedComponent(e)}.bind(this)):this.createNestedComponent(n[0])}},this.onEditComponentClicked=function(e,t){o.isTopEditorInStack(this.editorStackId,this.id)&&this.qualifier===t.qualifier&&this.editComponent(t.item)},this.configureSeDropdown=function(e){if(Object.keys(this.field.subTypes).length){var t="<y-actionable-search-item data-event-id='"+this.componentButtonPressedEventId+"'></y-actionable-search-item>";e.setResultsHeaderTemplate(t)}}.bind(this),this.createNestedComponent=function(e){var t={componentId:null,componentUuid:null,componentType:e,content:{name:this.textTyped,catalogVersion:this.model.catalogVersion}};return a.openNestedComponentEditor(t,this.editorStackId,null).then(function(e){this.field.collection?(this.model[this.qualifier]||(this.model[this.qualifier]=[]),this.model[this.qualifier].push(e.uuid)):this.model[this.qualifier]=e.uuid,this._recompileDom(),this.textTyped=""}.bind(this))},this.editComponent=function(e){var t={componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode||e.itemtype,content:e};a.openNestedComponentEditor(t,this.editorStackId,null).then(function(){this._recompileDom()}.bind(this))}}]).component("cmsItemDropdown",{templateUrl:"cmsItemDropdownTemplate.html",controller:"cmsItemDropdownController",controllerAs:"cmsItemDropdownCtrl",require:{ge:"^^genericEditor"},bindings:{field:"=",qualifier:"=",model:"=",id:"="}})},function(e,t){angular.module("nestedComponentModule",["cmsSmarteditServicesModule","smarteditServicesModule"]).constant("ON_EDIT_NESTED_COMPONENT_EVENT","ON_EDIT_NESTED_COMPONENT").controller("nestedComponentController",["ON_EDIT_NESTED_COMPONENT_EVENT","assetsService","systemEventService",function(e,t,n){this.$onInit=function(){this.imageRoot=t.getAssetsRoot()},this.onComponentClick=function(){this.isSelected&&n.publishAsync(e,{qualifier:this.qualifier,item:this.item})}}]).component("nestedComponent",{controller:"nestedComponentController",templateUrl:"nestedComponentTemplate.html",bindings:{item:"<",qualifier:"<",isSelected:"<"}})},function(e,t){angular.module("cmsItemDropdownDropdownPopulatorModule",["dropdownPopulatorModule","genericEditorModule"]).factory("CMSItemDropdownDropdownPopulator",["extend","lodash","DropdownPopulatorInterface","genericEditorStackService","uriDropdownPopulator",function(e,t,n,i,o){var a=function(){n.call(this,t)};(a=e(n,a)).prototype.fetchAll=function(e){return r(e),o.fetchAll(e).then(function(t){return s(e.field.editorStackId,t)})},a.prototype.fetchPage=function(e){return r(e),o.fetchPage(e).then(function(t){return t.response=s(e.field.editorStackId,t.response),t.pagination.count=t.response.length,t})},a.prototype.getItem=function(e){return r(e),o.getItem(e)};var r=function(e){e.field.uri="/cmswebservices/v1/sites/CURRENT_CONTEXT_SITE_ID/cmsitems"},s=function(e,t){var n=i.getEditorsStack(e).filter(function(e){return e.component.uuid}).map(function(e){return e.component.uuid});return t=t.filter(function(e){return!e.uuid||-1===n.indexOf(e.uuid)})};return new a}])},function(e,t){angular.module("nestedComponentManagementServiceModule",["genericEditorModalServiceModule","yLoDashModule"]).service("nestedComponentManagementService",["genericEditorModalService","lodash",function(e,t){this.openNestedComponentEditor=function(t,i,o){var a=n(t,i);return o=o||this.defaultSaveCallback,e.open(a,null,o)};var n=function(e,n){var i=e.componentType.toLowerCase();return{componentUuid:e.componentUuid,componentType:e.componentType,title:"type."+i+".name",content:t.defaultsDeep({},e.content,{typeCode:e.componentType,itemtype:e.componentType,visible:!0}),editorStackId:n}};this.defaultSaveCallback=function(){}.bind(this)}])},function(e,t){angular.module("componentMenuModule",["smarteditServicesModule","componentTypesTabModule","componentsTabModule","cmsDragAndDropServiceModule","componentMenuServiceModule"]).controller("componentMenuController",["$q","systemEventService","componentMenuService","DRAG_AND_DROP_EVENTS","EVENTS",function(e,t,n,i,o){var a="componentTypesTab",r="componentsTab";this.$onInit=function(){this._recompileDom=function(){},this._initializeComponentMenu(),this.removePageChangeEventHandler=t.subscribe(o.PAGE_CHANGE,this._initializeComponentMenu),this.removeOpenComponentEventHandler=t.subscribe("ySEComponentMenuOpen",this._resetComponentMenu),this.removeDropdownEvent=t.subscribe(i.DRAG_STARTED,this._closeMenu),this.removeOverlapEvent=t.subscribe("OVERLAY_DISABLED",this._closeMenu)},this.$onDestroy=function(){this.removePageChangeEventHandler(),this.removeOpenComponentEventHandler(),this.removeDropdownEvent(),this.removeOverlapEvent()},this._initializeComponentMenu=function(){this.tabsList=null,this._recompileDom(),n.hasMultipleContentCatalogs().then(function(e){this.hasMultipleContentCatalogs=e;var t={id:a,title:"se.cms.compomentmenu.tabs.componenttypes",templateUrl:"componentTypesTabWrapperTemplate.html"},n={id:r,title:"se.cms.compomentmenu.tabs.customizedcomp",templateUrl:"componentsTabWrapperTemplate.html",hasMultipleContentCatalogs:e};this.tabsList=[t,n],this.tabsList.componentsTab=n,this._resetComponentMenu()}.bind(this))}.bind(this),this._resetComponentMenu=function(){this.tabsList&&(this.tabsList.map(function(e){return e.active=e.id===a,e.active}),t.publishAsync("RESET_COMPONENT_MENU_EVENT"))}.bind(this),this._closeMenu=function(){this.actionItem&&(this.actionItem.isOpen=!1)}.bind(this)}]).component("componentMenu",{templateUrl:"componentMenuTemplate.html",controller:"componentMenuController",bindings:{actionItem:"<"}})},function(e,t){angular.module("componentItemModule",["cmsSmarteditServicesModule","translationServiceModule"]).controller("componentItemController",["assetsService","$translate",function(e,t){this.$onInit=function(){this.imageRoot=e.getAssetsRoot()},this.getTemplateInfoForNonCloneableComponent=function(){return"<div class='se-ypopover--inner-content'>"+t.instant("se.cms.component.non.cloneable.tooltip",{componentName:this.componentInfo.name})+"</div>"},this.$onChanges=function(e){e.cloneOnDrop&&(this.componentDisabled=this.cloneOnDrop&&!this.componentInfo.cloneable)}}]).component("componentItem",{templateUrl:"componentItemTemplate.html",controller:"componentItemController",bindings:{componentInfo:"<",cloneOnDrop:"<"}})},function(e,t){angular.module("componentSearchModule",["smarteditServicesModule"]).controller("componentSearchController",["systemEventService",function(e){this.$onInit=function(){this._oldValue="",this._resetSearchBox(),this.removeResetEventListener=e.subscribe("RESET_COMPONENT_MENU_EVENT",this._resetSearchBox)},this.$onDestroy=function(){this.removeResetEventListener()},this.$doCheck=function(){this.searchTerm!==this._oldValue&&(this._oldValue=this.searchTerm,this.showResetButton=""!==this.searchTerm,this.onChange({searchTerm:this.searchTerm}))},this._resetSearchBox=function(){this.searchTerm=""}.bind(this)}]).component("componentSearch",{templateUrl:"componentSearchTemplate.html",controller:"componentSearchController",bindings:{onChange:"&",placeholder:"@"}})},function(e,t){angular.module("componentTypeModule",["cmsSmarteditServicesModule"]).controller("componentTypeController",["assetsService",function(e){this.$onInit=function(){this.imageRoot=e.getAssetsRoot()}}]).component("componentType",{templateUrl:"componentTypeTemplate.html",controller:"componentTypeController",bindings:{typeInfo:"<"}})},function(e,t){angular.module("nameFilterModule",[]).filter("nameFilter",function(){return function(e,t){var n=[];if(!t||t.length<3)return e;var i=(t=t.toLowerCase()).split(" ");return(e||[]).forEach(function(e){var t=!0,o=e.name.toLowerCase();i.forEach(function(e){if(-1===o.indexOf(e))return t=!1,!1}),t&&-1===n.indexOf(e)&&n.push(e)}),n}})},function(e,t){angular.module("componentMenuServiceModule",["smarteditServicesModule","cmsDragAndDropServiceModule","yLoDashModule"]).service("componentMenuService",["$timeout","storageService","catalogService","experienceService","cmsDragAndDropService","lodash",function(e,t,n,i,o,a){this.hasMultipleContentCatalogs=function(){return this.getContentCatalogs().then(function(e){return e.length>1})},this.getContentCatalogs=function(){return this._getPageContext().then(function(e){return e?n.getContentCatalogsForSite(e.siteId):[]}.bind(this))}.bind(this),this.getValidContentCatalogVersions=function(){return this._getPageContext().then(function(e){return this.getContentCatalogs().then(function(t){return t.map(function(t){return this._getActiveOrCurrentVersionForCatalog(e,t)}.bind(this))}.bind(this))}.bind(this))}.bind(this),this._getActiveOrCurrentVersionForCatalog=function(e,t){var n=t.versions.filter(function(n){return e.catalogId===t.catalogId?e.catalogVersion===n.version:n.active})[0];return{isCurrentCatalog:e.catalogVersion===n.version,catalogName:t.name,catalogId:t.catalogId,catalogVersionId:n.version,id:n.uuid}},this._getPageContext=function(){return i.getCurrentExperience().then(function(e){return e.pageContext})},this.refreshDragAndDrop=function(){e(function(){o.update()},0)},this.getInitialCatalogVersion=function(e){return t.getValueFromCookie("se_catalogmenu_catalogversion_cookie").then(function(t){var n="string"==typeof t?t:null,i=e.filter(function(e){return e.id===n}.bind(this))[0];return i||a.last(e)})},this.persistCatalogVersion=function(e){t._putValueInCookie("se_catalogmenu_catalogversion_cookie",e)}}])},function(e,t){angular.module("componentTypesTabModule",["smarteditServicesModule","componentSearchModule","componentServiceModule","componentTypeModule","nameFilterModule","componentMenuServiceModule"]).controller("componentTypesTabController",["$log","systemEventService","ComponentService","componentMenuService",function(e,t,n,i){this.$onInit=function(){this._retrieveComponentTypes()},this.onSearchTermChanged=function(e){this.searchTerm=e,i.refreshDragAndDrop()}.bind(this),this._retrieveComponentTypes=function(){n.getSupportedComponentTypesForCurrentPage().then(function(e){this.componentTypes=e,i.refreshDragAndDrop()}.bind(this)).catch(function(t){e.error("ComponentMenuController.$onInit() - error loading types. "+t)})}}]).component("componentTypesTab",{templateUrl:"componentTypesTabTemplate.html",controller:"componentTypesTabController",bindings:{}})},function(e,t){angular.module("componentsTabModule",["componentMenuServiceModule","componentServiceModule","componentItemModule"]).constant("ENABLE_CLONE_ON_DROP","enableCloneComponentOnDrop").controller("componentsTabController",["$q","componentMenuService","ComponentService","sharedDataService","ENABLE_CLONE_ON_DROP",function(e,t,n,i,o){this.$onInit=function(){this.catalogVersions=null,this.selectedCatalogVersionId=null,this.selectedCatalogVersion=null,this.catalogVersionTemplate="catalogVersionTemplate.html",i.get(o).then(function(e){this.cloneOnDrop=e||!1}.bind(this)),this.hasMultipleContentCatalogs?this.catalogVersionsFetchStrategy={fetchAll:this.fetchCatalogVersions}:this.fetchCatalogVersions().then(function(){this.onCatalogVersionChange()}.bind(this)),this.resetComponentsList=function(){},this.searchTerm=""},this.onCatalogVersionChange=function(){this.selectedCatalogVersionId&&(this.selectedCatalogVersion=this.catalogVersions.filter(function(e){return e.id===this.selectedCatalogVersionId}.bind(this))[0],t.persistCatalogVersion(this.selectedCatalogVersionId),this.resetComponentsList())}.bind(this),this.onSearchTermChanged=function(e){this.searchTerm=e}.bind(this),this.fetchCatalogVersions=function(){return t.getValidContentCatalogVersions().then(function(e){return this.catalogVersions=e,t.getInitialCatalogVersion(this.catalogVersions).then(function(t){return this.selectedCatalogVersion=t,this.selectedCatalogVersionId=this.selectedCatalogVersion?this.selectedCatalogVersion.id:void 0,e}.bind(this))}.bind(this))}.bind(this),this.loadComponentItems=function(i,o,a){if(!this.selectedCatalogVersion)return e.when({results:[]});var r={catalogId:this.selectedCatalogVersion.catalogId,catalogVersion:this.selectedCatalogVersion.catalogVersionId,mask:i,pageSize:o,page:a};return n.loadPagedComponentItemsByCatalogVersion(r).then(function(e){return t.refreshDragAndDrop(),e.results=e.response,delete e.response,e}.bind(this))}.bind(this),this.onComponentCloneOnDropChange=function(){i.set(o,this.cloneOnDrop)}}]).component("componentsTab",{templateUrl:"componentsTabTemplate.html",controller:"componentsTabController",bindings:{hasMultipleContentCatalogs:"<",isActive:"<"}})},function(e,t){angular.module("componentEditorModule",["yLoDashModule","componentServiceModule","smarteditServicesModule","functionsModule"]).constant("COMPONENT_EDITOR_TAB_CONTENT_CHANGED_EVENT","ComponentEditorTabContentChangedEvent").factory("componentEditorService",["$q","lodash","ComponentService",function(e,t,n){var i,o={},a=function(){function ComponentEditor(){this._tabs=[],this._saveTabs=[],this._componentInfo={},this._tabDirtyState={},this._fullPayload={},this._partialPayload={},this._deferreds=[],this._content={}}return ComponentEditor.prototype.registerTab=function(e,n){this._tabs.push(e),this._componentInfo=t.isEmpty(this._componentInfo)?t.cloneDeep(n):t.cloneDeep(this._componentInfo)},ComponentEditor.prototype.saveTabData=function(i,o,a){if(function _preparePartialPayload(e,n,i){var o={};i.map(function(e){return e.qualifier}).filter(function(t){return Object.keys(e).indexOf(t)>-1}).forEach(function(t){o[t]=e[t]}),this._partialPayload[n]=t.cloneDeep(o)}.call(this,i,o,a),this._saveTabs.push(o),this._saveTabs.length===Object.keys(this._tabDirtyState).length)return function _prepareFullPayload(e){t.forEach(this._partialPayload,function(e){this._fullPayload=t.merge(this._fullPayload,e)}.bind(this)),t.forEach(e,function(t,n){this._fullPayload[n]||(this._fullPayload[n]=e[n])}.bind(this))}.call(this,i),function _saveTabsData(e){return e.identifier?n.updateComponent(e):n.createNewComponent(this._componentInfo,e)}.call(this,this._fullPayload).then(function(e){var n=t.cloneDeep(this._partialPayload);return this._deferreds.forEach(function(t,i){t.resolve({payload:n[Object.keys(n)[i]],response:e})}.bind(this)),this.resetTabData(),{payload:i,response:e}}.bind(this),function(t){this._deferreds.forEach(function(e){e.reject(t)}),this._deferreds=[];var n=e.defer();return n.reject(t),this.resetTabData(),n.promise}.bind(this));var r=e.defer();return this._deferreds.push(r),r.promise},ComponentEditor.prototype.fetchTabsContent=function(e){return t.isEmpty(this._content)&&(this._content=n.loadComponentItem(e)),this._content},ComponentEditor.prototype.setTabDirtyState=function(e,t){t?this._tabDirtyState[e]=t:this._tabDirtyState[e]&&delete this._tabDirtyState[e]},ComponentEditor.prototype.resetTabData=function(){this._saveTabs=[],this._fullPayload={},this._partialPayload={},this._content={}},ComponentEditor}();return this.getInstance=function(e){return o[i=e||"DEFAULT_ID"]=o[i]||new a,o[i]},this.destroyInstance=function(){delete o[i]},{getInstance:this.getInstance,destroyInstance:this.destroyInstance}}]).controller("componentEditorController",["$q","$scope","componentEditorService","systemEventService","COMPONENT_EDITOR_TAB_CONTENT_CHANGED_EVENT","copy",function(e,t,n,i,o,a){var r,s,c;this._validateStructure=function(){if(this.tabStructure&&this.structureApi)throw"please provide only one of either structure or structure api";if(!this.tabStructure&&!this.structureApi)throw"neither a structure nor a structure api is provided. The tab cannot be loaded with an empty structure."},this.$onInit=function(){r=n.getInstance(this.componentId),this._validateStructure(),r.registerTab(this.tabId,this.componentInfo),this.componentId?r.fetchTabsContent(this.componentId).then(function(e){this.content=e,this.isReady=!0}.bind(this)):(this.content=this.content||{},this.isReady=!0)},this.getApi=function(e){s=e},t.$watch(function(){return"function"==typeof this.isDirtyTab&&this.isDirtyTab()}.bind(this),function(e){r.setTabDirtyState(this.tabId,e)}.bind(this)),this.onSubmit=function(){var t=a(this.component);return this.isDirty()?(t=this.sanitizePayload(t,this.fields),this.smarteditComponentId&&(t.identifier=this.smarteditComponentId),r.saveTabData(t,this.id,this.fields)):e.when({payload:t,response:t})},this.$doCheck=function(){s&&c!==angular.toJson(s.getContent())&&(c=angular.toJson(s.getContent()),i.publishAsync(o,{tabId:this.tabId,component:s.getContent()}))},this.$onDestroy=function(){r.resetTabData(),n.destroyInstance()}.bind(this)}]).component("componentEditor",{transclude:!1,templateUrl:"componentEditorTemplate.html",controller:"componentEditorController",controllerAs:"compCtrl",bindings:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"=",componentType:"=",tabId:"=",componentInfo:"<",tabStructure:"<?",structureApi:"<?",content:"<?"}})},function(e,t){angular.module("editorModalServiceModule",["genericEditorModalServiceModule","smarteditServicesModule","typeStructureRestServiceModule","componentServiceModule","renderServiceModule","cmsitemsRestServiceModule","yLoDashModule"]).factory("editorModalService",["$q","isBlank","genericEditorModalService","gatewayProxy","ComponentService","renderService",function(e,t,n,i,o,a){function EditorModalService(){this.gatewayId="EditorModal",i.initForService(this,["open","openAndRerenderSlot"])}function createComponentData(e,n){var i;try{i=e.smarteditComponentType.toLowerCase()}catch(e){throw"editorModalService._createComponentData - invalid component type in componentAttributes."+e}var o=null;return o=void 0===e.smarteditComponentUuid?function prepareContentForCreate(e,n,i,o,a){return(e=e||{}).position=t(e.position)?a:e.position,e.slotId=e.slotId||o,e.typeCode=e.typeCode||n,e.itemtype=e.itemtype||n,e.catalogVersion=e.catalogVersion||i,e.visible=!!t(e.visible)||e.visible,e}(e.content,e.smarteditComponentType,e.catalogVersionUuid,n.slotId,n.position):void 0,{componentUuid:e.smarteditComponentUuid,componentType:e.smarteditComponentType,title:"type."+i+".name",targetedQualifier:n.targetedQualifier,initialDirty:e.initialDirty,content:o}}return EditorModalService.prototype.openAndRerenderSlot=function(e,t,i){var r=createComponentData({smarteditComponentType:e,smarteditComponentUuid:t},{targetedQualifier:i});return n.open(r,null,function(){o.getSlotsForComponent(r.componentUuid).then(function(e){a.renderSlots(e)})})},EditorModalService.prototype.open=function(e,t,i,r){var s=createComponentData(e,{slotId:t,position:i,targetedQualifier:r});return n.open(s,null,function(){if(s.componentUuid)return o.getSlotsForComponent(s.componentUuid).then(function(e){a.renderSlots(e)})})},new EditorModalService}])},function(e,t){angular.module("genericTabModule",["genericEditorModule","resourceLocationsModule","componentEditorModule","smarteditServicesModule","cmsLinkToSelectModule"]).controller("genericTabCtrl",["TYPES_RESOURCE_URI","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","systemEventService",function(e,t,n){var i=e+"?code=:smarteditComponentType&mode=:structureApiMode";this.$onInit=function(){this.structureApi=this.getStructureApiByMode("DEFAULT"),this.changeStructureEventListener=n.subscribe(t,this.onChangeStructureEvent.bind(this))},this.onChangeStructureEvent=function(e,t){t.structureApiMode?(this.tabStructure=null,this.structureApi=this.getStructureApiByMode(t.structureApiMode)):t.structure&&(this.structureApi=null,this.tabStructure=t.structure.attributes),this.content=t.content},this.$onDestroy=function(){this.changeStructureEventListener()},this.getStructureApiByMode=function(e){return i.replace(/:structureApiMode/gi,e)}}]).component("genericTab",{transclude:!1,templateUrl:"componentEditorWrapperTemplate.html",controller:"genericTabCtrl",bindings:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"<",componentType:"<",tabId:"<",componentInfo:"<",content:"<"}})},function(e,t){angular.module("componentRestrictionsEditorModule",["restrictionTypesServiceModule","restrictionsServiceModule"]).controller("componentRestrictionsEditorController",["restrictionTypesService","restrictionsService",function(e,t){this.restrictionsResult=function(e,t){this.model.onlyOneRestrictionMustApply=e,this.model.restrictions=t}.bind(this),this.getRestrictionTypes=function(){return e.getRestrictionTypes()},this.getSupportedRestrictionTypes=function(){return t.getSupportedRestrictionTypeCodes()},this.$onInit=function(){void 0===this.model.restrictions&&(this.editor.pristine.restrictions=[],this.editor.pristine.onlyOneRestrictionMustApply=!1)},this.$onChanges=function(e){e.model&&(this.model.restrictions=e.model.currentValue.restrictions,this.model.onlyOneRestrictionMustApply=e.model.currentValue.onlyOneRestrictionMustApply)}}]).component("componentRestrictionsEditor",{templateUrl:"componentRestrictionsEditorTemplate.html",controller:"componentRestrictionsEditorController",controllerAs:"componentRestrictionsEditorCtrl",bindings:{model:"<",editor:"="}})},function(e,t){angular.module("pageRestrictionsEditorModule",["pageRestrictionsModule","restrictionTypesServiceModule","restrictionsServiceModule"]).controller("pageRestrictionsEditorController",["restrictionTypesService","pageRestrictionsFacade","restrictionsService",function(e,t,n){this.restrictionsResult=function(e,t){this.model.onlyOneRestrictionMustApply=e,this.model.restrictions=t}.bind(this),this.getRestrictionTypes=function(){return t.getRestrictionTypesByPageType(this.model.typeCode)}.bind(this),this.getSupportedRestrictionTypes=function(){return n.getSupportedRestrictionTypeCodes()},this.$onChanges=function(e){e.model&&(this.model.restrictions=e.model.currentValue.restrictions,this.model.onlyOneRestrictionMustApply=e.model.currentValue.onlyOneRestrictionMustApply)}}]).component("pageRestrictionsEditor",{templateUrl:"pageRestrictionsEditorTemplate.html",controller:"pageRestrictionsEditorController",controllerAs:"pageRestrictionsEditorCtrl",bindings:{model:"<page"}})},function(e,t){angular.module("cmsDragAndDropServiceModule",["yjqueryModule","dragAndDropServiceModule"]).constant("DRAG_AND_DROP_EVENTS",{DRAG_STARTED:"CMS_DRAG_STARTED",DRAG_STOPPED:"CMS_DRAG_STOPPED"}).constant("ENABLE_CLONE_ON_DROP","enableCloneComponentOnDrop").service("cmsDragAndDropService",["yjQuery","dragAndDropService","systemEventService","gatewayFactory","sharedDataService","ID_ATTRIBUTE","UUID_ATTRIBUTE","TYPE_ATTRIBUTE","DRAG_AND_DROP_EVENTS","ENABLE_CLONE_ON_DROP",function(e,t,n,i,o,a,r,s,c,l){this._gateway=i.createGateway("cmsDragAndDrop"),this.register=function(){t.register({id:"se.cms.dragAndDrop",sourceSelector:".smartEditComponent[data-smartedit-component-type!='ContentSlot']",targetSelector:"",startCallback:this._onStart,stopCallback:this._onStop,enableScrolling:!1})},this.unregister=function(){t.unregister(["se.cms.dragAndDrop"])},this.apply=function(){t.apply()},this.update=function(){t.update("se.cms.dragAndDrop")},this._onStart=function(e){o.get(l).then(function(t){var i=this._getSelector(e.target).closest(".smartEditComponent"),o={componentId:i.attr(a),componentUuid:i.attr(r),componentType:i.attr(s),slotUuid:null,slotId:null,cloneOnDrop:t};this._gateway.publish(c.DRAG_STARTED,o),n.publishAsync(c.DRAG_STARTED)}.bind(this))}.bind(this),this._onStop=function(){this._gateway.publish(c.DRAG_STOPPED)}.bind(this),this._getSelector=function(t){return e(t)}}])},function(e,t){!function(){function getIndexOfElementByAttr(e,t,n){for(var i=0;i<e.length;i++)if(e[i][t]===n)return i;return-1}angular.module("editorTabsetModule",["ui.bootstrap","functionsModule","experienceInterceptorModule","tabsetModule","smarteditServicesModule","cmssmarteditContainerTemplates"]).factory("editorTabsetService",function(){var e=function(){this.tabsList=[]};return e.prototype.registerTab=function(e,t,n){this._validateTab(e,t,n),this.tabsList.push({id:e,title:t,templateUrl:n,hasErrors:!1})},e.prototype._validateTabs=function(e){e.forEach(function(e){this._validateTab(e.id,e.title,e.templateUrl)}.bind(this))},e.prototype._validateTab=function(e,t,n){if(!e)throw new Error("editorTabsetService.registerTab.invalidTabID");if(!t)throw new Error("editorTabsetService.registerTab.missingTabTitle");if(!n)throw new Error("editorTabsetService.registerTab.missingTemplateUrl")},e.prototype.deleteTab=function(e){var t=getIndexOfElementByAttr(this.tabsList,"id",e);if(!(t>=0))throw new Error("editorTabsetService.deleteTab.tabNotFound");delete this.tabsList[t]},new e}).directive("editorTabset",["$q","$log","systemEventService","merge","copy",function(e,t,n,i,o){return{restrict:"E",transclude:!1,templateUrl:"editorTabsetTemplate.html",scope:{control:"=",model:"=",tabs:"="},link:function(a){var r=!1,s=function(){for(var e in a.tabsList)a.tabsList.hasOwnProperty(e)&&(a.tabsList[e].hasErrors=!1)};a.tabs.forEach(function(e){!function _validateTab(e,t,n){if(!e)throw new Error("editorTabset.invalidTabID");if(!t)throw new Error("editorTabset.missingTabTitle");if(!n)throw new Error("editorTabset.missingTemplateUrl")}(e.id,e.title,e.templateUrl)}),a.tabsList=o(a.tabs),a.numTabsDisplayed=6,a.control={saveTabs:function(){var t={errorsList:[],item:{},operationSuccessful:!0},i=e.defer();return n.publishAsync("sm-editor-save",t).then(function(){for(var e in s(),t.errorsList)if(t.errorsList.hasOwnProperty(e)){var n=t.errorsList[e],o=getIndexOfElementByAttr(a.tabsList,"id",n);o>=0&&(a.tabsList[o].hasErrors=!0)}t.operationSuccessful?i.resolve(t.item):i.reject()}),i.promise},resetTabs:function(){return n.publishAsync("sm-editor-reset").then(function(){s()})},cancelTabs:function(){return n.publishAsync("sm-editor-cancel").then(function(){s()})},isDirty:function(){return r}};var c={};n.subscribe("EDITOR_IN_ERROR_EVENT",function(t,n){var i=getIndexOfElementByAttr(a.tabsList,"id",n);return i>=0&&(a.tabsList[i].hasErrors=!0),e.when()});var l=n.subscribe("sm-editor-is-dirty",function(t,n){for(var i in c[n.tabId]=n.isDirty,c)if(c[i])return r=!0,e.when(!0);return r=!1,e.when(!0)});a.$on("$destroy",function(){l&&l()}),a.tabControl=function(o){o.$watch(function(){return"function"==typeof o.isDirty&&o.isDirty()},function(e,t){"boolean"==typeof e&&e!==t&&n.publishAsync("sm-editor-is-dirty",{tabId:o.tabId,isDirty:e})});var a=n.subscribe("sm-editor-save",function(n,a){return e.when(function(){if(o.onSave)return o.onSave().then(function(e){a.item=i(a.item,e)},function(e){return e&&(e.data&&e.data.errors?e.data.errors.forEach(function(e){var t=e.tabId||o.tabId;a.errorsList.includes(t)||a.errorsList.push(t)}):a.errorsList.push(o.tabId)),a.operationSuccessful=!1,e});t.warn("Cannot save tab",o.tabId,". Save callback not defined.")}())}),r=n.subscribe("sm-editor-reset",function(){return e.when(function(){if(o.onReset)return o.onReset().then(function(e){return e},function(e){return e});t.warn("Cannot reset tab",o.tabId,". Reset callback not defined.")}())}),s=n.subscribe("sm-editor-cancel",function(){return e.when(function(){if(o.onCancel)return o.onCancel().then(function(e){return e},function(e){return e});t.warn("Cannot cancel tab",o.tabId,". Cancel callback not defined.")}())});o.$on("$destroy",function(){a&&a(),r&&r(),s&&s()})}}}}])}()},function(e,t){angular.module("catalogAwareSelectorModule",["itemSelectorPanelModule","yEditableListModule"]).controller("CatalogAwareSelectorController",["$q","$log","$translate","lodash",function(e,t,n,i){this.model=[],this.currentOptions={},this.itemsList=[],this.$onInit=function(){void 0===this.editable&&(this.editable=!0),this.exposedModel.$viewChangeListeners.push(this._syncFromExternalModel),this.exposedModel.$render=this._syncFromExternalModel,this.catalogItemTypeKey=this.catalogItemTypeKey?this.catalogItemTypeKey:"se.cms.catalogaware.catalogitemtype.default",n(this.catalogItemTypeKey).then(function(e){this.catalogItemType=e}.bind(this))},this._syncFromExternalModel=function(){0===this.model.length&&(this.model.push.apply(this.model,this.exposedModel.$modelValue),this._syncFromModelToItemsList())}.bind(this),this._syncFromItemsListToModel=function(){this.model.length=0,this.itemsList.map(function(e){this.model.push(e.id)}.bind(this))},this._syncFromModelToItemsList=function(){var e={},n=[];this.model.map(function(t){var o=i.find(this.itemsList,function(e){return e.id===t});o?e[t]=o:n.push(t)}),this._fetchItems(n,e).then(function(){this.itemsList.length=0,this.model.map(function(n){var i=e[n];i?this.itemsList.push(i):t.warn("[seCatalogAwareSelector] - Cannot find item with key ",n)}.bind(this)),this._refreshListWidget&&i.isFunction(this._refreshListWidget)&&this._refreshListWidget()}.bind(this))},this._fetchItems=function(t,n){var i=e.when(null);if(t.length>0)if(this.itemsFetchStrategy.fetchAll)i=this.itemsFetchStrategy.fetchAll().then(function(e){t.map(function(t){n[t]=e.find(function(e){return e.id===t})}.bind(this))});else{if(!this.itemsFetchStrategy.fetchEntities){if(this.itemsFetchStrategy.fetchEntity){var o=[];return t.map(function(e){o.push(this.itemsFetchStrategy.fetchEntity(e))}.bind(this)),e.all(o).then(function(e){e.map(function(e){n[e.id]=e})})}throw Error("[seCatalogAwareSelector] Invalid items fetch strategy. Cannot retrieve information.")}i=this.itemsFetchStrategy.fetchEntities(this.model).then(function(e){e.map(function(e){n[e.id]=e})}.bind(this))}return i},this.listIsEmpty=function(){return 0===this.model.length},this.openEditingPanel=function(){this.showPanel()},this.onPanelChange=function(){this._syncFromModelToItemsList(),this.exposedModel.$setViewValue(this.model)}.bind(this),this.onListChange=function(){this._syncFromItemsListToModel(),this.exposedModel.$setViewValue(this.model)}.bind(this)}]).component("seCatalogAwareSelector",{templateUrl:"catalogAwareSelectorTemplate.html",controller:"CatalogAwareSelectorController",controllerAs:"ctrl",require:{exposedModel:"ngModel"},bindings:{id:"@",getCatalogs:"<",itemsFetchStrategy:"<",itemTemplate:"<?",catalogItemTypeKey:"@?",editable:"<?",maxNumItems:"<?"}})},function(e,t){angular.module("categorySelectorModule",["catalogAwareSelectorModule","catalogInformationServiceModule"]).constant("CATEGORY_TEMPLATE_FOR_SELECTOR","categoryTemplate.html").controller("CategorySelectorController",["$q","lodash","sharedDataService","seCatalogInformationService","CATEGORY_TEMPLATE_FOR_SELECTOR",function(e,t,n,i,o){this.$onInit=function(){this.categoryTemplate=o,this.getCatalogs=i.getProductCatalogsInformation,this.itemsFetchStrategy=i.categoriesFetchStrategy,void 0===this.editable&&(this.editable=!0)}}]).component("seCategorySelector",{templateUrl:"categorySelectorTemplate.html",controller:"CategorySelectorController",controllerAs:"ctrl",bindings:{id:"@",model:"<",qualifier:"<",editable:"<?"}})},function(e,t){angular.module("itemSelectorPanelModule",["sliderPanelModule","l10nModule","recompileDomModule"]).controller("ItemSelectorPanelController",["$q","$element","lodash",function(e,t,n){this.catalogInfo={},this.catalogItemTemplate="catalogItemTemplate.html",this.saveButtonDisabled=!0,this.$onInit=function(){this.sliderConfiguration={cssSelector:"#y-modal-dialog",greyedOutOverlay:!1,modal:{showDismissButton:!0,title:this.catalogItemType,cancel:{onClick:this._cancelItemsChanges,label:"se.cms.catalogaware.panel.button.cancel"},save:{onClick:this._saveItemChanges,label:"se.cms.catalogaware.panel.button.add",isDisabledFn:this._isSaveButtonDisabled}}},this._initCatalogs(),(void 0===this.maxNumItems||this.maxNumItems<0)&&(this.maxNumItems=0),this.showPanel=function(){this.catalogInfo={},this._initCatalogs(),this._internalItemsSelected=this.itemsSelected?n.clone(this.itemsSelected):[],this._internalShowPanel()}.bind(this)},this._initCatalogs=function(){return this.getCatalogs().then(function(e){this.catalogs=e,1===this.catalogs.length&&(this.catalogInfo.catalogId=this.catalogs[0].id),this._initCatalogSelector(),this._initCatalogVersionSelector(),this._initItemsSelector()}.bind(this))},this._initCatalogSelector=function(){if(Array.isArray(this.catalogList))throw Error("Cannot show panel - Invalid list of catalogs.");this.catalogSelectorFetchStrategy={fetchAll:function(){return e.when(this.catalogs)}.bind(this)}},this._onCatalogSelectorChange=function(){this.resetCatalogVersionSelector&&this.resetCatalogVersionSelector()}.bind(this),this._initCatalogVersionSelector=function(){this.catalogVersionSelectorFetchStrategy={fetchAll:function(){var t=[];return this.catalogInfo.catalogId&&(t=this.catalogs.find(function(e){return e.id===this.catalogInfo.catalogId}.bind(this)).versions),e.when(t)}.bind(this)}},this._onCatalogVersionSelectorChange=function(){this.catalogInfo.catalogId&&this.catalogInfo.catalogVersion&&this.resetItemsListSelector&&this.resetItemsListSelector()}.bind(this),this._initItemsSelector=function(){var e=function(e,t){var i=n.concat([this.catalogInfo],Array.from(arguments).slice(2));return e.apply(null,i).then(function(e){if(t)for(var i=e.results.length;i--;){var o=e.results[i];n.includes(this._internalItemsSelected,o.uid)&&(e.results.splice(i,1),e.pagination.count--)}return e}.bind(this))}.bind(this);this._internalItemsFetchStrategy={fetchAll:this.itemsFetchStrategy.fetchAll?e.bind(null,this.itemsFetchStrategy.fetchAll,!1):null,fetchPage:this.itemsFetchStrategy.fetchPage?e.bind(null,this.itemsFetchStrategy.fetchPage,!0):null,fetchEntity:this.itemsFetchStrategy.fetchEntity,fetchEntities:this.itemsFetchStrategy.fetchEntities}},this._onItemsSelectorChange=function(){this._isItemSelectorEnabled()&&(this.saveButtonDisabled=!1)}.bind(this),this._isSaveButtonDisabled=function(){return this.saveButtonDisabled}.bind(this),this._cancelItemsChanges=function(){this.catalogInfo={},this._internalHidePanel()}.bind(this),this._saveItemChanges=function(){this.itemsSelected.splice.apply(this.itemsSelected,[0,this.itemsSelected.length].concat(this._internalItemsSelected)),this.onChange&&this.onChange(),this._internalHidePanel()}.bind(this),this._isItemSelectorEnabled=function(){return this.catalogInfo&&this.catalogInfo.catalogId&&this.catalogInfo.catalogVersion}.bind(this)}]).component("seItemSelectorPanel",{templateUrl:"itemSelectorPanelTemplate.html",controller:"ItemSelectorPanelController",controllerAs:"ctrl",bindings:{panelTitle:"<",itemsSelected:"=",itemTemplate:"<",getCatalogs:"<",itemsFetchStrategy:"<",onChange:"=",showPanel:"=",hidePanel:"=?",catalogItemType:"<",maxNumItems:"<?"}})},function(e,t){angular.module("productSelectorModule",["catalogAwareSelectorModule","catalogInformationServiceModule"]).constant("PRODUCT_TEMPLATE_FOR_SELECTOR","productTemplate.html").constant("MAX_NUM_PRODUCTS_IN_SELECTOR",10).controller("ProductSelectorController",["$q","lodash","seCatalogInformationService","PRODUCT_TEMPLATE_FOR_SELECTOR","MAX_NUM_PRODUCTS_IN_SELECTOR",function(e,t,n,i,o){this.$onInit=function(){this.productTemplate=i,this.itemsFetchStrategy=n.productsFetchStrategy,void 0===this.editable&&(this.editable=!0)},this.getCatalogs=n.getProductCatalogsInformation,this.maxNumItems=o}]).component("seProductSelector",{templateUrl:"productSelectorTemplate.html",controller:"ProductSelectorController",controllerAs:"ctrl",bindings:{id:"@",model:"<",qualifier:"<",editable:"<?"}})},function(e,t){angular.module("catalogInformationServiceModule",["smarteditServicesModule","productCategoryServiceModule"]).service("seCatalogInformationService",["$q","lodash","catalogService","productService","productCategoryService","sharedDataService",function(e,t,n,i,o,a){this.getProductCatalogsInformation=function(){return this._getSiteUID().then(function(e){return this._cachedSiteUID===e&&this._parsedCatalogs?this._parsedCatalogs:(this._cachedSiteUID=e,n.getProductCatalogsForSite(e).then(function(e){var n={};return e.map(function(e){n[e.catalogId]={id:e.catalogId,name:e.name,versions:e.versions.map(function(e){return{id:e.version,label:e.version}})}}),this._parsedCatalogs=t.values(n),this._parsedCatalogs}.bind(this)))}.bind(this))}.bind(this),this.productsFetchStrategy={fetchPage:function(e,t,n,o){return this._getSiteUID().then(function(a){return e.siteUID=a,i.findProducts(e,{mask:t,pageSize:n,currentPage:o})}).then(function(e){return e.products.map(function(e){e.id=e.uid}.bind(this)),{pagination:e.pagination,results:e.products}}.bind(this))}.bind(this),fetchEntity:function(e){return this._getSiteUID().then(function(t){return i.getProductById(t,e)}.bind(this)).then(function(e){return e.id=e.uid,e}.bind(this))}.bind(this)},this.categoriesFetchStrategy={fetchPage:function(e,t,n,i){return this._getSiteUID().then(function(a){return e.siteUID=a,o.getCategories(e,t,n,i)}).then(function(e){return e.productCategories.map(function(e){e.id=e.uid}.bind(this)),{pagination:e.pagination,results:e.productCategories}})}.bind(this),fetchEntity:function(e){return this._getSiteUID().then(function(t){return o.getCategoryById(t,e)}).then(function(e){return e.id=e.uid,e})}.bind(this)},this._getSiteUID=function(){return a.get("experience").then(function(e){return e.siteDescriptor.uid})}}])},function(e,t){angular.module("cmsLinkToSelectModule",["smarteditServicesModule","seDropdownModule","resourceLocationsModule","cmsLinkComponentContentPageDropdownPopulatorModule"]).constant("CMS_LINK_TO_SELECT_OPTIONS",[{id:"content",structureApiMode:"CONTENT"},{id:"product",structureApiMode:"PRODUCT",hasCatalog:!0},{id:"category",structureApiMode:"CATEGORY",hasCatalog:!0},{id:"external",structureApiMode:"EXTERNAL"}]).constant("CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","cms-link-to-reload-structure").controller("CmsLinkToSelectController",["CMS_LINK_TO_SELECT_OPTIONS","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","LINKED_DROPDOWN","systemEventService",function(e,t,n,i){this.$onInit=function(){var o=function _getLinkToValue(e){if(e.url)return"external";if(e.product)return"product";if(e.contentPage)return"content";if(e.category)return"category";return null}(this.model);null!==o&&(this.model.linkTo=o),this.unregisterDropdownListener=i.subscribe(this.id+n,function _onLinkToSelectValueChanged(n,o){if(this.qualifier!==o.qualifier)return;if(!o.optionObject)return;var a=o.optionObject.id,r=e.find(function(e){return e.id===a});if(!r)throw new Error("Error selected option not supported");if(a===this.model.currentSelectedOptionValue)return;this.model.currentSelectedOptionValue=a,this.model.external="external"!==a,function _cleanModel(e){if(!this.model)return;"category"!==e.id&&delete this.model.category;"product"!==e.id&&delete this.model.product;e.hasCatalog||delete this.model.productCatalog;"content"!==e.id&&delete this.model.contentPage;"external"!==e.id&&delete this.model.url}.call(this,r),i.publishAsync(t,{content:this.model,structureApiMode:r.structureApiMode,editorId:this.id})}.bind(this))},this.$onDestroy=function(){this.unregisterDropdownListener()}}]).component("cmsLinkToSelect",{transclude:!0,replace:!1,templateUrl:"cmsLinkToSelectTemplate.html",controller:"CmsLinkToSelectController",controllerAs:"ctrl",bindings:{field:"<",id:"<",model:"<",qualifier:"<"}})},function(e,t){angular.module("cmsLinkComponentContentPageDropdownPopulatorModule",["contextAwareCatalogModule","dropdownPopulatorModule"]).factory("CMSLinkComponentcontentPageDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return(o=t(e,o)).prototype.fetchPage=function(e){return n.getContentPageSearchUri().then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getContentPageItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("cmsGenericEditorConfigurationServiceModule",["genericEditorModule","functionsModule"]).service("cmsGenericEditorConfigurationService",["editorFieldMappingService","genericEditorTabService","sanitize",function(e,t,n){var i="PAGE",o="COMPONENT";this.setDefaultEditorFieldMappings=function(){e.addFieldMapping("Media",null,null,{template:"mediaTemplate.html"}),e.addFieldMapping("MediaContainer",null,null,{template:"mediaContainerTemplate.html"}),e.addFieldMapping("NavigationNodeSelector",null,null,{template:"navigationNodeSelectorWrapperTemplate.html"}),e.addFieldMapping("MultiProductSelector",null,null,{template:"multiProductSelectorTemplate.html"}),e.addFieldMapping("MultiCategorySelector",null,null,{template:"multiCategorySelectorTemplate.html"}),e.addFieldMapping("CMSLinkToSelect",null,null,{template:"cmsLinkToSelectWrapperTemplate.html"}),e.addFieldMapping("SingleOnlineProductSelector",null,null,{template:"singleActiveCatalogAwareItemSelectorWrapperTemplate.html"}),e.addFieldMapping("SingleOnlineCategorySelector",null,null,{template:"singleActiveCatalogAwareItemSelectorWrapperTemplate.html"}),e.addFieldMapping("CMSItemDropdown",null,null,{template:"cmsItemDropdownWrapperTemplate.html"}),e.addFieldMapping("CMSComponentRestrictionsEditor",null,null,{template:"componentRestrictionsEditorWrapperTemplate.html"}),e.addFieldMapping("PageRestrictionsEditor",null,"restrictions",{template:"pageRestrictionsEditorWrapperTemplate.html"}),e.addFieldMapping("DisplayConditionEditor",null,"displayCondition",{template:"pageDisplayConditionWrapperTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("ShortString",this._isPagePredicate,"typeCode",{template:"pageTypeEditorTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("Boolean",null,"visible",{template:"booleanWrapperTemplate.html",i18nKey:"type.component.abstractcmscomponent.visible.name"}),e.addFieldMapping("LinkToggle",null,null,{template:"linkToggleWrapperTemplate.html",customSanitize:function(e,t){void 0===t&&(t=n),e.urlLink=t(e.urlLink)}}),e.addFieldMapping("RestrictionsList",null,null,{template:"restrictionsListWrapperTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("DuplicatePrimaryNonContentPageMessage",null,null,{template:"duplicatePrimaryNonContentPageWrapperTemplate.html",hidePrefixLabel:!0}),e.addFieldMapping("DuplicatePrimaryContentPage",null,null,{template:"duplicatePrimaryContentPageWrapperTemplate.html",hidePrefixLabel:!1}),e.addFieldMapping("MissingPrimaryContentPage",null,null,{template:"missingPrimaryContentPageWrapperTemplate.html",hidePrefixLabel:!1})},this.setDefaultTabsConfiguration=function(){t.configureTab("default",{priority:5}),t.configureTab("information",{priority:5}),t.configureTab("administration",{priority:4})},this.setDefaultTabFieldMappings=function(){t.addComponentTypeDefaultTabPredicate(this._defaultTabPredicate),e.addFieldTabMapping(null,this._isComponentPredicate,"visible","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"restrictions","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"onlyOneRestrictionMustApply","visibility"),e.addFieldTabMapping(null,this._isComponentPredicate,"uid","basicinfo"),e.addFieldTabMapping(null,this._isComponentPredicate,"id","basicinfo"),e.addFieldTabMapping(null,this._isComponentPredicate,"modifiedtime","basicinfo"),e.addFieldTabMapping("DateTime",this._isComponentPredicate,"creationtime","basicinfo"),e.addFieldTabMapping("DisplayConditionEditor",this._isPagePredicate,"displayCondition","displaycondition"),e.addFieldTabMapping(null,this._isPagePredicate,"restrictions","restrictions")},this._defaultTabPredicate=function(e){return e.category===i?"information":null},this._isPagePredicate=function(e,t,n){return n.category===i},this._isComponentPredicate=function(e,t,n){return n.category===o}}])},function(e,t){angular.module("linkToggleModule",[]).controller("linkToggleController",function(){this.emptyUrlLink=function(){this.model.linkToggle.urlLink=""},this.$onInit=function(){void 0===this.model.linkToggle&&(this.model.linkToggle={},this.editor.pristine.linkToggle={}),void 0===this.model.linkToggle.external&&(this.model.linkToggle.external=!0,this.editor.pristine.linkToggle.external=!0)}}).component("linkToggle",{templateUrl:"linkToggleTemplate.html",transclude:!0,controller:"linkToggleController",bindings:{field:"<",model:"<",editor:"<"}})},function(e,t){angular.module("seErrorsListModule",[]).controller("seErrorsListController",function(){this.getSubjectErrors=function(){return this.subject?this.errors.filter(function(e){return e.subject===this.subject}.bind(this)):this.errors}}).directive("seErrorsList",function(){return{templateUrl:"seErrorsListTemplate.html",restrict:"E",scope:{},controller:"seErrorsListController",controllerAs:"ctrl",bindToController:{errors:"<",subject:"<"}}})},function(e,t){angular.module("seFileSelectorModule",[]).controller("seFileSelectorController",function(){this.$onInit=function(){this.imageRoot=this.imageRoot||"",this.disabled=this.disabled||!1,this.customClass=this.customClass||""},this.buildAcceptedFileTypesList=function(){return this.acceptedFileTypes.map(function(e){return"."+e}).join(",")}}).directive("seFileSelector",function(){return{templateUrl:"seFileSelectorTemplate.html",restrict:"E",scope:{},controller:"seFileSelectorController",controllerAs:"ctrl",bindToController:{imageRoot:"<?",uploadIcon:"<",labelI18nKey:"<",acceptedFileTypes:"<",customClass:"<?",disabled:"<?",onFileSelect:"&"},link:function(e,t){t.find("input").on("change",function(n){e.$apply(function(){e.ctrl.onFileSelect({files:n.target.files});var i=t.find("input");i.replaceWith(i.clone(!0))})})}}})},function(e,t){angular.module("seMediaAdvancedPropertiesModule",["ui.bootstrap"]).constant("seMediaAdvancedPropertiesConstants",{CONTENT_URL:"seMediaAdvancedPropertiesContentTemplate.html",I18N_KEYS:{DESCRIPTION:"se.media.advanced.information.description",CODE:"se.media.advanced.information.code",ALT_TEXT:"se.media.advanced.information.alt.text",ADVANCED_INFORMATION:"se.media.advanced.information",INFORMATION:"se.media.information"}}).controller("seMediaAdvancedPropertiesController",["seMediaAdvancedPropertiesConstants",function(e){this.$onInit=function(){this.i18nKeys=e.I18N_KEYS,this.contentUrl=e.CONTENT_URL}}]).component("seMediaAdvancedProperties",{bindings:{code:"=",advInfoIcon:"=",description:"=",altText:"="},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"seMediaAdvancedPropertiesTemplate.html"}).component("seMediaAdvancedPropertiesCondensed",{bindings:{code:"<",advInfoIcon:"<",description:"<",altText:"<"},controller:"seMediaAdvancedPropertiesController",controllerAs:"ctrl",templateUrl:"seMediaAdvancedPropertiesCondensedTemplate.html"})},function(e,t){angular.module("seMediaContainerFieldModule",["seMediaUploadFormModule","seMediaFormatModule","seErrorsListModule","seFileValidationServiceModule","cmsSmarteditServicesModule"]).controller("seMediaContainerFieldController",["$log","seFileValidationService","typePermissionsRestService",function(e,t,n){this.$onInit=function(){this.image={},this.fileErrors=[],n.hasAllPermissionsForTypes(this.field.containedTypes).then(function(e){this.hasReadPermissionOnMediaRelatedTypes=this.field.containedTypes.every(function(t){return e[t].read})}.bind(this),function(t){e.warn("Failed to retrieve type permissions",t),this.hasReadPermissionOnMediaRelatedTypes=!1}.bind(this))},this.fileSelected=function(e,n){var i=this.image.format;this.resetImage(),1===e.length&&t.validate(e[0],this.fileErrors).then(function(){this.image={file:e[0],format:n||i}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(e){this.model&&this.model[this.qualifier]?this.model[this.qualifier][this.image.format]=e:(this.model[this.qualifier]={},this.model[this.qualifier][this.image.format]=e),this.resetImage()},this.imageDeleted=function(e){delete this.model[this.qualifier][e]},this.isFormatUnderEdit=function(e){return e===this.image.format}}]).directive("seMediaContainerField",function(){return{templateUrl:"seMediaContainerFieldTemplate.html",restrict:"E",controller:"seMediaContainerFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"<",model:"<",editor:"<",qualifier:"<"}}})},function(e,t){angular.module("seMediaFieldModule",["seMediaSelectorModule","seMediaUploadFormModule","seFileValidationServiceModule","seErrorsListModule","cmsSmarteditServicesModule"]).factory("seMediaFieldConstants",["assetsService",function(e){return{I18N_KEYS:{UPLOAD_IMAGE_TO_LIBRARY:"se.upload.image.to.library"},UPLOAD_ICON_URL:e.getAssetsRoot()+"/images/upload_image.png"}}]).controller("seMediaFieldController",["seMediaFieldConstants","seFileValidationServiceConstants","seFileValidationService",function(e,t,n){this.$onInit=function(){this.i18nKeys=e.I18N_KEYS,this.acceptedFileTypes=t.ACCEPTED_FILE_TYPES,this.uploadIconUrl=e.UPLOAD_ICON_URL,this.image={},this.fileErrors=[]},this.fileSelected=function(e,t){this.resetImage(),1===e.length&&n.validate(e[0],this.fileErrors).then(function(){this.image={file:e[0],format:t||this.image.format}}.bind(this))},this.resetImage=function(){this.fileErrors=[],this.image={}},this.imageUploaded=function(e){this.resetImage(),this.model[this.qualifier]=e,this.field.initiated&&(this.field.initiated.length=0)},this.showFileSelector=function(){return this.model&&!this.model[this.qualifier]&&!this.image.file}}]).directive("seMediaField",function(){return{templateUrl:"seMediaFieldTemplate.html",restrict:"E",controller:"seMediaFieldController",controllerAs:"ctrl",scope:{},bindToController:{field:"<",model:"<",editor:"<",qualifier:"<"}}})},function(e,t){angular.module("seMediaFormatModule",["mediaServiceModule","seFileSelectorModule","seFileValidationServiceModule","cmsSmarteditServicesModule"]).constant("seMediaFormatConstants",{I18N_KEYS:{UPLOAD:"se.media.format.upload",REPLACE:"se.media.format.replace",UNDER_EDIT:"se.media.format.under.edit",REMOVE:"se.media.format.remove"},UPLOAD_ICON_URL:"/images/upload_image.png",UPLOAD_ICON_DIS_URL:"/images/upload_image_disabled.png",DELETE_ICON_URL:"/images/remove_image_small.png",REPLACE_ICON_URL:"/images/replace_image_small.png",ADV_INFO_ICON_URL:"/images/info_image_small.png"}).controller("seMediaFormatController",["mediaService","seMediaFormatConstants","seFileValidationServiceConstants","assetsService","$scope",function(e,t,n,i,o){this.i18nKeys=t.I18N_KEYS,this.acceptedFileTypes=n.ACCEPTED_FILE_TYPES;var a=i.getAssetsRoot();this.uploadIconUrl=a+t.UPLOAD_ICON_URL,this.uploadIconDisabledUrl=a+t.UPLOAD_ICON_DIS_URL,this.deleteIconUrl=a+t.DELETE_ICON_URL,this.replaceIconUrl=a+t.REPLACE_ICON_URL,this.advInfoIconUrl=a+t.ADV_INFO_ICON_URL,this.fetchMedia=function(){e.getMedia(this.mediaUuid).then(function(e){this.media=e}.bind(this))},this.isMediaCodeValid=function(){return this.mediaUuid&&"string"==typeof this.mediaUuid},this.isMediaPreviewEnabled=function(){return this.isMediaCodeValid()&&!this.isUnderEdit&&this.media&&this.media.code},this.isMediaEditEnabled=function(){return!this.isMediaCodeValid()&&!this.isUnderEdit},this.getErrors=function(){return(this.field.messages||[]).filter(function(e){return e.format===this.mediaFormat}.bind(this)).map(function(e){return e.message})},this.$onInit=function(){this.isMediaCodeValid()&&this.fetchMedia(),this.mediaFormatI18NKey="se.media.format."+this.mediaFormat},o.$watch(function(){return this.mediaUuid}.bind(this),function(e,t){e&&"string"==typeof e?e!==t&&this.fetchMedia():this.media={}}.bind(this))}]).component("seMediaFormat",{templateUrl:"seMediaFormatTemplate.html",controller:"seMediaFormatController",controllerAs:"ctrl",require:{geField:"^^genericEditorField"},bindings:{mediaUuid:"<",mediaFormat:"<",isUnderEdit:"<",field:"<",onFileSelect:"&?",onDelete:"&?"}})},function(e,t){angular.module("seMediaPreviewModule",[]).constant("seMediaPreviewConstants",{CONTENT_URL:"seMediaPreviewContentTemplate.html",I18N_KEYS:{PREVIEW:"media.preview"}}).controller("seMediaPreviewController",["seMediaPreviewConstants",function(e){this.i18nKeys=e.I18N_KEYS,this.contentUrl=e.CONTENT_URL}]).directive("seMediaPreview",function(){return{restrict:"E",scope:{},bindToController:{imageUrl:"<"},controller:"seMediaPreviewController",controllerAs:"ctrl",templateUrl:"seMediaPreviewTemplate.html"}})},function(e,t){angular.module("seMediaPrinterModule",["seMediaPreviewModule"]).factory("seMediaPrinterConstants",["assetsService",function(e){var t=e.getAssetsRoot();return{DELETE_ICON_URL:t+"/images/remove_image_small.png",REPLACE_ICON_URL:t+"/images/replace_image_small.png",ADV_INFO_ICON_URL:t+"/images/info_image_small.png"}}]).controller("seMediaPrinterController",["$scope","seMediaPrinterConstants",function(e,t){this.deleteIcon=t.DELETE_ICON_URL,this.replaceIcon=t.REPLACE_ICON_URL,this.advInfoIcon=t.ADV_INFO_ICON_URL,this.$onChanges=function(){e.selected=this.selected,e.item=this.item,e.ySelect=this.ySelect}}]).component("seMediaPrinter",{templateUrl:"seMediaPrinterTemplate.html",controller:"seMediaPrinterController",controllerAs:"printer",require:{ySelect:"^ySelect"},bindings:{selected:"<",item:"<"}})},function(e,t){angular.module("seMediaSelectorModule",["seMediaAdvancedPropertiesModule","seMediaPrinterModule","mediaServiceModule"]).controller("seMediaSelectorController",["mediaService",function(e){this.mediaTemplate="seMediaPrinterWrapperTemplate.html",this.fetchStrategy={fetchEntity:function(t){return e.getMedia(t)},fetchPage:function(t,n,i){return e.getPage(t,n,i)}}}]).component("seMediaSelector",{templateUrl:"seMediaSelectorTemplate.html",require:{geField:"^^genericEditorField"},bindings:{field:"<",model:"<",editor:"<",qualifier:"<",deleteIcon:"<",replaceIcon:"<",advInfoIcon:"<"},controller:"seMediaSelectorController",controllerAs:"ctrl"})},function(e,t){angular.module("seMediaUploadFieldModule",["cmsSmarteditServicesModule"]).controller("seMediaUploadFieldController",["assetsService",function(e){this.displayImage=!1,this.assetsRoot=e.getAssetsRoot()}]).directive("seMediaUploadField",function(){return{templateUrl:"seMediaUploadFieldTemplate.html",restrict:"E",scope:{},bindToController:{field:"<",model:"<",error:"<"},controller:"seMediaUploadFieldController",controllerAs:"ctrl",link:function(e,t,n,i){t.bind("mouseover",function(){i.displayImage=!0,e.$digest()}),t.bind("mouseout",function(){i.displayImage=!1,e.$digest()})}}})},function(e,t){angular.module("seMediaUploadFormModule",["seFileValidationServiceModule","seMediaServiceModule","seObjectValidatorFactoryModule","seBackendValidationHandlerModule","seMediaUploadFieldModule","functionsModule","cmsSmarteditServicesModule"]).constant("seMediaUploadFormConstants",{MAX_FILENAME_CHARACTERS_DISPLAYED:15,I18N_KEYS:{UPLOAD_IMAGE_CANCEL:"se.upload.image.cancel",UPLOAD_IMAGE_SUBMIT:"se.upload.image.submit",UPLOAD_IMAGE_REPLACE:"se.upload.image.replace",UPLOAD_IMAGE_TO_LIBRARY:"se.upload.image.to.library",DESCRIPTION:"se.uploaded.image.description",CODE:"se.uploaded.image.code",ALT_TEXT:"se.uploaded.image.alt.text",UPLOADING:"se.uploaded.is.uploading",CODE_IS_REQUIRED:"se.uploaded.image.code.is.required"}}).factory("seMediaUploadFormValidators",["seMediaUploadFormConstants",function(e){return[{subject:"code",message:e.I18N_KEYS.CODE_IS_REQUIRED,validate:function(e){return!!e}}]}]).controller("seMediaUploadFormController",["seFileValidationServiceConstants","seMediaService","seMediaUploadFormConstants","seObjectValidatorFactory","seMediaUploadFormValidators","seBackendValidationHandler","escapeHtml","assetsService","$scope",function(e,t,n,i,o,a,r,s,c){this.i18nKeys=n.I18N_KEYS,this.acceptedFileTypes=e.ACCEPTED_FILE_TYPES,this.imageParameters={},this.isUploading=!1,this.fieldErrors=[],this.assetsRoot=s.getAssetsRoot(),c.$watch(function(){return this.image}.bind(this),function(){this.image&&this.image.file&&(this.imageParameters={code:this.image.file.name,description:this.image.file.name,altText:this.image.file.name})}.bind(this)),this.onCancel=function(){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onCancelCallback()},this.onImageUploadSuccess=function(e){this.imageParameters={},this.fieldErrors=[],this.isUploading=!1,this.onUploadCallback({uuid:e.uuid})},this.onImageUploadFail=function(e){this.isUploading=!1,a.handleResponse(e,this.fieldErrors)},this.onMediaUploadSubmit=function(){this.fieldErrors=[],i.build(o).validate(this.imageParameters,this.fieldErrors)&&(this.isUploading=!0,t.uploadMedia({file:this.image.file,code:r(this.imageParameters.code),description:r(this.imageParameters.description),altText:r(this.imageParameters.altText)}).then(this.onImageUploadSuccess.bind(this),this.onImageUploadFail.bind(this)))},this.getErrorsForField=function(e){return this.fieldErrors.filter(function(t){return t.subject===e}).map(function(e){return e.message})},this.hasError=function(e){return this.fieldErrors.some(function(t){return t.subject===e})},this.getTruncatedName=function(){var e=this.image&&this.image.file&&this.image.file.name||"";return e.length>n.MAX_FILENAME_CHARACTERS_DISPLAYED&&(e=e.substring(0,n.MAX_FILENAME_CHARACTERS_DISPLAYED),e+="..."),e}}]).directive("seMediaUploadForm",function(){return{templateUrl:"seMediaUploadFormTemplate.html",restrict:"E",scope:{},controller:"seMediaUploadFormController",controllerAs:"ctrl",bindToController:{field:"<",image:"<",onUploadCallback:"&",onCancelCallback:"&",onSelectCallback:"&"}}})},function(e,t){angular.module("mediaServiceModule",["resourceModule","resourceLocationsModule","functionsModule"]).service("mediaService",["restServiceFactory","MEDIA_PATH","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","isBlank",function(e,t,n,i,o){this.uriParameters={},this.getPage=function(a,r,s,c){this.uriParameters=c||{};var l={catalogId:this.uriParameters[n]||n,catalogVersion:this.uriParameters[i]||i};o(a)||(l.code=a);var d={namedQuery:"namedQueryMediaSearchByCodeCatalogVersion",params:Object.keys(l).reduce(function(e,t){return e+=","+t+":"+l[t]},"").substring(1),pageSize:r,currentPage:s};return e.get(t).get(d).then(function(e){return e.results=e.media.map(function(e){return{id:e.uuid,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}}),delete e.media,e})},this.getMedia=function(n,i){return this.uriParameters=i,e.get(t+"/"+n).get().then(function(e){return{id:e.uuid,code:e.code,description:e.description,altText:e.altText,url:e.url,downloadUrl:e.downloadUrl}})}}])},function(e,t){angular.module("seBackendValidationHandlerModule",[]).factory("seBackendValidationHandler",function(){return{handleResponse:function(e,t){return t=t||[],e&&e.data&&e.data.errors&&e.data.errors.filter(function(e){return"ValidationError"===e.type}).forEach(function(e){var n=e.subject;n&&t.push({subject:n,message:e.message})}),t}}})},function(e,t){angular.module("seFileMimeTypeServiceModule",[]).constant("seFileMimeTypeServiceConstants",{VALID_IMAGE_MIME_TYPE_CODES:["FFD8FFDB","FFD8FFE0","FFD8FFE1","474946383761","424D","49492A00","4D4D002A","89504E470D0A1A0A"]}).factory("seFileReader",function(){return{read:function(e,t){var n=new FileReader;return t=t||{},n.onloadend=t.onLoadEnd,n.onerror=t.onError,n.readAsArrayBuffer(e),n}}}).factory("seFileMimeTypeService",["seFileMimeTypeServiceConstants","seFileReader","$q",function(e,t,n){return{isFileMimeTypeValid:function(i){var o=n.defer();return t.read(i,{onLoadEnd:function(t){!function(t){var n=new Uint8Array(t).subarray(0,8).reduce(function(e,t){var n=t.toString(16);return 1===n.length&&(n="0"+n),e+=n},"");return e.VALID_IMAGE_MIME_TYPE_CODES.some(function(e){return 0===n.toLowerCase().indexOf(e.toLowerCase())})}(t.target.result)?o.reject():o.resolve()},onError:function(){o.reject()}}),o.promise}}}])},function(e,t){angular.module("seFileValidationServiceModule",["seObjectValidatorFactoryModule","seFileMimeTypeServiceModule"]).constant("seFileValidationServiceConstants",{ACCEPTED_FILE_TYPES:["jpeg","jpg","gif","bmp","tiff","tif","png"],MAX_FILE_SIZE_IN_BYTES:20971520,I18N_KEYS:{FILE_TYPE_INVALID:"se.upload.file.type.invalid",FILE_SIZE_INVALID:"se.upload.file.size.invalid"}}).factory("seFileObjectValidators",["seFileValidationServiceConstants",function(e){return[{subject:"size",message:e.I18N_KEYS.FILE_SIZE_INVALID,validate:function(t){return t<=e.MAX_FILE_SIZE_IN_BYTES}}]}]).factory("seFileValidationService",["seObjectValidatorFactory","seFileObjectValidators","seFileValidationServiceConstants","seFileMimeTypeService","$q",function(e,t,n,i,o){return{buildAcceptedFileTypesList:function(){return n.ACCEPTED_FILE_TYPES.map(function(e){return"."+e}).join(",")},validate:function(a,r){return e.build(t).validate(a,r),i.isFileMimeTypeValid(a).then(function(){return 0===r.length?o.when():o.reject(r)},function(){return r.push({subject:"type",message:n.I18N_KEYS.FILE_TYPE_INVALID}),o.reject(r)})}}}])},function(e,t){angular.module("seMediaServiceModule",["resourceLocationsModule","ngResource"]).factory("seMediaResource",["$resource","MEDIA_RESOURCE_URI",function(e,t){return e(t,{},{get:{method:"GET",cache:!0,headers:{}},save:{method:"POST",headers:{"Content-Type":void 0,enctype:"multipart/form-data","x-requested-with":"Angular"},transformRequest:function(e){var t=new FormData;return angular.forEach(e,function(e,n){t.append(n,e)}),t}}})}]).factory("seMediaResourceService",["$resource","MEDIA_RESOURCE_URI",function(e,t){return{getMediaByCode:function(n){return e(t+"/"+n,{},{get:{method:"GET",cache:!0,headers:{}}})}}}]).factory("seMediaService",["seMediaResource","seMediaResourceService",function(e,t){return{uploadMedia:function(t){return e.save(t).$promise},getMediaByCode:function(e){return t.getMediaByCode(e).get().$promise}}}])},function(e,t){angular.module("seObjectValidatorFactoryModule",[]).factory("seObjectValidatorFactory",function(){return{build:function(e){return{validate:function _validate(e,t,n){return n=n||[],e.forEach(function(e){var i=t[e.subject];e.validate(i,t)||n.push({subject:e.subject,message:e.message})}),0===n.length}.bind(null,e)}}}})},function(e,t){angular.module("seBreadcrumbModule",["resourceLocationsModule","navigationEditorNodeServiceModule","resourceModule","functionsModule","cmsSmarteditServicesModule","cmsitemsRestServiceModule"]).controller("BreadcrumbController",["$q","navigationEditorNodeService","assetsService","cmsitemsRestService",function(e,t,n,i){this.$onInit=function(){if(!this.nodeUid&&!this.nodeUuid)throw new Error("seBreadcrumb component requires either nodeUid or nodeUuid");(this.nodeUid?e.when({uid:this.nodeUid}):i.getById(this.nodeUuid)).then(function(e){t.getNavigationNodeAncestry(e.uid,this.uriContext).then(function(e){this.breadcrumb=e}.bind(this))}.bind(this))},this.arrowIconUrl=n.getAssetsRoot()+"/images/arrow_right_inactive.png"}]).component("seBreadcrumb",{templateUrl:"seBreadcrumbTemplate.html",bindings:{nodeUid:"<?",nodeUuid:"<?",uriContext:"<"},controller:"BreadcrumbController",controllerAs:"bc"})},function(e,t){angular.module("seNavigationNodePickerModule",["functionsModule","resourceLocationsModule","cmsitemsRestServiceModule","smarteditServicesModule"]).constant("SELECTED_NODE","selected_node").controller("NavigationNodePickerController",["URIBuilder","NAVIGATION_MANAGEMENT_RESOURCE_URI","NAVIGATION_NODE_ROOT_NODE_UID","SELECTED_NODE","cmsitemsRestService","systemEventService",function(e,t,n,i,o,a){this.$onInit=function(){this.nodeURI=new e(t).replaceParams(this.uriContext).build(),this.removeDefaultTemplate=!0,void 0===this.editable&&(this.editable=!0)},this.nodeTemplateUrl="navigationNodePickerRenderTemplate.html",this.rootNodeUid=n,this.actions={pick:function(e,t){var n={pageSize:10,currentPage:0,mask:t.$modelValue.uid};o.get(n).then(function(e){var n={nodeUuid:e.response.find(function(e){return e.uid===t.$modelValue.uid}).uuid,nodeUid:t.$modelValue.uid};a.publishAsync(i,n)}.bind(this))}.bind(this),isEditable:function(){return!0===this.editable}.bind(this)}}]).component("seNavigationPicker",{templateUrl:"seNavigationNodePickerTemplate.html",bindings:{uriContext:"<",model:"=",qualifier:"=",editable:"<?"},controller:"NavigationNodePickerController",controllerAs:"ctrl"})},function(e,t){angular.module("seNavigationNodeSelector",["seBreadcrumbModule","seNavigationNodePickerModule","resourceLocationsModule","cmsitemsRestServiceModule"]).controller("NavigationNodeSelectorController",["SELECTED_NODE","catalogService","cmsitemsRestService","systemEventService",function(e,t,n,i){this.isReady=function(){return this.ready},this.remove=function(){delete this.model[this.qualifier]}.bind(this),this.$onInit=function(){this.ready=!1,t.retrieveUriContext().then(function(e){this.uriContext=e,this.model[this.qualifier]?n.getById(this.model[this.qualifier]).then(function(e){this.nodeUid=e.uid,this.ready=!0}.bind(this)):this.ready=!0}.bind(this)),this.unregFn=i.subscribe(e,function(e,t){this.nodeUid=t.nodeUid,this.model[this.qualifier]=t.nodeUuid}.bind(this))},this.$onDestroy=function(){this.unregFn()}}]).component("seNavigationNodeSelector",{templateUrl:"seNavigationNodeSelectorTemplate.html",controller:"NavigationNodeSelectorController",controllerAs:"nav",bindings:{field:"<",model:"<",qualifier:"<"}})},function(e,t){angular.module("categoryDropdownPopulatorModule",["contextAwareCatalogModule","dropdownPopulatorModule","functionsModule"]).factory("categoryDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return(o=t(e,o)).prototype.fetchPage=function(e){return n.getProductCategorySearchUri(e.model.productCatalog).then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getProductCategoryItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("productCatalogDropdownPopulatorModule",["dropdownPopulatorModule","resourceLocationsModule","functionsModule"]).factory("productCatalogDropdownPopulator",["DropdownPopulatorInterface","optionsDropdownPopulator","CONTEXT_SITE_ID","catalogService","extend",function(e,t,n,i,o){var a=function(){};return(a=o(e,a)).prototype.fetchAll=function(e){return i.getProductCatalogsForSite(n).then(function(n){return e.field.options=n.filter(function(e){return 1===e.versions.filter(function(e){return!0===e.active}).length}),t.populate(e)}.bind(this))},a.prototype.isPaged=function(){return!1},new a}])},function(e,t){angular.module("productDropdownPopulatorModule",["contextAwareCatalogModule","functionsModule"]).factory("productDropdownPopulator",["DropdownPopulatorInterface","extend","contextAwareCatalogService","uriDropdownPopulator",function(e,t,n,i){var o=function(){};return(o=t(e,o)).prototype.fetchPage=function(e){return n.getProductSearchUri(e.model.productCatalog).then(function(t){return e.field.uri=t,i.fetchPage(e)}.bind(this))},o.prototype.isPaged=function(){return!0},o.prototype.getItem=function(e){return n.getProductItemUri().then(function(t){return e.field.uri=t,i.getItem(e)}.bind(this))},new o}])},function(e,t){angular.module("singleActiveCatalogAwareItemSelectorModule",["resourceLocationsModule","yLoDashModule"]).constant("SINGLE_CATALOG_AWARE_ITEM_MAPPING",{SingleOnlineProductSelector:"product",SingleOnlineCategorySelector:"category"}).controller("SingleActiveCatalogAwareItemSelectorController",["catalogService","CONTEXT_SITE_ID","SINGLE_CATALOG_AWARE_ITEM_MAPPING",function(e,t,n){this.$onInit=function(){i.call(this),o.call(this)};var i=function(){this.propertyType=a(this.field),this.propertyType&&(this.productCatalogField={idAttribute:"catalogId",labelAttributes:["name"],editable:!0,propertyType:"productCatalog"},this.mainDropDownI18nKey=this.field.i18nKey,delete this.field.i18nKey,this.field.paged=!0,this.field.editable=!0,this.field.idAttribute="uid",this.field.labelAttributes=["name"],this.field.dependsOn="productCatalog",this.field.propertyType=this.propertyType)},o=function(){e.getProductCatalogsForSite(t).then(function(e){this.catalogs=e,1===this.catalogs.length&&(this.model.productCatalog=this.catalogs[0].catalogId,this.editor.pristine.productCatalog=this.catalogs[0].catalogId,this.catalogName=this.catalogs[0].name)}.bind(this))},a=function(e){return n[e.cmsStructureType]}}]).component("singleActiveCatalogAwareItemSelector",{templateUrl:"singleActiveCatalogAwareItemSelectorTemplate.html",controller:"SingleActiveCatalogAwareItemSelectorController",bindings:{field:"<",id:"<",model:"<",qualifier:"<",editor:"="}})},function(e,t){angular.module("itemManagementModule",["functionsModule"]).constant("ITEM_MANAGEMENT_EDITOR_ID","se-item-management-editor").controller("ItemManagementController",["$q","ITEM_MANAGEMENT_EDITOR_ID",function(e,t){var n=["add","edit","create"];this.editorId=t,this._submitInternal=function(){switch(this.mode.toLowerCase()){case"add":return e.when(this.item);case"edit":return this.submit();case"create":return this.submit().then(function(e){return e}.bind(this));default:throw"ItemManagementController - The given mode ["+this.mode+"] has not been implemented for this component"}}.bind(this),this._isDirtyLocal=function _isDirtyLocal(){return!!this.isDirtyInternal&&this.isDirtyInternal()}.bind(this),this.isDirty=function isDirty(){},this.submit=function submit(){},this.reset=function reset(){},this.$onInit=function $onInit(){if(-1===n.indexOf(this.mode))throw"ItemManagementController.$onInit() - Mode not supported: "+this.mode;this.submitFunction=this._submitInternal,this.isDirty=this._isDirtyLocal,!this.componentType&&this.item&&(this.componentType=this.item.typeCode),this.item||(this.itemId=null),this.item&&this.item.uuid?this.itemId=this.item.uuid:this.item&&this.item.uid&&(this.itemId=this.item.uid)}}]).component("itemManager",{controller:"ItemManagementController",templateUrl:"itemManagementTemplate.html",bindings:{item:"<",uriContext:"<",mode:"<",contentApi:"<",structureApi:"<",componentType:"<?",isDirty:"=",submitFunction:"="}})},function(e,t){angular.module("navigationEditorNodeServiceModule",["resourceModule","yLoDashModule","functionsModule","cmsitemsRestServiceModule"]).service("_nodeAncestryService",["lodash",function(e){this._fetchAncestors=function(e,t){var n=e.find(function(e){return e.uid===t});return n?[n].concat(this._fetchAncestors(e,n.parentUid)):[]},this.buildOrderedListOfAncestors=function(t,n){var i=-1;return e.reverse(this._fetchAncestors(t,n)).map(function(t){var n=++i;return e.assign(e.cloneDeep(t),{level:n,formattedLevel:0===n?"se.cms.navigationcomponent.management.node.level.root":"se.cms.navigationcomponent.management.node.level.non.root"})})}}]).service("navigationEditorNodeService",["$log","_nodeAncestryService","navigationNodeRestService","lodash","getDataFromResponse","cmsitemsRestService",function(e,t,n,i,o,a){this.getNavigationNode=function(e,t){var i=angular.extend({identifier:e},t);return n.get(i)},this.updateNavigationNodePosition=function(e){return a.getById(e.parent.uuid).then(function(t){t.children=t.children||[];var n=t.children.findIndex(function(t){return t===e.uuid}),i=e.position;if(n<0||void 0===e.position)throw new Error("navigationEditorNodeService.updateNavigationNodePosition() - invalid index: move FROM ["+n+"] TO ["+i+"]");return t.children.splice(i,0,t.children.splice(n,1)[0]),t.identifier=t.uuid,a.update(t)})},this.getNavigationNodeAncestry=function(e,a){var r=i.assign({ancestorTrailFrom:e},a);return n.get(r).then(function(n){return t.buildOrderedListOfAncestors(o(n),e)})}}])},function(e,t){angular.module("newPageDisplayConditionModule",["pageServiceModule","pageDisplayConditionsServiceModule"]).controller("newPageDisplayConditionController",["$scope","$log","$filter","homepageService","pageService","catalogService","pageDisplayConditionsService","$translate","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","lodash","urlService",function(e,t,n,i,o,a,r,s,c,l,d,p,u){var g={},m="PENDING",h="NO_HOMEPAGE",f="LOCAL",v="PARENT";this.homepageDetails={status:m},this.$onInit=function(){this.showReplaceLabel=!1,this.previousPageTypeCode=null,this.previousTargetCatalogVersion=null,this.homepage=!1,this.conditions=null,this.conditionSelected=null,this.primarySelected=null,this.ready=!1,this.resultFn=this.resultFn||function(){},this.initialConditionSelected=this.initialConditionSelected||"page.displaycondition.primary",this.showPrimarySelector=function(){return!(this.conditionSelected&&!0===this.conditionSelected.isPrimary)},this.dataChanged=function(){this._isPrimaryContentPage()||(this.homepage=void 0),this._updateHomepageUiProperties(),this.resultFn(this._getResults())}},this.$onChanges=function $onChanges(e){if(e.pageTypeCode&&this.pageTypeCode!==this.previousPageTypeCode||e.targetCatalogVersion&&this.targetCatalogVersion!==this.previousTargetCatalogVersion){this.previousPageTypeCode=this.pageTypeCode,this.previousTargetCatalogVersion=this.targetCatalogVersion,!this.targetCatalogVersion||this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)?this._getPrimaryPages():this._getOnlyPrimaryDisplayCondition();var t=void 0===this.targetCatalogVersion?this.uriContext:u.buildUriContext(this.targetCatalogVersion.siteId,this.targetCatalogVersion.catalogId,this.targetCatalogVersion.version);i.getHomepageDetailsForContext(t).then(function(e){this.homepageDetails=e,this._updateHomepageUiProperties()}.bind(this))}else this._updateHomepageUiProperties()},this.homePageChanged=function(){this.dataChanged()},this.showHomePageWidget=function(){return this._isPrimaryContentPage()},this._isPrimaryContentPage=function(){return this.conditionSelected&&!0===this.conditionSelected.isPrimary&&"ContentPage"===this.pageTypeCode},this._updateHomepageUiProperties=function(){if(!0===this.homepage)switch(this.homepageDetails.status){case h:i.sendEventHideReplaceParentHomePageInfo(),this.showReplaceLabel=!1;break;case v:i.sendEventShowReplaceParentHomePageInfo({description:s.instant("se.cms.display.conditions.homepage.replace.parent.info.header",{parentCatalogName:n("l10n")(this.homepageDetails.parentCatalogName),parentCatalogVersion:this.homepageDetails.parentCatalogVersion,targetCatalogName:n("l10n")(this.homepageDetails.targetCatalogName),targetCatalogVersion:this.homepageDetails.targetCatalogVersion})}),this.showReplaceLabel=!1;break;case f:i.sendEventHideReplaceParentHomePageInfo(),this.currentHomePageName=this.homepageDetails.currentHomepageName,this.showReplaceLabel=!0}else i.sendEventHideReplaceParentHomePageInfo(),this.showReplaceLabel=!1},this._getResults=function _getResults(){var e={homepage:this.homepage,isPrimary:this.conditionSelected&&this.conditionSelected.isPrimary};return this.conditionSelected&&!this.conditionSelected.isPrimary&&(e.primaryPage=this.primarySelected),e},this._getPrimaryPages=function _getPrimaryPages(){this.pageTypeCode?g[this.pageTypeCode]?(this.primaryPageChoices=g[this.pageTypeCode],this._getAllPrimaryDisplayCondition()):o.getPrimaryPagesForPageType(this.pageTypeCode,this.uriContext).then(function(e){this.primaryPageChoices=e,g[this.pageTypeCode]=e}.bind(this),function(e){t.error(e),this.primaryPageChoices=[]}.bind(this)).finally(function(){this._getAllPrimaryDisplayCondition()}.bind(this)):this._getAllPrimaryDisplayCondition()},this._getAllPrimaryDisplayCondition=function(){r.getNewPageConditions(this.pageTypeCode,this.uriContext).then(function(e){this.conditions=e,this.conditionSelected=this.conditions[0],this.conditions.length>1&&(this.conditionSelected=p.find(this.conditions,function(e){return e.label===this.initialConditionSelected}.bind(this))),this.primaryPageChoices&&this.primaryPageChoices.length>0&&(this.initialPrimaryPageSelected?this.primarySelected=this.primaryPageChoices.find(function(e){return e.label===this.initialPrimaryPageSelected}.bind(this)):this.primarySelected=this.primaryPageChoices[0]),this.ready=!0}.bind(this)).finally(function(){this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)?this._getOnlyPrimaryDisplayCondition():this.dataChanged()}.bind(this))},this._getOnlyPrimaryDisplayCondition=function(){this.conditions=[{description:"page.displaycondition.primary.description",isPrimary:!0,label:"page.displaycondition.primary"}],this.conditionSelected=this.conditions[0],this.primarySelected=!0,this.ready=!0,this.dataChanged()},this._isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION}}]).component("newPageDisplayCondition",{controller:"newPageDisplayConditionController",templateUrl:"newPageDisplayConditionTemplate.html",bindings:{pageTypeCode:"<",uriContext:"<",resultFn:"<?",initialPrimaryPageSelected:"<?",initialConditionSelected:"<?",targetCatalogVersion:"<?"}})},function(e,t){angular.module("selectPageTemplateModule",["pageTemplateServiceModule","l10nModule"]).component("selectPageTemplate",{controller:"selectPageTemplateController",templateUrl:"selectPageTemplateTemplate.html",bindings:{uriContext:"<",pageTypeCode:"<",onTemplateSelected:"<"}}).controller("selectPageTemplateController",["pageTemplateService","$rootScope",function(e){var t=this,n={};this.templateSelected=function templateSelected(e){this.selectedTemplate=e,this.onTemplateSelected(e)},this.isSelected=function isSelected(e){return e===this.selectedTemplate},this.clearSearch=function clearSearch(){this.searchString=""},this.$onChanges=function onChanges(e){e.pageTypeCode.currentValue&&this._onInputUpdated()},this._onInputUpdated=function _onInputUpdated(){this.clearSearch(),this.selectedTemplate=null,n[t.pageTypeCode]?t.pageTemplates=n[t.pageTypeCode]:(t.pageTemplates=[],e.getPageTemplatesForType(t.uriContext,t.pageTypeCode).then(function(e){n[t.pageTypeCode]=e.templates,t.pageTemplates=n[t.pageTypeCode]}))}}]).filter("templateNameFilter",function(){return function(e,t){var n=[];if(!t)return e;var i=(t=t.toLowerCase()).split(" ");return(e||[]).forEach(function(e){var t=!0,o=e.name.toLowerCase();i.forEach(function(e){if(-1===o.indexOf(e))return t=!1,!1}),t&&-1===n.indexOf(e)&&n.push(e)}),n}})},function(e,t){angular.module("selectPageTypeModule",["pageTypeServiceModule","l10nModule","cmsSmarteditServicesModule"]).component("selectPageType",{controller:"selectPageTypeController",templateUrl:"selectPageTypeTemplate.html",bindings:{onTypeSelected:"="}}).controller("selectPageTypeController",["pageTypeService","typePermissionsRestService",function(e,t){this.pageTypes=[],this.selectedType=null,this.selectType=function typeSelected(e){this.selectedType=e,this.onTypeSelected(e)},this.isSelected=function isSelected(e){return e===this.selectedType},this.$onInit=function $onInit(){e.getPageTypes().then(function(e){var n=e.map(function(e){return e.code});t.hasCreatePermissionForTypes(n).then(function(t){this.pageTypes=e.filter(function(e){return t[e.code]})}.bind(this))}.bind(this))}}])},function(e,t){angular.module("selectTargetCatalogVersionModule",["yLoDashModule","pageFacadeModule","catalogVersionRestServiceModule","pageServiceModule","resourceLocationsModule","seConstantsModule"]).component("selectTargetCatalogVersion",{controller:"selectTargetCatalogVersionController",templateUrl:"selectTargetCatalogVersionTemplate.html",bindings:{uriContext:"<",pageTypeCode:"<",pageLabel:"<",basePageInfo:"<",onTargetCatalogVersionSelected:"&"}}).controller("selectTargetCatalogVersionController",["$q","lodash","pageFacade","catalogVersionRestService","catalogService","pageService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","VALIDATION_MESSAGE_TYPES",function(e,t,n,i,o,a,r,s,c,l){this.catalogVersions=[],this.selectedCatalogVersion=null,this.catalogVersionContainsPageWithSameLabel=!1,this.catalogVersionContainsPageWithSameTypeCode=!1,this.catalogVersionSelectorFetchStrategy={fetchAll:function(){return e.when(t.forEach(this.catalogVersions,function(e){e.id=e.uuid,e.label=e.name}))}.bind(this)},this.setYSelectAPI=function(e){this.ySelectAPI=e}.bind(this),this.onSelectionChanged=function(){this.selectedCatalogVersion&&o.getCatalogVersionByUuid(this.selectedCatalogVersion).then(function(e){if(this.onTargetCatalogVersionSelected({$catalogVersion:e}),"ContentPage"===this.pageTypeCode)return n.contentPageWithLabelExists(this.pageLabel,e.catalogId,e.version);var t={};return t[r]=e.siteId,t[s]=e.catalogId,t[c]=e.version,a.getPrimaryPagesForPageType(this.pageTypeCode,t)}.bind(this)).then(function(e){"ContentPage"===this.pageTypeCode?this.catalogVersionContainsPageWithSameLabel=e:this.catalogVersionContainsPageWithSameTypeCode=!t.isEmpty(e),this.updateYSelectValidationState()}.bind(this))}.bind(this),this.updateYSelectValidationState=function(){this.ySelectAPI&&(this.catalogVersionContainsPageWithSameLabel||this.catalogVersionContainsPageWithSameTypeCode?this.ySelectAPI.setValidationState(l.WARNING):this.ySelectAPI.resetValidationState())},this.pageAlreadyExists=function(){return this.catalogVersionContainsPageWithSameTypeCode&&!this.catalogVersionContainsPageWithSameLabel}.bind(this),this.$onInit=function(){i.getCloneableTargets(this.uriContext).then(function(e){this.catalogVersions=e.versions,t.isEmpty(this.catalogVersions)||o.getCatalogVersionUUid(this.uriContext).then(function(e){var n=t.find(this.catalogVersions,function(t){return t.uuid===e});this.selectedCatalogVersion=n?n.uuid:this.catalogVersions[0].uuid}.bind(this))}.bind(this))}}])},function(e,t){angular.module("componentCloneInfoFormModule",["yLoDashModule","pageFacadeModule","pageServiceModule","genericEditorModule","resourceLocationsModule"]).controller("componentCloneInfoFormController",["$translate","lodash","catalogService","languageService","pageFacade","pageService","systemEventService","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT",function(e,t,n,i,o,a,r,s,c,l,d){this.$onInit=function(){if(this.pageLabel=null,this.catalogVersionContainsPageWithSameTypeCode=!1,"ContentPage"!==this.pageTypeCode&&this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){var e={};e[s]=this.targetCatalogVersion.siteId,e[c]=this.targetCatalogVersion.catalogId,e[l]=this.targetCatalogVersion.version,a.getPrimaryPagesForPageType(this.pageTypeCode,e).then(function(e){this.catalogVersionContainsPageWithSameTypeCode=!t.isEmpty(e)}.bind(this))}this.setGenericEditorApi=function(e){this.pageInfoEditorApi=e,this.targetCatalogVersion&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)&&(this.pageInfoEditorApi.getLanguages=function(){return i.getLanguagesForSite(this.targetCatalogVersion.siteId)}.bind(this))}.bind(this)},this.$doCheck=function(){if("ContentPage"===this.pageTypeCode&&this.targetCatalogVersion&&this.pageInfoEditorApi&&!this._isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){var t=this.pageInfoEditorApi.getContent();t&&t.label!==this.pageLabel&&(this.pageLabel=t.label,o.contentPageWithLabelExists(this.pageLabel,this.targetCatalogVersion.catalogId,this.targetCatalogVersion.version).then(function(t){t?r.publishAsync(d,{messages:[{subject:"label",message:e.instant("se.cms.clonepagewizard.pageinfo.targetcatalogversion.label.exists.message"),type:"Warning"}]}):this.pageInfoEditorApi.clearMessages()}.bind(this)))}},this._isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION}}]).component("componentCloneInfoForm",{controller:"componentCloneInfoFormController",templateUrl:"componentCloneInfoTemplate.html",bindings:{structure:"<",content:"<",submit:"=",reset:"=",isDirty:"=",isValid:"=",pageTemplate:"<",pageTypeCode:"<",uriContext:"<",targetCatalogVersion:"<"}})},function(e,t){angular.module("componentCloneOptionFormModule",["yHelpModule"]).controller("componentCloneOptionFormController",["$translate",function(e){this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION={REFERENCE_EXISTING:"reference",CLONE:"clone"},this.$onInit=function(){this.helpTemplate="<span>"+e.instant("se.cms.clonepagewizard.options.tooltip")+"</span>",this.componentInSlotOption=this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING,this.onSelectionChange({$cloneOptionData:this.componentInSlotOption})},this.updateComponentInSlotOption=function(e){this.componentInSlotOption=e,this.onSelectionChange({$cloneOptionData:this.componentInSlotOption})}}]).component("componentCloneOptionForm",{controller:"componentCloneOptionFormController",templateUrl:"componentCloneOptionTemplate.html",bindings:{onSelectionChange:"&"}})},function(e,t){angular.module("deletePageToolbarItemModule",["pageServiceModule","cmsSmarteditServicesModule","smarteditServicesModule","seConstantsModule","pageFacadeModule"]).controller("DeletePageToolbarItemController",["$log","pageService","pageFacade","managePageService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE",function(e,t,n,i,o,a){this.$onChanges=function(){this.ready=!1,this.tooltipMesssage=null,this.isDeletePageEnabled=!1,n.retrievePageUriContext().then(function(e){e&&(this.uriContext=e,t.getCurrentPageInfo().then(function(t){this.pageInfo=t,i.isPageTrashable(this.pageInfo,e).then(function(t){this.isDeletePageEnabled=t,this.isDeletePageEnabled?(this.tooltipMesssage=null,this.ready=!0):i.getDisabledTrashTooltipMessage(this.pageInfo,e).then(function(e){this.tooltipMesssage=e,this.ready=!0}.bind(this))}.bind(this))}.bind(this)))}.bind(this))},this.onClickOnDeletePage=function(){return t.getCurrentPageInfo().then(function(e){return i.softDeletePage(e,this.uriContext).then(function(e){o.publishAsync(a,e)}.bind(this))}.bind(this))},this.getTooltipTemplate=function(){return'<div class="popover-tooltip"><span data-translate="'+this.tooltipMesssage+'" /></div>'}}]).component("deletePageToolbarItem",{controller:"DeletePageToolbarItemController",templateUrl:"deletePageToolbarItemTemplate.html",bindings:{toolbarItem:"<"}})},function(e,t){angular.module("displayConditionsEditorModule",["displayConditionsEditorModelModule","displayConditionsPageInfoModule","displayConditionsPageVariationsModule","displayConditionsPrimaryPageModule"]).controller("displayConditionsEditorController",["$log","$filter","$translate","displayConditionsEditorModel","homepageService","pageService",function(e,t,n,i,o,a){this.showReplaceLabel=!1,this.isPrimaryPage=!1,this.hasFallback=!1;var r="PENDING",s="NO_HOMEPAGE",c="LOCAL",l="PARENT";this.homepageDetails={status:r},this.$onInit=function(){i.initModel(this.page.uid),a.buildUriContextForCurrentPage().then(function(e){a.isPagePrimaryWithContext(this.page.uid,e).then(function(e){this.isPrimaryPage=e}.bind(this)),o.hasFallbackHomePage(e).then(function(e){this.hasFallback=e}.bind(this)),o.getHomepageDetailsForContext(e).then(function(e){this.homepageDetails=e}.bind(this))}.bind(this),function(){e.error("displayConditionsEditorController::$onInit - unable to retrieve uriContext")})},this.getPageName=function(){return i.pageName},this.getPageType=function(){return i.pageType},this.isPagePrimary=function(){return i.isPrimary},this.getVariations=function(){return i.variations},this.getAssociatedPrimaryPage=function(){return i.associatedPrimaryPage},this.getIsAssociatedPrimaryReadOnly=function(){return i.isAssociatedPrimaryReadOnly},this.getPrimaryPages=function(){return i.primaryPages},this.onPrimaryPageSelect=function(e){this.page.label=e.label},this.disableHomepageCheckbox=function(){return!this.hasFallback&&(this.homepageDetails.status!==c||(this.homepageDetails.currentHomepageUid===this.page.uid||(this.homepageDetails.oldHomepageUid,this.page.uid,!1)))},this.homePageChanged=function(){if(!0===this.page.homepage)switch(this.homepageDetails.status){case s:o.sendEventHideReplaceParentHomePageInfo(),this.showReplaceLabel=!1;break;case l:o.sendEventShowReplaceParentHomePageInfo({description:n.instant("se.cms.display.conditions.homepage.replace.parent.info.header",{parentCatalogName:t("l10n")(this.homepageDetails.parentCatalogName),parentCatalogVersion:this.homepageDetails.parentCatalogVersion,targetCatalogName:t("l10n")(this.homepageDetails.targetCatalogName),targetCatalogVersion:this.homepageDetails.targetCatalogVersion})}),this.showReplaceLabel=!1;break;case c:o.sendEventHideReplaceParentHomePageInfo(),this.currentHomePageName=this.homepageDetails.currentHomepageName,this.showReplaceLabel=this.page.uid!==this.homepageDetails.currentHomepageUid}else o.sendEventHideReplaceParentHomePageInfo(),this.showReplaceLabel=!1},this.showHomePageWidget=function(){return this.homepageDetails.status!==r&&"ContentPage"===this.page.typeCode&&this.isPrimaryPage},this.getHomePageDisabledTooltipTemplate=function(){return"<span>"+n.instant("se.cms.display.conditions.homepage.disabled")+"</span>"}}]).component("displayConditionsEditor",{controller:"displayConditionsEditorController",templateUrl:"displayConditionsEditorTemplate.html",bindings:{page:"<"}})},function(e,t){angular.module("displayConditionsPageInfoModule",["cmssmarteditContainerTemplates","displayConditionsPageInfoControllerModule","yHelpModule"]).component("displayConditionsPageInfo",{controller:"displayConditionsPageInfoController",templateUrl:"displayConditionsPageInfoTemplate.html",bindings:{pageName:"<",pageType:"<",isPrimary:"<"}})},function(e,t){angular.module("displayConditionsPageInfoControllerModule",["translationServiceModule"]).controller("displayConditionsPageInfoController",["$translate",function(e){this.displayConditionLabelI18nKey="se.cms.display.conditions.label",this.pageNameI18nKey="se.cms.pagelist.headerpagename",this.pageTypeI18nKey="se.cms.pagelist.headerpagetype",this.getPageDisplayConditionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.id":"se.cms.display.conditions.variation.id"},this.getPageDisplayConditionDescriptionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.description":"se.cms.display.conditions.variation.description"},this.$onChanges=function(){e(this.getPageDisplayConditionDescriptionI18nKey()).then(function(e){this.helpTemplate="<span>"+e+"</span>"}.bind(this))}}])},function(e,t){angular.module("displayConditionsPageVariationsModule",["cmssmarteditContainerTemplates","displayConditionsPageVariationsControllerModule","clientPagedListModule"]).component("displayConditionsPageVariations",{templateUrl:"displayConditionsPageVariationsTemplate.html",controller:"displayConditionsPageVariationsController",bindings:{variations:"<"}})},function(e,t){angular.module("displayConditionsPageVariationsControllerModule",[]).controller("displayConditionsPageVariationsController",["$translate",function(e){this.variationPagesTitleI18nKey="se.cms.display.conditions.variation.pages.title",this.noVariationsI18nKey="se.cms.display.conditions.no.variations",this.variationsDescriptionI18nKey="se.cms.display.conditions.variations.description",this.itemsPerPage=3,this.keys=[{property:"pageName",i18n:"se.cms.display.conditions.header.page.name"},{property:"creationDate",i18n:"se.cms.display.conditions.header.creation.date"},{property:"restrictions",i18n:"se.cms.display.conditions.header.restrictions"}],this.renderers={creationDate:function(){return'<span>{{item.creationDate | date: "short"}}</span>'},helpTemplate:function(){return"<span>"+e.instant(this.variationsDescriptionI18nKey)+"</span>"}.bind(this)}}])},function(e,t){angular.module("displayConditionsPrimaryPageModule",["cmssmarteditContainerTemplates","displayConditionsPrimaryPageControllerModule"]).component("displayConditionsPrimaryPage",{templateUrl:"displayConditionsPrimaryPageTemplate.html",controller:"displayConditionsPrimaryPageController",bindings:{readOnly:"<",associatedPrimaryPage:"<",allPrimaryPages:"<?",onPrimaryPageSelect:"&?"}})},function(e,t){angular.module("displayConditionsPrimaryPageControllerModule",[]).controller("displayConditionsPrimaryPageController",function(){this.associatedPrimaryPageLabelI18nKey="se.cms.display.conditions.primary.page.label",this.triggerOnPrimaryPageSelect=function(){this.onPrimaryPageSelect({primaryPage:this.associatedPrimaryPage})}})},function(e,t){angular.module("pageListControllerModule",["addPageServiceModule","functionsModule","pageListSyncIconModule","resourceLocationsModule","hasOperationPermissionModule","yLoDashModule","dynamicPagedListModule","pageListTemplatePrinterModule","cmsitemsRestServiceModule","seConstantsModule","translationServiceModule","cmsSmarteditServicesModule","catalogVersionPermissionModule"]).controller("pageListController",["$routeParams","$location","$translate","$scope","$q","EVENT_CONTENT_CATALOG_UPDATE","TRASHED_PAGE_LIST_PATH","lodash","cmsitemsUri","urlService","catalogService","addPageWizardService","systemEventService","managePageService","experienceService","catalogVersionPermissionService",function(e,t,n,i,o,a,r,s,c,l,d,p,u,g,m,h){this.isReady=!1,this.siteUID=e.siteId,this.catalogId=e.catalogId,this.catalogVersion=e.catalogVersion,this.uriContext=l.buildUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.pageUriContext=l.buildPageUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.pageListConfig={sortBy:"name",reversed:!1,itemsPerPage:10,displayCount:!0},this.pageListConfig.uri=c,this.pageListConfig.queryParams={catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:active"},o.all([d.isContentCatalogVersionNonActive(),h.hasSyncPermissionToActiveCatalogVersion(this.catalogId,this.catalogVersion)]).then(function(e){var n=e[0],o=e[1];this.goToTrash=function(){t.path(r.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))},this.catalogName="",this.query={value:""},this.searchOptions={debounce:500},this.pageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:!0},{property:"uid",i18n:"se.cms.pagelist.headerpageid",sortable:!0},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:!0},{property:"template",i18n:"se.cms.pagelist.headerpagetemplate"},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions"}],n&&this.pageListConfig.keys.push({property:"syncStatus",i18n:"se.cms.actionitem.page.sync"}),this.pageListConfig.keys.push({property:"dropdownitems",i18n:""}),this.reset=function(){this.query.value=""},d.getContentCatalogsForSite(this.siteUID).then(function(e){this.catalogName=e.filter(function(e){return e.catalogId===this.catalogId}.bind(this))[0].name}.bind(this)),this.pageListConfig.renderers={name:function(){return'<a data-ng-click="$ctrl.config.injectedContext.onLink( item.uid )"><homepage-icon class="homepage-icon__page-list" data-cms-page="item" data-uri-context="$ctrl.config.injectedContext.uriContext"></homepage-icon> {{ item.name }}</a>'}.bind(this),template:function(){return'<page-list-template-printer data-template-uuid="item.masterTemplate"></page-list-template-printer>'},numberOfRestrictions:function(){return'<restrictions-page-list-icon data-number-of-restrictions="item.restrictions.length || 0"/>'},syncStatus:function(){return'<div><page-list-sync-icon data-uri-context="$ctrl.config.injectedContext.uriContext" data-page-id="item.uuid" /></div>'},dropdownitems:function(){return'<div has-operation-permission="$ctrl.config.injectedContext.permissionForDropdownItems" class="paged-list-table__body__td paged-list-table__body__td-menu"><y-drop-down-menu dropdown-items="$ctrl.config.injectedContext.dropdownItems" selected-item="item" class="y-dropdown pull-right" /></div>'}},this.pageListConfig.dropdownItems=[{template:"<edit-page-item data-page-info='$ctrl.selectedItem' />"}],o&&this.pageListConfig.dropdownItems.push({template:"<sync-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.dropdownItems.push({template:"<clone-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.dropdownItems.push({template:"<delete-page-item data-page-info='$ctrl.selectedItem' />"}),this.pageListConfig.injectedContext={onLink:function(e){e&&m.loadExperience({siteId:this.siteUID,catalogId:this.catalogId,catalogVersion:this.catalogVersion,pageId:e})}.bind(this),uriContext:s.merge(this.uriContext,this.pageUriContext),dropdownItems:this.pageListConfig.dropdownItems,permissionForDropdownItems:"se.edit.page"},this.openAddPageWizard=function(){p.openAddPageWizard().then(function(){this.dynamicPagedListApi.reloadItems()}.bind(this))},this.getApi=function(e){this.dynamicPagedListApi=e};var c=[],l=function(){this.dynamicPagedListApi&&this.dynamicPagedListApi.reloadItems(),this.updateTrashedPagesCount()}.bind(this);this.setEventSubscriptions=function(){c.push(u.subscribe(a,l))},this.updateTrashedPagesCount=function(){return g.getSoftDeletedPagesCount(this.uriContext).then(function(e){this.trashedPagesTranslationData={totalCount:e}}.bind(this))}.bind(this),this.setEventSubscriptions(),i.$on("$destroy",function(){c.forEach(function(e){e()})}),this.updateTrashedPagesCount().then(function(){this.isReady=!0,this.isCatalogVersionInactive=n}.bind(this))}.bind(this))}])},function(e,t){angular.module("pageListLinkModule",[]).component("pageListLink",{templateUrl:"pageListLinkDirectiveTemplate.html",bindings:{catalog:"<",catalogVersion:"<",siteId:"<"}})},function(e,t){angular.module("pageListTemplatePrinterModule",["cmsitemsRestServiceModule"]).controller("pageListTemplatePrinterController",["cmsitemsRestService",function(e){this.$onInit=function(){e.getById(this.templateUuid).then(function(e){this.template=e.uid}.bind(this))}}]).component("pageListTemplatePrinter",{template:"<div>{{$ctrl.template}}</div>",controller:"pageListTemplatePrinterController",bindings:{templateUuid:"<"}})},function(e,t){angular.module("pageRestrictionsInfoMessageModule",[]).component("pageRestrictionsInfoMessage",{templateUrl:"pageRestrictionsInfoMessageTemplate.html"})},function(e,t){angular.module("restrictionManagementEditModule",["alertServiceModule","restrictionsServiceModule","functionsModule"]).controller("RestrictionManagementEditController",["$q","alertService","restrictionsService","URIBuilder","cmsitemsUri",function(e,t,n,i,o){this._internalInit=function(t){this.isTypeSupported=t,t?this.submitFn=function(){return this.submitInternal().then(function(t){return e.when(t)}.bind(this))}.bind(this):(this.submitFn=function(){},this.isDirtyFn=function(){return!1}),this.ready=!0}.bind(this),this.$onInit=function $onInit(){this.ready=!1,this.restriction=this.restriction||{},this.itemManagementMode="edit";var e=o+"/:identifier?dryRun=true";return this.contentApi=new i(e).replaceParams(this.uriContext).build(),this.structureApi=n.getStructureApiUri(this.itemManagementMode),void 0!==this.getSupportedRestrictionTypesFn?this.getSupportedRestrictionTypesFn().then(function(e){this._internalInit(e.indexOf(this.restriction.itemtype)>=0)}.bind(this)):this._internalInit(!0)}}]).component("restrictionManagementEdit",{controller:"RestrictionManagementEditController",templateUrl:"restrictionManagementEditTemplate.html",bindings:{isDirtyFn:"=?",restriction:"<",getSupportedRestrictionTypesFn:"<?",submitFn:"=?",uriContext:"<"}})},function(e,t){angular.module("restrictionManagementSelectModule",["restrictionsServiceModule","yActionableSearchItemModule","ySelectModule","yMessageModule","cmsitemsRestServiceModule","functionsModule","yLoDashModule"]).controller("RestrictionManagementSelectController",["$q","restrictionManagementSelectModel","restrictionsService","systemEventService","cmsitemsUri","URIBuilder",function(e,t,n,i,o,a){var r;this.resultsHeaderTemplate="<y-actionable-search-item data-event-id='RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID'></y-actionable-search-item>",this.resultsHeaderLabel="se.cms.restrictionmanagement.restrictionresults.header",this.itemTemplateUrl="restrictionManagementItemNameTemplate.html",this.editorHeader="",this.getResultsHeaderTemplate=function getResultsHeaderTemplate(){return this.selectModel.isTypeSupported()?this.resultsHeaderTemplate:""},this.selectRestrictionType=function selectRestrictionType(){this.selectModel.restrictionTypeSelected()&&(this.controllerModel.showRestrictionSelector?this.resetSelector():this.controllerModel.showRestrictionSelector=!0,this.controllerModel.showRestrictionEditor=!1)}.bind(this),this.selectRestriction=function selectRestriction(){this.selectModel.restrictionSelected()&&(this.editorHeader="se.cms.restriction.management.select.editor.header.add",this.controllerModel.mode="add",this.controllerModel.structureApi=n.getStructureApiUri(this.controllerModel.mode),this.controllerModel.showRestrictionEditor?this.resetEditor():this.controllerModel.showRestrictionEditor=!0)}.bind(this),this.createButtonEventHandler=function(e,t){this.createRestriction(t)}.bind(this),this.createRestriction=function createRestriction(e){this.selectModel.createRestrictionSelected(e,this.uriContext),this.editorHeader="se.cms.restriction.management.select.editor.header.create",this.controllerModel.mode="create",this.controllerModel.structureApi=n.getStructureApiUri(this.controllerModel.mode),this.controllerModel.showRestrictionEditor?this.resetEditor():this.controllerModel.showRestrictionEditor=!0}.bind(this),this.disableRestrictionChoice=function(e){return-1!==this.existingRestrictions.findIndex(function(t){return e.uid===t.uid})}.bind(this),this.$onDestroy=function(){r&&r()}.bind(this),this.$onInit=function $onInit(){this.selectModel=t.createRestrictionManagementSelectModel(this.getRestrictionTypesFn,this.getSupportedRestrictionTypesFn),this.resetEditor=function resetEditor(){},this.resetSelector=function resetSelector(){};var n=o+"/:identifier?dryRun=true";this.controllerModel={showRestrictionSelector:!1,showRestrictionEditor:!1,mode:"add",contentApi:new a(n).replaceParams(this.uriContext).build()},this.isDirtyFn=function(){return"add"===this.controllerModel.mode?this.controllerModel.showRestrictionEditor:!!this.isDirtyInternal&&this.isDirtyInternal()}.bind(this),this.fetchOptions={fetchPage:this.selectModel.getRestrictionsPaged,fetchEntity:this.selectModel.getRestrictionFromBackend},this.submitFn=function(){return this.selectModel.isTypeSupported()?this.submitInternal().then(function(e){return e}.bind(this)):e.when(this.selectModel.getRestriction())}.bind(this),r=i.subscribe("RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID",this.createButtonEventHandler)}.bind(this)}]).factory("restrictionManagementSelectModel",["$q","lodash","cmsitemsRestService","catalogService",function(e,t,n,i){return{createRestrictionManagementSelectModel:function(o,a){return new function RestrictionManagementSelectModel(o,a){var r,s,c={},l=[];o().then(function(e){c.restrictionTypes=e;var n=0;c.restrictionTypes.forEach(function(e){e.id=n++}),void 0!==a?a().then(function(e){l=e}):l=t.map(c.restrictionTypes,"code")}.bind(this)),this.selectedIds={},this.getRestrictionsPaged=function(e,t,i){var o={pageSize:t,currentPage:i,typeCode:c.selectedRestrictionType.code,mask:e};return n.get(o).then(function(e){r=e.response;var t=0;return e.response.forEach(function(e){e.id=t++}.bind(this)),e.results=e.response,delete e.response,e}.bind(this))}.bind(this),this.getRestrictionFromBackend=function(){return{}},this.getRestrictionTypes=function(){return e.when(c.restrictionTypes)}.bind(this),this.restrictionSelected=function(){return!(!this.selectedIds.restriction&&0!==this.selectedIds.restriction||(s=r.find(function(e){return e.id===this.selectedIds.restriction}.bind(this)),0))}.bind(this),this.restrictionTypeSelected=function(){return delete this.selectedIds.restriction,c.selectedRestrictionType=c.restrictionTypes?c.restrictionTypes.find(function(e){return e.id===this.selectedIds.restrictionType}.bind(this)):null,!!c.selectedRestrictionType&&(s={typeCode:c.selectedRestrictionType.code},!0)}.bind(this),this.createRestrictionSelected=function(e,t){s={itemtype:c.selectedRestrictionType.code,name:e},i.getCatalogVersionUUid(t).then(function(e){s.catalogVersion=e})}.bind(this),this.getRestrictionTypeCode=function(){return c.selectedRestrictionType.code},this.getRestriction=function(){return s},this.isTypeSupported=function(){return!(!c.selectedRestrictionType||!c.selectedRestrictionType.code)&&l.indexOf(c.selectedRestrictionType.code)>=0}}(o,a)}}}]).component("restrictionManagementSelect",{controller:"RestrictionManagementSelectController",templateUrl:"restrictionManagementSelectTemplate.html",bindings:{uriContext:"<",existingRestrictions:"<?",getRestrictionTypesFn:"&",getSupportedRestrictionTypesFn:"<?",submitFn:"=?",isDirtyFn:"=?"}})},function(e,t){angular.module("restrictionPickerModule",["itemManagementModule","recompileDomModule","restrictionManagementEditModule","restrictionManagementSelectModule","yLoDashModule"]).service("restrictionPickerConfig",["lodash",function(e){this.MODE_EDITING="editing",this.MODE_SELECT="select",this.getConfigForEditing=function getConfigForEditing(e,t){return{mode:this.MODE_EDITING,restriction:e,getSupportedRestrictionTypesFn:t}}.bind(this),this.getConfigForSelecting=function getConfigForSelecting(e,t,n){return{mode:this.MODE_SELECT,getRestrictionTypesFn:t,getSupportedRestrictionTypesFn:n,existingRestrictions:e}}.bind(this),this.isEditingMode=function isEditingMode(e){return e.mode===this.MODE_EDITING}.bind(this),this.isSelectMode=function isSelectMode(e){return e.mode===this.MODE_SELECT}.bind(this),this.isValidConfig=function isValidConfig(t){switch(t.mode){case this.MODE_EDITING:return e.isObject(t.restriction);case this.MODE_SELECT:return t.getSupportedRestrictionTypesFn?e.isFunction(t.getRestrictionTypesFn)&&e.isFunction(t.getSupportedRestrictionTypesFn):e.isFunction(t.getRestrictionTypesFn)}}.bind(this)}]).controller("RestrictionManagementController",["$q","restrictionPickerConfig",function(e,t){this.$onInit=function(){this.submitFn=function(){return this.submitInternal().then(function(e){return e})}.bind(this)},this.$onChanges=function $onChanges(){if(!t.isValidConfig(this.config))throw"restrictionManagementController - invalid restrictionPickerConfig";this.editMode=t.isEditingMode(this.config),this.getSupportedRestrictionTypesFn=this.config.getSupportedRestrictionTypesFn,this.editMode?this.restriction=this.config.restriction:(this.getRestrictionTypesFn=this.config.getRestrictionTypesFn,this.existingRestrictions=this.config.existingRestrictions)}}]).component("restrictionManagement",{controller:"RestrictionManagementController",templateUrl:"restrictionManagementTemplate.html",bindings:{config:"<",uriContext:"<",submitFn:"=?",isDirtyFn:"=?"}})},function(e,t){angular.module("restrictionsEditorModule",["cmssmarteditContainerTemplates","restrictionsTableModule","restrictionPickerModule","sliderPanelModule","yMessageModule","yLoDashModule","cmsitemsRestServiceModule","restrictionsCriteriaServiceModule","itemManagementModule","functionsModule"]).controller("restrictionsEditorController",["$q","$log","lodash","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","GENERIC_EDITOR_LOADED_EVENT","ITEM_MANAGEMENT_EDITOR_ID","systemEventService","restrictionPickerConfig","restrictionsCriteriaService","isBlank",function(e,t,n,i,o,a,r,s,c,l){this.setSliderConfigForAddOrCreate=function(){this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.add",this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.add",this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!this.restrictionManagement.isDirtyFn||!this.restrictionManagement.isDirtyFn()}.bind(this),this.sliderPanelConfiguration.modal.save.onClick=function(){this.restrictionManagement.submitFn().then(function(e){this.restrictions.push(e),this.sliderPanelHide()}.bind(this)).catch(function(){t.warn("restrictionsEditorController.setSliderConfigForAddOrCreate - Failed to create restriction")})}.bind(this)}.bind(this),this.setSliderConfigForEditing=function(){this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.edit",this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.save",this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!this.restrictionManagement.isDirtyFn||!this.restrictionManagement.isDirtyFn()}.bind(this),this.sliderPanelConfiguration.modal.save.onClick=function(){this.restrictionManagement.submitFn().then(function(e){if(this.restrictionManagement.operation){var t=this.restrictionManagement.operation.restriction;e.$restrictionIndex=t.$restrictionIndex}var n=e.$restrictionIndex;if(-1===n)throw"restrictionsEditorController - edited restriction not found in list: "+e;this.restrictions[n]=e,this.sliderPanelHide()}.bind(this))}.bind(this)}.bind(this),this.sliderPanelConfiguration={modal:{showDismissButton:!0,cancel:{label:"se.cms.restriction.management.panel.button.cancel",onClick:function(){this.sliderPanelHide()}.bind(this)},save:{}},cssSelector:"#y-modal-dialog"},this.onClickOnAdd=function(){this.setSliderConfigForAddOrCreate(),this.restrictionManagement.operation=s.getConfigForSelecting(n.clone(this.restrictions),this.getRestrictionTypes,this.getSupportedRestrictionTypes),this.sliderPanelShow()}.bind(this),this.onClickOnEdit=function(e){this.setSliderConfigForEditing(),this.restrictionManagement.operation=s.getConfigForEditing(n.clone(e),this.getSupportedRestrictionTypes),this.sliderPanelShow()}.bind(this),this.matchCriteriaChanged=function(e){this.criteria=e,this.matchCriteriaIsDirty=this.criteria!==this.orrigCriteria,this.updateRestrictionsData()}.bind(this),this.setupResults=function(e){this.restrictions=e,this.restrictions=this._indexRestrictions(this.restrictions),this.oldRestrictions=this._cloneRestrictions(this.restrictions),this.originalRestrictions=this._cloneRestrictions(this.restrictions),this.updateRestrictionsData(),this.isRestrictionsReady=!0},this.updateRestrictionsData=function(){this.onRestrictionsChanged&&this.onRestrictionsChanged({$onlyOneRestrictionMustApply:this.criteria.value,$restrictions:this.restrictions})},this._prepareRestrictionsCriteria=function(){this.criteriaOptions=c.getRestrictionCriteriaOptions(),this.item.onlyOneRestrictionMustApply?(this.criteria=this.criteriaOptions[1],this.orrigCriteria=this.criteriaOptions[1]):(this.criteria=this.criteriaOptions[0],this.orrigCriteria=this.criteriaOptions[0])},this._isRestrictionRelatedError=function(e){return n.includes(e.subject,"restrictions")},this._formatRestrictionRelatedError=function(e){var t=n.clone(e);return l(t.position)||(t.position=parseInt(t.position)),l(t.subject)||(t.subject=t.subject.split(".").pop()),t},this._handleUnrelatedValidationErrors=function(e,t){this.errors=t.messages.filter(function(e){return this._isRestrictionRelatedError(e)}.bind(this)).map(function(e){return this._formatRestrictionRelatedError(e)}.bind(this))},this._propagateErrors=function(e,t){if(this.restrictionManagement.operation&&this.restrictionManagement.operation.mode===s.MODE_EDITING&&t===a){var n=this.restrictionManagement.operation.restriction.$restrictionIndex,o=this.errors.filter(function(e){return e.position===n});this._clearEvents(),r.publishAsync(i,{messages:o,targetGenericEditorId:t}).then(function(){this._initEvents()}.bind(this))}},this._indexRestrictions=function(e){return(e||[]).forEach(function(e,t){e.$restrictionIndex=t}),e},this._cloneRestrictions=function(e){return n.cloneDeep(e)},this._initEvents=function(){this.unregisterErrorListener=r.subscribe(i,this._handleUnrelatedValidationErrors.bind(this)),this.unregisterErrorPropagationEvent=r.subscribe(o,this._propagateErrors.bind(this))},this._clearEvents=function(){this.unregisterErrorListener(),this.unregisterErrorPropagationEvent()},this.$onInit=function(){this.showRestrictionPicker=!1,this.restrictions=this.restrictions||[],this.originalRestrictions=[],this.restrictionsArrayIsDirty=!1,this.matchCriteriaIsDirty=!1,this.oldRestrictions=[],this.isRestrictionsReady=!1,this.errors=[],this._prepareRestrictionsCriteria(),this.setupResults(this.restrictions),this.restrictionManagement={uriContext:this.item.uriContext},this.isDirtyFn=function(){return this.restrictionsArrayIsDirty||this.matchCriteriaIsDirty&&this.restrictions.length>=2}.bind(this),this.resetFn=function(){return!0},this.cancelFn=function(){return e.when(!0)},this._initEvents()},this.$onDestroy=function(){this._clearEvents()},this.$doCheck=function(){this.restrictionsArrayIsDirty=angular.toJson(this.originalRestrictions)!==angular.toJson(this.restrictions),angular.toJson(this.oldRestrictions)!==angular.toJson(this.restrictions)&&(this.restrictions=this._indexRestrictions(this.restrictions),this.oldRestrictions=this._cloneRestrictions(this.restrictions),this.updateRestrictionsData())}}]).component("restrictionsEditor",{templateUrl:"restrictionsEditorTemplate.html",controller:"restrictionsEditorController",scope:{},bindings:{item:"<",editable:"=",restrictions:"<?",resetFn:"=?",cancelFn:"=?",isDirtyFn:"=?",onRestrictionsChanged:"&?",getRestrictionTypes:"&",getSupportedRestrictionTypes:"&?"}})},function(e,t){angular.module("restrictionsTableModule",["cmssmarteditContainerTemplates","l10nModule","restrictionsCriteriaServiceModule","yLoDashModule"]).controller("restrictionsTableController",["restrictionsCriteriaService","lodash",function(e,t){this.resetRestrictionCriteria=function(){(!this.restrictions||this.restrictions.length<2)&&(this.restrictionCriteria=this.criteriaOptions[0])}.bind(this),this.removeRestriction=function(e){var t=this.restrictions.indexOf(e);this.restrictions.splice(t,1),this._removeUnnecessaryError(t),this._modifyErrorPositions(t)}.bind(this),this._removeUnnecessaryError=function(e){var t=this.errors.findIndex(function(t){return t.position===e});t>-1&&this.errors.splice(t,1)}.bind(this),this._modifyErrorPositions=function(e){this.errors.forEach(function(t){t.position>=e&&(t.position=t.position-1)})}.bind(this),this.editRestriction=function(e){this.onClickOnEdit(e)}.bind(this),this.criteriaClicked=function(){this.onCriteriaSelected(this.restrictionCriteria)},this.removeAllRestrictions=function(){this.restrictions=[]},this.showRemoveAllButton=function(){return this.restrictions&&this.restrictions.length>0&&this.editable},this.isInError=function(e){return!!this.errors&&t.some(this.errors,function(t){return t.position===e})},this.$onInit=function(){this.criteriaOptions=e.getRestrictionCriteriaOptions(),this.resetRestrictionCriteria(),this.actions=[{key:"se.cms.restrictions.item.edit",callback:this.editRestriction},{key:"se.cms.restrictions.item.remove",callback:this.removeRestriction}]},this.$doCheck=function(){this.resetRestrictionCriteria()}}]).component("restrictionsTable",{templateUrl:"restrictionsTableTemplate.html",controller:"restrictionsTableController",controllerAs:"$ctrl",bindings:{customClass:"=",editable:"=",onClickOnEdit:"<?",onCriteriaSelected:"=",onSelect:"=",restrictions:"=",restrictionCriteria:"=?",errors:"<?"}})},function(e,t){angular.module("synchronizeCatalogModule",["confirmationModalServiceModule","synchronizationServiceModule","l10nModule","hasOperationPermissionModule","seConstantsModule"]).controller("synchronizeCatalogController",["$scope","synchronizationService","$q","confirmationModalService","systemEventService","l10nFilter","EVENT_CONTENT_CATALOG_UPDATE",function(e,t,n,i,o,a,r){var s="ERROR",c="FAILURE",l="FINISHED";this.$onInit=function(){this.syncJobStatus={syncStartTime:"",syncEndTime:"",status:"",source:"",target:""},this.targetCatalogVersion=this.activeCatalogVersion.version,this.sourceCatalogVersion=this.catalogVersion.active?null:this.catalogVersion.version,this.syncCatalogPermission=[{names:["se.sync.catalog"],context:{catalogId:this.catalog.catalogId,catalogVersion:this.sourceCatalogVersion,targetCatalogVersion:this.targetCatalogVersion}}],this.catalogDto={catalogId:this.catalog.catalogId,targetCatalogVersion:this.targetCatalogVersion,sourceCatalogVersion:this.sourceCatalogVersion},t.startAutoGetSyncData(this.catalogDto,this._updateSyncStatusData.bind(this)),this._invokeGetSyncData()},this.$onDestroy=function(){t.stopAutoGetSyncData(this.catalogDto)},this.syncCatalog=function(){var e=a(this.catalog.name);i.confirm({template:'<div id="confirmationModalDescription">{{ "se.sync.confirm.msg" | translate: { catalogName: modalController.catalogName } }}</div>',title:"se.sync.confirmation.title",scope:{catalogName:e}}).then(function(){t.updateCatalogSync(this.catalogDto).then(function(e){this._updateSyncStatusData(e),o.publishAsync(r,e)}.bind(this))}.bind(this))},this._invokeGetSyncData=function(){t.getCatalogSyncStatus(this.catalogDto).then(function(e){this._updateSyncStatusData(e)}.bind(this))},this._updateSyncStatusData=function(e){this.syncJobStatus={syncStartTime:e.creationDate,syncEndTime:e.endDate,status:e.syncStatus,source:e.sourceCatalogVersion?e.sourceCatalogVersion:"",target:e.targetCatalogVersion?e.targetCatalogVersion:""}},this.isSyncJobFinished=function(){return this.syncJobStatus.status===l},this.isSyncJobInProgress=function(){return"RUNNING"===this.syncJobStatus.status||"UNKNOWN"===this.syncJobStatus.status},this.isSyncJobFailed=function(){return this.syncJobStatus.status===s||this.syncJobStatus.status===c},this.isButtonEnabled=function(){return!this.isSyncJobInProgress()},this.getSyncFromLabels=function(){return{sourceCatalogVersion:this.syncJobStatus.source}}}]).directive("synchronizeCatalog",function(){return{templateUrl:"synchronizeCatalogTemplate.html",restrict:"E",controller:"synchronizeCatalogController",controllerAs:"ctrl",bindToController:{catalog:"<",catalogVersion:"<",activeCatalogVersion:"<"}}})},function(e,t){angular.module("pageListSyncIconModule",["cmsSmarteditServicesModule"]).controller("pageListSyncIconController",["pageSynchronizationService","catalogService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING","crossFrameEventService",function(e,t,n,i,o){this.unRegisterSyncPolling=angular.noop,this.classes={},this.classes[n.UNAVAILABLE]="",this.classes[n.IN_SYNC]="hyicon-done se-sync-button__sync__done",this.classes[n.NOT_SYNC]="hyicon-sync se-sync-button__sync__sync-not",this.classes[n.IN_PROGRESS]="hyicon-sync se-sync-button__sync__sync-not",this.classes[n.SYNC_FAILED]="hyicon-sync se-sync-button__sync__sync-not",this.fetchSyncStatus=function(){return e.getSyncStatus(this.pageId,this.uriContext).then(function(e){this.syncStatus=e}.bind(this),function(){this.syncStatus.status=n.UNAVAILABLE}.bind(this))}.bind(this),this.triggerFetch=function(e,t){t.itemId===this.pageId&&this.fetchSyncStatus()},this.$onInit=function(){t.isContentCatalogVersionNonActive(this.uriContext).then(function(e){e&&(this.syncStatus={status:n.UNAVAILABLE},this.unRegisterSyncPolling=o.subscribe(i.FAST_FETCH,this.triggerFetch.bind(this)),this.fetchSyncStatus())}.bind(this))},this.$onDestroy=function(){this.unRegisterSyncPolling()}}]).component("pageListSyncIcon",{templateUrl:"pageListSyncIconTemplate.html",controller:"pageListSyncIconController",controllerAs:"$ctrl",bindings:{pageId:"<",uriContext:"<"}})},function(e,t){angular.module("pageSynchronizationHeaderModule",["translationServiceModule","l10nModule","functionsModule"]).controller("PageSynchronizationHeaderController",["$translate","sharedDataService","catalogService","l10nFilter",function(e,t,n,i){this.$onChanges=function(){this.syncStatus&&(this.ready=!1,this.pageSyncConditions.pageHasNoDepOrNoSyncStatus?t.get("experience").then(function(t){var o=this.getCurrentCatalogIdFromExperience(t),a=o.catalogId,r=i(o.catalogName);return n.getActiveContentCatalogVersionByCatalogId(a).then(function(t){this.headerText=this.pageSyncConditions.pageHasUnavailableDependencies?e.instant("se.cms.synchronization.page.unavailable.items.description",{itemNames:this._fetchUnavailableDependencies(),catalogName:r,catalogVersion:t}):e.instant("se.cms.synchronization.page.new.description",{catalogName:r,catalogVersion:t}),this.ready=!0}.bind(this))}.bind(this)):(e("se.cms.synchronization.page.header.help").then(function(e){this.helpTemplate="<span>"+e+"</span>"}.bind(this)),this.ready=!0))},this._fetchUnavailableDependencies=function(){return this.syncStatus.unavailableDependencies.map(function(e){return e.name}).join(",")},this.userIsInsidePage=function(e){return!!e.pageContext},this.getCurrentCatalogIdFromExperience=function(e){return{catalogId:this.userIsInsidePage(e)?e.pageContext.catalogId:e.catalogDescriptor.catalogId,catalogName:this.userIsInsidePage(e)?e.pageContext.catalogName:e.catalogDescriptor.name}}}]).component("pageSynchronizationHeader",{templateUrl:"pageSynchronizationHeaderTemplate.html",bindings:{syncStatus:"<",pageSyncConditions:"<",showDetailedInfo:"<?"},controller:"PageSynchronizationHeaderController"})},function(e,t){angular.module("pageSynchronizationPanelModule",["functionsModule","synchronizationPanelModule","cmsSmarteditServicesModule","pageSynchronizationHeaderModule"]).constant("SYNCHRONIZATION_PAGE_SELECT_ALL_SLOTS_LABEL","se.cms.synchronization.page.select.all.slots").constant("PAGE_SYNC_STATUS_READY","PAGE_SYNC_STATUS_READY").controller("PageSynchronizationPanelController",["$attrs","PAGE_SYNC_STATUS_READY","SYNCHRONIZATION_PAGE_SELECT_ALL_SLOTS_LABEL","isBlank","pageSynchronizationService","homepageService","$q","systemEventService",function(e,t,n,i,o,a,r,s){this.pageSyncConditions={canSyncHomepage:!1,pageHasUnavailableDependencies:!1,pageHasSyncStatus:!1,pageHasNoDepOrNoSyncStatus:!1},this.getSyncStatus=function(){return r.all([a.canSyncHomepage(this.cmsPage,this.uriContext),o.getSyncStatus(this.cmsPage.uuid,this.uriContext)]).then(function(e){return this.pageSyncConditions.canSyncHomepage=e[0],this.syncStatus=e[1],this.syncStatus.selectAll=n,this.syncStatus}.bind(this))}.bind(this),this.onSyncStatusReady=function(e){this.pageSyncConditions.pageHasUnavailableDependencies=e.unavailableDependencies.length>0,this.pageSyncConditions.pageHasSyncStatus=!!e.lastSyncStatus,this.pageSyncConditions.pageHasNoDepOrNoSyncStatus=this.pageSyncConditions.pageHasUnavailableDependencies||!this.pageSyncConditions.pageHasSyncStatus,this.pageSyncConditions.pageHasUnavailableDependencies?this._disablePageSync():this.pageSyncConditions.pageHasSyncStatus?this._enableSlotsSync():this._enablePageSync(),s.publish(t,this.pageSyncConditions)}.bind(this),this.performSync=function(e){return o.performSync(e,this.uriContext)}.bind(this),this.$postLink=function(){this.showSyncButton=i(e.syncItems)},this.getApi=function(e){this.synchronizationPanelApi=e,this.synchronizationPanelApi.disableItem=function(e){return!this.pageSyncConditions.canSyncHomepage&&e===this.syncStatus}.bind(this)}.bind(this),this._disablePageSync=function(){this.synchronizationPanelApi.displayItemList(!1)},this._enablePageSync=function(){this.synchronizationPanelApi.selectAll(),this.synchronizationPanelApi.displayItemList(!1)},this._enableSlotsSync=function(){this.synchronizationPanelApi.displayItemList(!0)}}]).component("pageSynchronizationPanel",{templateUrl:"pageSynchronizationPanelTemplate.html",controller:"PageSynchronizationPanelController",bindings:{syncItems:"=?",uriContext:"<?",onSelectedItemsUpdate:"<?",cmsPage:"<?",showDetailedInfo:"<?"}})},function(e,t){angular.module("pageSyncMenuToolbarItemModule",["pageSynchronizationPanelModule","pageSynchronizationPanelModule"]).controller("PageSyncMenuToolbarItemController",["crossFrameEventService","catalogService","assetsService","systemEventService","iframeClickDetectionService","pageInfoService","pageSynchronizationService","SYNCHRONIZATION_STATUSES","SYNCHRONIZATION_POLLING","$translate","$q","PAGE_SYNC_STATUS_READY","pageService",function(e,t,n,i,o,a,r,s,c,l,d,p,u){this.isReady=!1,this.fetchSyncStatus=function(){a.getPageUUID().then(function(e){r.getSyncStatus(e).then(function(e){this.isNotInSync=e.status!==s.IN_SYNC}.bind(this))}.bind(this))}.bind(this),this.$onInit=function(){this.isContentCatalogVersionNonActive=!1,d.all([u.getCurrentPageInfo(),t.retrieveUriContext(),t.isContentCatalogVersionNonActive()]).then(function(t){this.cmsPage=t[0],this.uriContext=t[1],t[2]&&(this.icons={open:n.getAssetsRoot()+"/images/icon_info_white.png",closed:n.getAssetsRoot()+"/images/icon_info_blue.png"},this.menuIcon=this.icons.closed,this.isNotInSync=!1,this.isContentCatalogVersionNonActive=!0,this.unRegisterSyncPolling=e.subscribe(c.FAST_FETCH,this.fetchSyncStatus),this.fetchSyncStatus(),this.isReady=!0)}.bind(this)),this.unRegisterSyncPageConditions=i.subscribe(p,function(e,t){this.syncPageConditions=t,this.helpTemplate=l.instant("se.cms.synchronization.page.header")+(this.syncPageConditions.pageHasNoDepOrNoSyncStatus?"":" "+l.instant("se.cms.synchronization.page.header.help"))}.bind(this))}.bind(this),this.$onDestroy=function(){this.unRegisterSyncPolling&&this.unRegisterSyncPolling(),this.unRegisterSyncPageConditions&&this.unRegisterSyncPageConditions()}.bind(this)}]).component("pageSyncMenuToolbarItem",{templateUrl:"pageSyncMenuToolbarItemTemplate.html",controller:"PageSyncMenuToolbarItemController",controllerAs:"$ctrl",bindings:{toolbarItem:"<item"}})},function(e,t){angular.module("syncPageModalServiceModule",["modalServiceModule","pageSynchronizationPanelModule"]).factory("syncPageModalService",["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES",function(e,t,n){function SyncModalService(){}return SyncModalService.prototype.open=function(i,o){return e.open({title:"se.cms.synchronization.pagelist.modal.title.prefix",titleSuffix:"se.cms.pageeditormodal.editpagetab.title",cssClasses:"yFrontModal",templateInline:'<page-synchronization-panel data-on-selected-items-update="modalController.onSelectedItemsUpdate" data-sync-items="modalController.sync" data-uri-context="modalController.uriContext" data-cms-page="modalController.cmsPage" data-show-detailed-info="true"></page-synchronization-panel>',controller:["syncPageModalService","modalManager","$log",function(e,t,n){this.showSyncButton=!1,this.modalManager=t,this.cmsPage=i,this.onSelectedItemsUpdate=function(e){0===e.length?t.disableButton("sync"):t.enableButton("sync")},this.uriContext=o,this.init=function(){t.setDismissCallback(this.onCancel),t.setButtonHandler(function(e){if("close"!==e)switch(e){case"sync":return this.sync();default:n.error("A button callback has not been registered for button with id",e)}}.bind(this))}}],buttons:[{id:"close",label:"se.cms.component.confirmation.modal.close",style:n.SECONDARY,action:t.DISMISS},{id:"sync",label:"se.cms.actionitem.page.sync",action:t.NONE,disabled:!0}]})},new SyncModalService}])},function(e,t){angular.module("catalogVersionRestServiceModule",["resourceLocationsModule"]).factory("catalogVersionRestService",["restServiceFactory","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i){var o="/cmswebservices/v1/sites/:"+t+"/catalogs/:"+n+"/versions/:"+i;return{get:function(t){return e.get(o).get(t)},getCloneableTargets:function(t){return e.get(o+"/targets?mode=cloneableTo").get(t)}}}])},function(e,t){angular.module("createPageServiceModule",["resourceLocationsModule"]).factory("createPageService",["restServiceFactory","PAGES_LIST_RESOURCE_URI",function(e,t){var n=e.get(t);return{createPage:function(e,t){var i=angular.extend({},t,e);return n.save(i)}}}])},function(e,t){angular.module("pageRestrictionsRestServiceModule",[]).service("pageRestrictionsRestService",["CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","PAGES_RESTRICTIONS_RESOURCE_URI","restServiceFactory","UPDATE_PAGES_RESTRICTIONS_RESOURCE_URI",function(e,t,n,i){var o=n.get(e),a=n.get(t),r=n.get(i,"pageid");this.update=function(e){return r.update(e)},this.getPagesRestrictionsForPageId=function(e){return o.get({pageId:e})},this.getPagesRestrictionsForCatalogVersion=function(e,t,n){return a.get({siteUID:e,catalogId:t,catalogVersion:n})}}])},function(e,t){angular.module("pageTypeServiceModule",[]).service("pageTypeService",["restServiceFactory","PAGE_TYPES_URI",function(e,t){var n,i=e.get(t);this.getPageTypes=function(){return(n=n||i.get()).then(function(e){return e.pageTypes})}}])},function(e,t){angular.module("pageTypesRestrictionTypesRestServiceModule",[]).service("pageTypesRestrictionTypesRestService",["languageService","PAGE_TYPES_RESTRICTION_TYPES_URI","restServiceFactory",function(e,t,n){var i=n.get(t);this.getPageTypesRestrictionTypes=function(){return i.get().then(function(e){return e})}}])},function(e,t){angular.module("pagesFallbacksRestServiceModule",["resourceLocationsModule","yLoDashModule"]).service("pagesFallbacksRestService",["restServiceFactory","lodash","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION",function(e,t,n,i,o,a,r,s){var c="/cmswebservices/v1/sites/"+a+"/catalogs/"+r+"/versions/"+s+"/pages/:pageId/fallbacks";this.getFallbacksForPageId=function(t){this._resource=this._resource||e.get(c);var n={pageId:t};return this._resource.get(n).then(function(e){return e.uids})},this.getFallbacksForPageIdAndContext=function(t,a){var r={pageId:t},s="/cmswebservices/v1/sites/"+a[n]+"/catalogs/"+a[i]+"/versions/"+a[o]+"/pages/:pageId/fallbacks";return e.get(s).get(r).then(function(e){return e.uids})}}])},function(e,t){angular.module("pagesRestServiceModule",["yLoDashModule","resourceLocationsModule","functionsModule"]).service("pagesRestService",["restServiceFactory","lodash","URIBuilder","PAGE_CONTEXT_SITE_ID","PAGE_CONTEXT_CATALOG","PAGE_CONTEXT_CATALOG_VERSION","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,o,a,r,s,c){var l="/cmswebservices/v1/sites/"+i+"/catalogs/"+o+"/versions/"+a+"/pages/:pageUid";this.get=function(d){var p=t.cloneDeep(d),u=new n(l).replaceParams(p).build();return delete p[r],delete p[s],delete p[c],delete p[i],delete p[o],delete p[a],e.get(u,"pageUid").get(p).then(function(e){return e.pages})},this.getById=function(r,s){var c=new n(l).replaceParams(s).build(),d=t.assign({pageUid:r},s||{});return delete d[i],delete d[o],delete d[a],e.get(c,"pageUid").get(d)},this.update=function(r,s){var c=new n(l).replaceParams(s).build(),d=t.assign({pageUid:r},s||{});return delete d[i],delete d[o],delete d[a],e.get(c,"pageUid").update(d)}}])},function(e,t){angular.module("pagesVariationsRestServiceModule",["resourceLocationsModule","yLoDashModule"]).service("pagesVariationsRestService",["restServiceFactory","lodash","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,o){this._uri="/cmswebservices/v1/sites/"+n+"/catalogs/"+i+"/versions/"+o+"/pages/:pageId/variations",this._resource=e.get(this._uri),this.getVariationsForPrimaryPageId=function(e,n){var i=t.assign({pageId:e},n||{});return this._resource.get(i).then(function(e){return e.uids})}.bind(this)}])},function(e,t){angular.module("restrictionTypesRestServiceModule",[]).service("restrictionTypesRestService",["languageService","RESTRICTION_TYPES_URI","restServiceFactory",function(e,t,n){var i=n.get(t);this.getRestrictionTypes=function(){return i.get().then(function(e){return e})}}])},function(e,t){angular.module("structuresRestServiceModule",["yLoDashModule","smarteditCommonsModule","resourceLocationsModule"]).service("structureModeManagerFactory",["lodash",function(e){function ModeManager(t){if(!e.isArray(t))throw"ModeManager initialization error: supportedModes must be an array of strings";var n=t;this.getSupportedModes=function getSupportedModes(){return e.clone(n)}}return ModeManager.prototype.isModeSupported=function isModeSupported(e){return-1!==this.getSupportedModes().indexOf(e)},ModeManager.prototype.validateMode=function validateMode(e){if(-1===this.getSupportedModes().indexOf(e))throw"ModeManager.validateMode() - mode ["+e+"] not in list of supported modes: "+this.getSupportedModes();return!0},{createModeManager:function(e){return new ModeManager(e)}}}]).service("structuresRestService",["operationContextService","OPERATION_CONTEXT","TYPES_RESOURCE_URI",function(e,t,n){var i=n+"/";e.register(i,t.CMS),this.getUriForContext=function getUriForContext(e,t){var i=n;return i=e?i+"?code="+(t||":smarteditComponentType")+"&mode="+e.toUpperCase():i+"/"+(t||":smarteditComponentType")}}])},function(e,t){angular.module("typeStructureRestServiceModule",["resourceLocationsModule"]).service("typeStructureRestService",["TYPES_RESOURCE_URI","restServiceFactory",function(e,t){var n=t.get(e);this.getStructureByType=function(e,t){var i=t||{};return n.getById(e).then(function(e){return i.getWholeStructure?e:e.attributes})},this.getStructureByTypeAndMode=function(n,i,o){var a=t.get(e),r=o||{};return a.get({code:n,mode:i}).then(function(e){var t=e.componentTypes[0];return!t||r.getWholeStructure?t:t.attributes})},this.getStructuresByCategory=function(e){return n.get({category:e}).then(function(e){return e.componentTypes})}}])},function(e,t){angular.module("displayConditionsFacadeModule",["pageServiceModule","pageRestrictionsServiceModule","pageDisplayConditionsServiceModule"]).service("displayConditionsFacade",["pageService","pageRestrictionsService","pageDisplayConditionsService","$q",function(e,t,n,i){this.getPageInfoForPageUid=function(t){var n=e.getPageById(t),o=e.isPagePrimary(t);return i.all([n,o]).then(function(e){return{pageName:e[0].name,pageType:e[0].typeCode,isPrimary:e[1]}})},this.getVariationsForPageUid=function(n){return e.getVariationPages(n).then(function(e){return 0===e.length?i.when([]):i.all(e.map(function(e){return t.getPageRestrictionsCountForPageUID(e.uid)})).then(function(t){return e.map(function(e,n){return{pageName:e.name,creationDate:e.creationtime,restrictions:t[n]}})})})},this.getPrimaryPagesForVariationPageType=function(t){return e.getPrimaryPagesForPageType(t).then(function(e){return e.map(function(e){return{uid:e.uid,uuid:e.uuid,name:e.name,label:e.label}})})},this.updatePage=function(t,n){return e.updatePageById(t,n)},this.isPagePrimary=function(t){return e.isPagePrimary(t)},this.getPrimaryPageForVariationPage=function(t){return e.getPrimaryPage(t).then(function(e){return{uid:e.uid,name:e.name,label:e.label}})}}])},function(e,t){angular.module("pageFacadeModule",["yLoDashModule","cmsitemsRestServiceModule","resourceLocationsModule"]).service("pageFacade",["lodash","cmsitemsRestService","cmsitemsUri","crossFrameEventService","sharedDataService","urlService","restServiceFactory","catalogService","EVENTS","CONTEXT_SITE_ID",function(e,t,n,i,o,a,r,s,c,l){this.contentPageWithLabelExists=function(n,i,o){var a={pageSize:10,currentPage:0,typeCode:"ContentPage",itemSearchParams:"label:"+n,catalogId:i,catalogVersion:o};return t.get(a).then(function(t){return t&&!e.isEmpty(t.response)}.bind(this))},this.retrievePageUriContext=function(){return o.get("experience").then(function(e){if(!e)throw new Error("pageFacade - could not retrieve an experience from sharedDataService");return e.pageContext?a.buildUriContext(e.pageContext.siteId,e.pageContext.catalogId,e.pageContext.catalogVersion):null})},this.createPage=function(e){return s.getCatalogVersionUUid().then(function(n){return e.catalogVersion=e.catalogVersion||n,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),t.create(e).then(function(t){return i.publish(c.PAGE_CREATED,e),t})})},this.createPageForSite=function(e,t){return s.getCatalogVersionUUid().then(function(o){return e.catalogVersion=e.catalogVersion||o,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),r.get(n.replace(l,t)).save(e).then(function(t){return i.publish(c.PAGE_CREATED,e),t})})}}])},function(e,t){angular.module("pageRestrictionsModule",["pageRestrictionsCriteriaModule","pageRestrictionsServiceModule","restrictionTypesServiceModule"]).factory("pageRestrictionsFacade",["pageRestrictionsCriteriaService","pageRestrictionsService","restrictionTypesService",function(e,t,n){return{getRestrictionCriteriaOptions:e.getRestrictionCriteriaOptions,getRestrictionCriteriaOptionFromPage:e.getRestrictionCriteriaOptionFromPage,getRestrictionTypesByPageType:n.getRestrictionTypesByPageType,getRestrictionsByPageUID:t.getRestrictionsByPageUID,isRestrictionTypeSupported:t.isRestrictionTypeSupported,updateRestrictionsByPageUID:t.updateRestrictionsByPageUID,getRestrictionsByPageUUID:t.getRestrictionsByPageUUID}}])},function(e,t){angular.module("actionableAlertModule",["alertServiceModule"]).constant("actionableAlertConstants",{ALERT_TEMPLATE:"<div><p>{{ $alertInjectedCtrl.description | translate: $alertInjectedCtrl.descriptionDetails }}</p><div><a data-ng-click='alert.hide(); $alertInjectedCtrl.onClick();'>{{ $alertInjectedCtrl.hyperlinkLabel | translate: $alertInjectedCtrl.hyperlinkDetails }}</a></div></div>",TIMEOUT_DURATION:2e4,ALERT_TYPES:{INFO:"INFO",ALERT:"ALERT",DANGER:"DANGER",WARNING:"WARNING",SUCCESS:"SUCCESS"}}).service("actionableAlertService",["alertService","actionableAlertConstants",function(e,t){var n={INFO:"showInfo",ALERT:"showAlert",DANGER:"showDanger",WARNING:"showWarning",SUCCESS:"showSuccess"};this.displayActionableAlert=function(i,o){var a=function getMethodNameByAlertType(e){return e&&n.hasOwnProperty(e)?n[e]:n.INFO}(o);return e[a]({closeable:!0,controller:i.controller,template:t.ALERT_TEMPLATE,timeout:i.timeoutDuration||t.TIMEOUT_DURATION})}}])},function(e,t){angular.module("clonePageAlertServiceModule",["actionableAlertModule","smarteditServicesModule","functionsModule","l10nModule"]).service("clonePageAlertService",["$translate","actionableAlertService","experienceService","catalogService","l10nFilter","isBlank",function(e,t,n,i,o,a){this.displayClonePageAlert=function(e){return i.getCatalogVersionByUuid(e.catalogVersion).then(function(n){return t.displayActionableAlert({controller:["experienceService","l10nFilter",function(t){this.description="se.cms.clonepage.alert.info.description",this.descriptionDetails={catalogName:o(n.catalogName),catalogVersion:n.version},this.hyperlinkLabel="se.cms.clonepage.alert.info.hyperlink",this.onClick=function(){if(a(e.uid))throw"clonePageAlertService.checkAndAlertOnClonePage - missing required parameter 'uid'";t.loadExperience({siteId:n.siteId,catalogId:n.catalogId,catalogVersion:n.version,pageId:e.uid})}}]})}.bind(this))}}])},function(e,t){angular.module("componentVisibilityAlertServiceModule",["alertServiceModule","actionableAlertModule","smarteditServicesModule","componentVisibilityAlertServiceInterfaceModule","editorModalServiceModule"]).factory("componentVisibilityAlertService",["alertService","actionableAlertService","sharedDataService","ComponentVisibilityAlertServiceInterface","editorModalService","extend","isBlank","gatewayProxy",function(e,t,n,i,o,a,r,s){var c=function(){this.gatewayId="ComponentVisibilityAlertService",s.initForService(this,["checkAndAlertOnComponentVisibility"])};return(c=a(i,c)).prototype.checkAndAlertOnComponentVisibility=function(i){var o="se.cms.component.visibility.alert.description.hidden",a="se.cms.component.visibility.alert.description.restricted";i.visible&&!i.restricted||n.get("experience").then(function(n){var s=i.visible?a:o;i.catalogVersion!==n.pageContext.catalogVersionUuid?e.showAlert({message:s}):t.displayActionableAlert({controller:["componentVisibilityAlertService","editorModalService",function(e,t){this.onClick=function(){!function(){var e=[i.itemId,i.itemType,i.slotId];if(e.filter(function(e){return e&&!r(e)}).length!==e.length)throw"componentVisibilityAlertService.checkAndAlertOnComponentVisibility - missing properly typed parameters"}(),t.openAndRerenderSlot(i.itemType,i.itemId,"visibilityTab").then(function(t){t.visible&&!t.restricted||e.checkAndAlertOnComponentVisibility({itemId:t.uuid,itemType:t.itemtype,catalogVersion:t.catalogVersion,restricted:t.restricted,slotId:i.slotId,visible:t.visible})})},this.description=s,this.hyperlinkLabel="se.cms.component.visibility.alert.hyperlink"}],timeoutDuration:6e3})}.bind(this))},new c}])},function(e,t){angular.module("clonePageWizardServiceModule",["createPageServiceModule","newPageDisplayConditionModule","yLoDashModule","smarteditServicesModule","selectPageTypeModule","selectPageTemplateModule","contextAwarePageStructureServiceModule","confirmationModalServiceModule","resourceLocationsModule","typeStructureRestServiceModule","pageDisplayConditionsServiceModule","componentCloneOptionFormModule","componentCloneInfoFormModule","restrictionsStepHandlerFactoryModule","cmsitemsRestServiceModule","genericEditorModule","pageRestrictionsModule","restrictionsServiceModule","pageRestrictionsInfoMessageModule","selectTargetCatalogVersionModule","clonePageAlertServiceModule","pageFacadeModule","functionsModule","cmsSmarteditServicesModule"]).service("clonePageWizardService",["modalWizard","catalogService","pageFacade",function(e,t,n){this.openClonePageWizard=function openClonePageWizard(i){return(i?t.retrieveUriContext():n.retrievePageUriContext()).then(function(t){return e.open({controller:"clonePageWizardController",controllerAs:"clonePageWizardCtrl",properties:{uriContext:t,basePageUUID:i?i.uuid:void 0}})})}}]).factory("ClonePageBuilderFactory",["$q","lodash","isBlank","contextAwarePageStructureService","pageInfoService","typeStructureRestService","cmsitemsRestService","catalogService",function(e,t,n,i,o,a,r,s){var c=function(i,c,l){this.restrictionsStepHandler=i,this.pageInfoStructure=[],this.basePage={},this.pageData={},this.componentCloneOption=null,this.basePageInfoAvailable=!1,function(t){return n(t)?o.getPageUUID():e.when(t)}(c).then(function(n){e.all([r.getById(n),s.getCatalogVersionUUid(l)]).then(function(e){this.basePage=e[0],this.pageData=t.cloneDeep(this.basePage),this.pageData.catalogVersion=e[1],this.pageData.pageUuid=this.basePage.uuid,delete this.pageData.uuid,this.basePageInfoAvailable=!0,r.getById(this.basePage.masterTemplate).then(function(e){this.pageData.template=e.uid}.bind(this)),a.getStructureByTypeAndMode(this.pageData.typeCode,"DEFAULT",{getWholeStructure:!0}).then(function(e){this.pageData.type=e.type}.bind(this))}.bind(this))}.bind(this))};return c.prototype._updatePageInfoFields=function(){void 0!==this.pageData.defaultPage&&(this.pageData.typeCode?i.getPageStructureForNewPage(this.pageData.typeCode,this.pageData.defaultPage).then(function(e){this.pageInfoStructure=e}.bind(this)):this.pageInfoStructure=[])},c.prototype.getPageTypeCode=function(){return this.pageData.typeCode},c.prototype.getPageTemplate=function(){return this.pageData.template},c.prototype.getPageLabel=function(){return this.pageData.label},c.prototype.getPageInfo=function(){return this.pageData},c.prototype.getBasePageInfo=function(){return this.basePage},c.prototype.getPageProperties=function(){var e={};return e.type=this.pageData.type,e.typeCode=this.pageData.typeCode,e.template=this.pageData.template,e.onlyOneRestrictionMustApply=this.pageData.onlyOneRestrictionMustApply,e.catalogVersion=this.pageData.catalogVersion,e},c.prototype.getPageInfoStructure=function(){return this.pageInfoStructure},c.prototype.getPageRestrictions=function(){return this.pageData.restrictions||[]},c.prototype.getComponentCloneOption=function(){return this.componentCloneOption},c.prototype.displayConditionSelected=function(e){var t=e.isPrimary;this.pageData.defaultPage=t,this.pageData.homepage=e.homepage,t?(this.pageData.label=this.basePage.label,this.pageData.restrictions&&delete this.pageData.restrictions,this.restrictionsStepHandler.hideStep()):(this.pageData.label=e.primaryPage?e.primaryPage.label:"",this.restrictionsStepHandler.showStep()),this.pageData.uid="",this._updatePageInfoFields()},c.prototype.onTargetCatalogVersionSelected=function(e){this.targetCatalogVersion=e,this.pageData.catalogVersion=e.uuid},c.prototype.componentCloneOptionSelected=function(e){this.componentCloneOption=e},c.prototype.restrictionsSelected=function(e,t){this.pageData.onlyOneRestrictionMustApply=e,this.pageData.restrictions=t},c.prototype.getTargetCatalogVersion=function(){return this.targetCatalogVersion},c.prototype.isBasePageInfoAvailable=function(){return this.basePageInfoAvailable},c}]).controller("clonePageWizardController",["$q","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","lodash","wizardManager","ClonePageBuilderFactory","restrictionsStepHandlerFactory","experienceService","confirmationModalService","cmsitemsRestService","systemEventService","pageRestrictionsFacade","restrictionsService","sharedDataService","clonePageAlertService","alertService","pageFacade","pageSynchronizationService",function(e,t,n,i,o,a,r,s,c,l,d,p,u,g,m,h,f){this.uriContext=i.properties.uriContext,this.callbacks={},this.basePageUUID=i.properties.basePageUUID;var v=!1,y=this;this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageRestrictionsStepTemplate.html"};var S={},C=a.createRestrictionsStepHandler(i,S,this.restrictionStepProperties),b="cloneOptions",T="pageInfo",E=this.restrictionStepProperties.id;this.pageBuilder=new o(C,this.basePageUUID,this.uriContext),this.restrictionsEditorFunctionBindings=S,this.typeChanged=!0,this.infoChanged=!0,this.model={page:{},sharedPage:{}},this.getWizardConfig=function(){return{isFormValid:this.isFormValid.bind(this),onNext:this.onNext.bind(this),onDone:this.onDone.bind(this),onCancel:this.onCancel,steps:[{id:b,name:"se.cms.clonepagewizard.pagecloneoptions.tabname",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageOptionsStepTemplate.html"},{id:T,name:"se.cms.clonepagewizard.pageinfo.tabname",title:"se.cms.clonepagewizard.pageclone.title",templateUrl:"clonePageInfoStepTemplate.html"}]}}.bind(this),this.onCancel=function onCancel(){return s.confirm({description:"se.editor.cancel.confirm"})},this.isFormValid=function(e){switch(e){case b:return!0;case T:return!v&&y.callbacks.isValidPageInfo&&y.callbacks.isValidPageInfo();case E:return!v&&this.pageBuilder.getPageRestrictions().length>0}return!1},this.onNext=function(){return e.when(!0)},this.onDone=function(){return v=!0,this.callbacks.savePageInfo().then(function(n){var o=this._preparePagePayload(n);return this.pageBuilder.getTargetCatalogVersion()&&(o.siteId=this.pageBuilder.getTargetCatalogVersion().siteId,o.catalogId=this.pageBuilder.getTargetCatalogVersion().catalogId,o.version=this.pageBuilder.getTargetCatalogVersion().version),u.get("experience").then(function(n){return h.createPageForSite(o,o.siteId).then(function(e){return f.getSyncStatus(o.pageUuid,this.uriContext,!0),n.catalogDescriptor.catalogVersionUuid===e.catalogVersion?r.loadExperience({siteId:o.siteId,catalogId:o.catalogId,catalogVersion:o.version,pageId:e.uid}):g.displayClonePageAlert(e),m.showSuccess({message:"se.cms.clonepage.alert.success"})},function(n){return v=!1,l.publishAsync(t,{messages:n.data.errors}),n.data.errors.find(function(e){return 0===e.subject.indexOf("restrictions")})||i.goToStepWithId(T),e.reject()})}.bind(this))}.bind(this),function(){v=!1})},this._preparePagePayload=function(e){var t=n.cloneDeep(e);return n.merge(t,this.pageBuilder.getPageProperties()),t.cloneComponents="clone"===this.pageBuilder.getComponentCloneOption(),t.itemtype=e.typeCode,this.isRestrictionsActive()&&(t.restrictions=this.pageBuilder.getPageRestrictions()),t}.bind(this),this.getPageTypeCode=function(){return this.pageBuilder.getPageTypeCode()}.bind(this),this.getPageLabel=function(){return this.pageBuilder.getPageLabel()}.bind(this),this.getPageTemplate=function(){return this.pageBuilder.getPageTemplate()}.bind(this),this.getPageInfo=function getPageInfo(){var e=this.pageBuilder.getPageInfo();return e.uriContext=this.uriContext,e}.bind(this),this.getBasePageInfo=function getBasePageInfo(){var e=this.pageBuilder.getBasePageInfo();return e.uriContext=this.uriContext,e}.bind(this),this.getPageRestrictions=function(){return this.pageBuilder.getPageRestrictions()}.bind(this),this.variationResult=function(e){this.infoChanged=!0,this.pageBuilder.displayConditionSelected(e)}.bind(this),this.onTargetCatalogVersionSelected=function(e){this.pageBuilder.onTargetCatalogVersionSelected(e)}.bind(this),this.triggerUpdateCloneOptionResult=function(e){this.pageBuilder.componentCloneOptionSelected(e)}.bind(this),this.getPageInfoStructure=function getPageInfoStructure(){return this.pageBuilder.getPageInfoStructure()}.bind(this),this.restrictionsResult=function(e,t){this.pageBuilder.restrictionsSelected(e,t)}.bind(this),this.isRestrictionsActive=function isRestrictionsActive(){return!(this.typeChanged&&i.getCurrentStepId()!==E||(this.typeChanged=!1,0))}.bind(this),this.isPageInfoActive=function isPageInfoActive(){return!(this.infoChanged&&i.getCurrentStepId()!==T||(this.infoChanged=!1,0))}.bind(this),this.resetQueryFilter=function(){this.query.value=""}.bind(this),this.getRestrictionTypes=function(){return d.getRestrictionTypesByPageType(this.getPageTypeCode())}.bind(this),this.getSupportedRestrictionTypes=function(){return p.getSupportedRestrictionTypeCodes()},this.getTargetCatalogVersion=function(){return this.pageBuilder.getTargetCatalogVersion()}.bind(this),this.isBasePageInfoAvailable=function(){return this.pageBuilder.isBasePageInfoAvailable()}.bind(this)}])},function(e,t){angular.module("contextAwareCatalogModule",["resourceLocationsModule"]).service("contextAwareCatalogService",["$q","catalogService","PRODUCT_CATEGORY_SEARCH_RESOURCE_URI","PRODUCT_CATEGORY_RESOURCE_URI","PRODUCT_LIST_RESOURCE_API","PRODUCT_RESOURCE_API","PAGES_LIST_RESOURCE_URI","sharedDataService",function(e,t,n,i,o,a,r,s){this._getSearchUriByProductCatalogIdAndUriConstant=function(n,i){return t.getActiveProductCatalogVersionByCatalogId(n).then(function(t){var o=i.replace(/:catalogId/gi,n).replace(/:catalogVersion/gi,t);return e.when(o)})},this._getItemUriByUriConstant=function(t){var n=t.replace(/:siteUID/gi,"CURRENT_CONTEXT_SITE_ID");return e.when(n)},this._getContentPageUri=function(){return s.get("experience").then(function(n){var i=n.catalogDescriptor.catalogId;return t.getActiveContentCatalogVersionByCatalogId(i).then(function(t){var n=r.replace(/:catalogId/gi,i).replace(/:catalogVersion/gi,t);return e.when(n)})})},this.getProductCategorySearchUri=function(e){return this._getSearchUriByProductCatalogIdAndUriConstant(e,n)},this.getProductCategoryItemUri=function(){return this._getItemUriByUriConstant(i)},this.getProductSearchUri=function(e){return this._getSearchUriByProductCatalogIdAndUriConstant(e,o)},this.getProductItemUri=function(){return this._getItemUriByUriConstant(a)},this.getContentPageSearchUri=function(){return this._getContentPageUri().then(function(t){return e.when(t+"?typeCode=ContentPage")})},this.getContentPageItemUri=function(){return this._getContentPageUri()}}])},function(e,t){angular.module("contextAwarePageStructureServiceModule",["typeStructureRestServiceModule","pageServiceModule"]).value("PAGE_STRUCTURE_PRE_ORDER",["typeCode","template","name","label","uid","title"]).value("PAGE_STRUCTURE_POST_ORDER",["creationtime","modifiedtime"]).service("contextAwarePageStructureService",["$q","typeStructureRestService","pageService","PAGE_STRUCTURE_PRE_ORDER","PAGE_STRUCTURE_POST_ORDER",function(e,t,n,i,o){function moveElement(e,t,n){return n>=e.length&&(n=Math.max(0,e.length-1)),e.splice(n,0,e.splice(t,1)[0]),e}function getOrderedFields(e){var t;function isPreMatching(e){return e.qualifier===i[t]}function isPostMatching(e){return e.qualifier===o[t]}if(i)for(t=i.length-1;t>=0;t--)moveElement(e,e.findIndex(isPreMatching),0);if(o)for(t=0;t<o.length;t++)moveElement(e,e.findIndex(isPostMatching),e.length);return e}function setLabelEditability(e,t){var n=e.findIndex(function(e){return"label"===e.qualifier});-1!==n&&!1!==e[n].editable&&(e[n].editable=t)}function getFields(e){return t.getStructureByType(e).then(function(e){return e.push({cmsStructureType:"DisplayConditionEditor",i18nKey:"type.abstractpage.displayCondition.name",qualifier:"displayCondition"},{cmsStructureType:"ShortString",i18nKey:"se.cms.pageinfo.page.type",qualifier:"typeCode",editable:!1}),e})}function removeField(e,t){var n=e.findIndex(function(e){return e.qualifier===t});-1!==n&&e.splice(n,1)}this.getPageStructureForNewPage=function getPageStructureForNewPage(e,t){return getFields(e).then(function(n){return"ContentPage"===e&&setLabelEditability(n,t),removeField(n,"creationtime"),removeField(n,"modifiedtime"),removeField(n,"displayCondition"),removeField(n,"restrictions"),{attributes:getOrderedFields(n),category:"PAGE"}})},this.getPageStructureForPageEditing=function getPageStructureForPageEditing(e,t){return getFields(e).then(function(i){var o=["uid","creationtime","modifiedtime"];return i.filter(function(e){return o.indexOf(e.qualifier)>=0}).forEach(function(e){e.editable=!1}),"ContentPage"===e?n.isPagePrimary(t).then(function(e){return setLabelEditability(i,e),{attributes:getOrderedFields(i),category:"PAGE"}}):{attributes:getOrderedFields(i),category:"PAGE"}})},this.getPageStructureForViewing=function getPageStructureForViewing(e){return getFields(e).then(function(e){return e.forEach(function(e){e.editable=!1}),removeField(e,"typeCode"),removeField(e,"template"),removeField(e,"displayCondition"),removeField(e,"restrictions"),{attributes:getOrderedFields(e),category:"PAGE"}})}}])},function(e,t){angular.module("genericEditorModalServiceModule",["confirmationModalServiceModule","coretemplates","editorTabsetModule","smarteditServicesModule","modalServiceModule","yLoDashModule","genericEditorModule","functionsModule"]).factory("genericEditorModalService",["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES","TYPES_RESOURCE_URI","CMS_LINK_TO_RELOAD_STRUCTURE_EVENT_ID","CONTEXT_SITE_ID","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","confirmationModalService",function(e,t,n,i,o,a,r,s){function GenericEditorModalService(){}return GenericEditorModalService.prototype.open=function(c,l,d,p){return e.open({title:c.title,titleSuffix:"se.cms.editor.title.suffix",templateUrl:"genericEditorModalTemplate.html",controller:["modalManager","systemEventService","$scope","$log","$q","lodash","generateIdentifier",function(e,t,n,l,u,g,m){this.isDirty=!1,this.controls={},this.editorStackId=c.editorStackId,this.data=g.cloneDeep(c),this.genericEditorId=m(),this.getApi=function(e){this.controls.genericEditorAPI=e,this.data.targetedQualifier&&e.switchToTabContainingQualifier(this.data.targetedQualifier),this.data.initialDirty&&e.considerFormDirty()}.bind(this),this.onSave=function(){return this.controls.submit().then(function(e){return d(e),this.removeEventListeners(),e}.bind(this))},this.onCancel=function(){var e=u.defer();return this.isDirty?s.confirm({description:"se.editor.cancel.confirm"}).then(function(){this.controls.reset().then(function(){this.removeEventListeners(),e.resolve()}.bind(this),function(){e.reject()})}.bind(this),function(){e.reject()}):(this.removeEventListeners(),e.resolve()),e.promise},this.init=function(){e.setDismissCallback(this.onCancel.bind(this)),e.setButtonHandler(function(e){switch(e){case"save":return this.onSave();case"cancel":return this.onCancel();default:l.error("A button callback has not been registered for button with id",e)}}.bind(this)),n.$watch(function(){return["function"==typeof this.controls.isDirty&&this.controls.isDirty(),this.controls.genericEditorAPI&&this.controls.genericEditorAPI.isSubmitDisabled()]}.bind(this),function(t){this.isDirty=t[0],t[1]?e.disableButton("save"):e.enableButton("save")}.bind(this),!0),this.structure=c.structure,this.structure||(this.structureApi=this.getStructureApiByMode("DEFAULT")),this.changeStructureEventListener=t.subscribe(o,this.onChangeStructureEvent.bind(this)),this.unrelatedValidationErrorsEvent=t.subscribe(r,this.onUnrelatedErrors.bind(this)),this.contentApi=c.contentApi||"/cmswebservices/v1/sites/"+a+"/cmsitems"},this.onChangeStructureEvent=function(e,t){this.genericEditorId===t.editorId&&(t.structureApiMode?(this.structure=null,this.structureApi=this.getStructureApiByMode(t.structureApiMode)):t.structure&&(this.structureApi=null,this.structure=t.structure),this.data.content=t.content)},this.onUnrelatedErrors=function(e,t){t.sourceGenericEditorId===c.componentUuid&&p&&p(t.messages,this)};var h=i+"?code=:smarteditComponentType&mode=:structureApiMode";this.getStructureApiByMode=function(e){return h.replace(/:structureApiMode/gi,e)},this.removeEventListeners=function(){this.unrelatedValidationErrorsEvent(),this.changeStructureEventListener()}}],buttons:[{id:"cancel",label:"se.cms.component.confirmation.modal.cancel",style:n.SECONDARY,action:t.DISMISS},{id:"save",label:"se.cms.component.confirmation.modal.save",action:t.CLOSE,disabled:!0}]})},new GenericEditorModalService}])},function(e,t){angular.module("displayConditionsEditorModelModule",["displayConditionsFacadeModule","smarteditServicesModule"]).service("displayConditionsEditorModel",["displayConditionsFacade","$q","systemEventService",function(e,t,n){this._initModelForPrimary=function(t){e.getVariationsForPageUid(t).then(function(e){this.variations=e}.bind(this))},this._initModelForVariation=function(t){e.getPrimaryPageForVariationPage(t).then(function(e){this.associatedPrimaryPage=e,this.originalPrimaryPage=e}.bind(this)),this.isAssociatedPrimaryReadOnly="ContentPage"!==this.pageType,this.isAssociatedPrimaryReadOnly||e.getPrimaryPagesForVariationPageType(this.pageType).then(function(e){this.primaryPages=e}.bind(this))},this.initModel=function(t){this.pageUid=t,e.getPageInfoForPageUid(t).then(function(e){this.pageName=e.pageName,this.pageType=e.pageType,this.isPrimary=e.isPrimary,this.isPrimary?this._initModelForPrimary(t):this._initModelForVariation(t)}.bind(this))},this.setAssociatedPrimaryPage=function(e){n.publishAsync("EDIT_PAGE_ASSOCIATED_PRIMARY_UPDATED_EVENT",e),this.associatedPrimaryPage=e},this.save=function(){return this.isDirty()?e.updatePage(this.pageUid,{label:this.associatedPrimaryPage.label}):t.when(!0)},this.isDirty=function(){return!!this.originalPrimaryPage&&!!this.associatedPrimaryPage&&!angular.equals(this.originalPrimaryPage,this.associatedPrimaryPage)}}])},function(e,t){angular.module("pageDisplayConditionsServiceModule",[]).service("pageDisplayConditionsService",["catalogService",function(e){function getPageDisplayConditionsByPageType(t,n){var i=[];return function fetchDisplayConditionsForPageType(t,n){return e.getContentCatalogVersion(n).then(function(e){return e.pageDisplayConditions.find(function(e){return e.typecode===t})})}(t,n).then(function(e){return e&&e.options?(e.options.forEach(function(e){var t={label:e.label,description:e.label+".description",isPrimary:"PRIMARY"===e.id};i.push(t)}),i):[]})}this.getNewPageConditions=function(e,t){return getPageDisplayConditionsByPageType(e,t)}}])},function(e,t){angular.module("pageRestrictionsCriteriaModule",[]).service("pageRestrictionsCriteriaService",function(){var e={},t={};function setupCriteria(e,t,n){Object.defineProperty(e,"id",{writable:!1,value:t}),Object.defineProperty(e,"label",{writable:!1,value:"se.cms.restrictions.criteria."+t}),Object.defineProperty(e,"editLabel",{writable:!1,value:"se.cms.restrictions.criteria.select."+t}),Object.defineProperty(e,"value",{writable:!1,value:n})}setupCriteria(e,"all",!1),setupCriteria(t,"any",!0);var n=[e,t];this.getMatchCriteriaLabel=function(n){return n?t.label:e.label},this.getRestrictionCriteriaOptions=function(){return n},this.getRestrictionCriteriaOptionFromPage=function(n){return n&&"boolean"==typeof n.onlyOneRestrictionMustApply&&n.onlyOneRestrictionMustApply?t:e}})},function(e,t){angular.module("pageRestrictionsServiceModule",["pageRestrictionsRestServiceModule","restrictionsServiceModule","restrictionTypesServiceModule","yLoDashModule","cmsitemsRestServiceModule"]).service("pageRestrictionsService",["$q","lodash","pageRestrictionsRestService","restrictionsService","cmsitemsRestService",function(e,t,n,i,o){this.updateRestrictionsByPageUID=function(e,t){var i={pageid:e,pageRestrictionList:[]};return t.forEach(function(t){i.pageRestrictionList.push({restrictionId:t.uid,pageId:e})}),n.update(i)},this.getPageRestrictionsCountMapForCatalogVersion=function getPageRestrictionsCountMapForCatalogVersion(e,i,o){return n.getPagesRestrictionsForCatalogVersion(e,i,o).then(function(e){return t.countBy(e.pageRestrictionList,"pageId")})},this.getPageRestrictionsCountForPageUID=function getPageRestrictionsCountForPageUID(e){return n.getPagesRestrictionsForPageId(e).then(function(e){return e.pageRestrictionList.length})},this.isRestrictionTypeSupported=function isRestrictionTypeSupported(e){return this.getSupportedRestrictionTypeCodes().then(function(t){return t.indexOf(e)>=0})},this.getRestrictionsByPageUUID=function(e){return o.getById(e).then(function(e){return o.getByIds(e.restrictions)})}}])},function(e,t){angular.module("pageTypesRestrictionTypesServiceModule",["pageTypesRestrictionTypesRestServiceModule"]).service("pageTypesRestrictionTypesService",["pageTypesRestrictionTypesRestService",function(e){var t=null,n=this;this.getRestrictionTypeCodesForPageType=function(e){return n.getPageTypesRestrictionTypes().then(function(t){return(t=t.filter(function(t){return t.pageType===e})).map(function(e){return e.restrictionType})})},this.getPageTypesRestrictionTypes=function(){return t&&2!==t.$$state.status?t:t=e.getPageTypesRestrictionTypes().then(function(e){return e.pageTypeRestrictionTypeList})}}])},function(e,t){angular.module("restrictionTypesServiceModule",["pageTypesRestrictionTypesServiceModule","restrictionTypesRestServiceModule"]).service("restrictionTypesService",["$q","languageService","pageTypesRestrictionTypesService","restrictionTypesRestService",function(e,t,n,i){var o=null,a=this;this.getRestrictionTypesByPageType=function(e){return a.getRestrictionTypes().then(function(t){return n.getRestrictionTypeCodesForPageType(e).then(function(e){return t.filter(function(t){return e.indexOf(t.code)>=0})})})},this.getRestrictionTypes=function(){return o&&2!==o.$$state.status?o:o=i.getRestrictionTypes().then(function(e){return e.restrictionTypes})},this.getRestrictionTypeForTypeCode=function(e){return a.getRestrictionTypes().then(function(t){return t.find(function(t){return t.code===e})})}}])},function(e,t){angular.module("pageTemplateServiceModule",["resourceLocationsModule","yLoDashModule"]).constant("NON_SUPPORTED_TEMPLATES",["layout/landingLayout1Page","layout/landingLayout3Page","layout/landingLayout4Page","layout/landingLayout5Page","layout/landingLayout6Page","layout/landingLayoutPage","account/accountRegisterPage","checkout/checkoutRegisterPage"]).factory("pageTemplateService",["restServiceFactory","PAGE_TEMPLATES_URI","NON_SUPPORTED_TEMPLATES","lodash",function(e,t,n,i){var o=e.get(t);return{getPageTemplatesForType:function(e,t){var a=i.assign({pageTypeCode:t,active:!0},e);return o.get(a).then(function(e){return{templates:e.templates.filter(function(e){return-1===n.indexOf(e.frontEndName)})}})}}}])},function(e,t){angular.module("addPageServiceModule",["genericEditorModule","wizardServiceModule","functionsModule","pageTypeServiceModule","cmsitemsRestServiceModule","pageRestrictionsModule","restrictionsServiceModule","newPageDisplayConditionModule","yLoDashModule","smarteditServicesModule","selectPageTypeModule","selectPageTemplateModule","contextAwarePageStructureServiceModule","confirmationModalServiceModule","resourceLocationsModule","restrictionsStepHandlerFactoryModule","pageRestrictionsInfoMessageModule","pageFacadeModule"]).service("addPageWizardService",["modalWizard","catalogService",function(e,t){this.openAddPageWizard=function openAddPageWizard(){return t.retrieveUriContext().then(function(t){return e.open({controller:"addPageWizardController",controllerAs:"addPageWizardCtl",properties:{uriContext:t}})})}}]).factory("pageBuilderFactory",["contextAwarePageStructureService","catalogService",function(e,t){return{createPageBuilder:function(n,i){return new function PageBuilder(n,i){var o={},a={};function updatePageInfoFields(){void 0!==a.defaultPage&&(o.pageType?e.getPageStructureForNewPage(o.pageType.code,a.defaultPage).then(function(e){o.pageInfoFields=e}):o.pageInfoFields=[])}t.getCatalogVersionUUid(i).then(function(e){a.catalogVersion=e}),this.pageTypeSelected=function(e){o.pageType=e,o.pageTemplate=null,updatePageInfoFields()},this.pageTemplateSelected=function(e){o.pageTemplate=e},this.getPageTypeCode=function(){return o.pageType?o.pageType.code:null},this.getTemplateUuid=function(){return o.pageTemplate?o.pageTemplate.uuid:""},this.getPage=function(){return a.typeCode=o.pageType?o.pageType.code:null,a.itemtype=a.typeCode,a.type=o.pageType?o.pageType.type:null,a.masterTemplate=o.pageTemplate?o.pageTemplate.uuid:null,a.template=o.pageTemplate.uid,a},this.setPageUid=function(e){a.uid=e},this.setRestrictions=function(e,t){a.onlyOneRestrictionMustApply=e,a.restrictions=t},this.getPageInfoStructure=function(){return o.pageInfoFields},this.displayConditionSelected=function(e){var t=e.isPrimary;a.defaultPage=t,a.homepage=e.homepage,t?(a.label=null,n.hideStep()):(a.label=e.primaryPage?e.primaryPage.label:"",n.showStep()),updatePageInfoFields()}}(n,i)}}}]).controller("addPageWizardController",["$q","wizardManager","pageBuilderFactory","lodash","restrictionsStepHandlerFactory","experienceService","confirmationModalService","systemEventService","pageRestrictionsFacade","restrictionsService","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","pageFacade",function(e,t,n,i,o,a,r,s,c,l,d,p){this.uriContext=t.properties.uriContext,this.callbacks={},this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageRestrictionsStepTemplate.html"};var u=this,g={},m=o.createRestrictionsStepHandler(t,g,this.restrictionStepProperties),h="pageType",f="pageTemplate",v="pageDisplayCondition",y="pageInfo",S=m.getStepId();this.pageBuilder=n.createPageBuilder(m,this.uriContext),this.restrictionsEditorFunctionBindings=g,this.typeChanged=!0,this.infoChanged=!0,this.model={page:{},sharedPage:{}},this.getWizardConfig=function(){return{isFormValid:this.isFormValid.bind(this),onNext:this.onNext.bind(this),onDone:this.onDone.bind(this),onCancel:this.onCancel,steps:[{id:h,name:"se.cms.addpagewizard.pagetype.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageTypeStepTemplate.html"},{id:f,name:"se.cms.addpagewizard.pagetemplate.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageTemplateStepTemplate.html"},{id:v,name:"se.cms.addpagewizard.pageconditions.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageDisplayConditionStepTemplate.html"},{id:y,name:"se.cms.addpagewizard.pageinfo.tabname",title:"se.cms.addpagewizard.pagetype.title",templateUrl:"pageInfoStepTemplate.html"}]}}.bind(this),this.onCancel=function onCancel(){return r.confirm({description:"se.editor.cancel.confirm"})},this.isFormValid=function(e){switch(e){case h:return!!u.pageBuilder.getPageTypeCode();case f:return!!u.pageBuilder.getTemplateUuid();case v:return!0;case y:return u.callbacks.isDirtyPageInfo&&u.callbacks.isDirtyPageInfo()&&u.callbacks.isValidPageInfo&&u.callbacks.isValidPageInfo();case S:return m.isStepValid()}return!1},this.onNext=function(){return e.when(!0)},this.restrictionsResult=function(e,t){this.pageBuilder.setRestrictions(e,t)}.bind(this),this.onDone=function(){return u.callbacks.savePageInfo().then(function(n){return i.defaultsDeep(n,u.pageBuilder.getPage()),p.createPage(n).then(function(e){return u.pageBuilder.setPageUid(e.uid),a.loadExperience({siteId:u.uriContext.CURRENT_CONTEXT_SITE_ID,catalogId:u.uriContext.CURRENT_CONTEXT_CATALOG,catalogVersion:u.uriContext.CURRENT_CONTEXT_CATALOG_VERSION,pageId:u.pageBuilder.getPage().uid})},function(n){return s.publishAsync(d,{messages:n.data.errors}),n.data.errors.find(function(e){return 0===e.subject.indexOf("restrictions")})||t.goToStepWithId(y),e.reject()})})},this.typeSelected=function typeSelected(e){u.infoChanged=!0,u.typeChanged=!0,u.pageBuilder.pageTypeSelected(e)},this.templateSelected=function templateSelected(e){u.pageBuilder.pageTemplateSelected(e)},this.getPageTypeCode=function getPageTypeCode(){return u.pageBuilder.getPageTypeCode()},this.variationResult=function(e){u.infoChanged=!0,u.pageBuilder.displayConditionSelected(e)},this.getPageInfo=function getPageInfo(){var e=u.pageBuilder.getPage();return e.uriContext=u.uriContext,e}.bind(this),this.getPageInfoStructure=function getPageInfoStructure(){return u.pageBuilder.getPageInfoStructure()},this.isRestrictionsActive=function isRestrictionsActive(){return!(u.typeChanged&&t.getCurrentStepId()!==S||(u.typeChanged=!1,0))},this.isPageInfoActive=function isPageInfoActive(){return!(u.infoChanged&&t.getCurrentStepId()!==y||(u.infoChanged=!1,0))},this.resetQueryFilter=function(){this.query.value=""},this.getRestrictionTypes=function(){return c.getRestrictionTypesByPageType(this.getPageTypeCode())}.bind(this),this.getSupportedRestrictionTypes=function(){return l.getSupportedRestrictionTypeCodes()}}])},function(e,t){angular.module("pageListServiceModule",["pagesRestServiceModule"]).service("pageListService",["pagesRestService",function(e){this.getPageListForCatalog=function(t){return e.get(t)},this.getPageById=function(t){return e.getById(t)}}])},function(e,t){angular.module("pageServiceModule",["cmsitemsRestServiceModule","pagesFallbacksRestServiceModule","pagesRestServiceModule","pagesVariationsRestServiceModule","yLoDashModule"]).service("pageService",["cmsitemsRestService","pageInfoService","pagesFallbacksRestService","pagesRestService","pagesVariationsRestService","experienceService","lodash","$q","$routeParams","CONTEXT_SITE_ID","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION",function(e,t,n,i,o,a,r,s,c,l,d,p){this.getPrimaryPagesForPageType=function(t,n){var i=r.assign({},n||{},{typeCode:t,itemSearchParams:"defaultPage:true,pageStatus:ACTIVE",currentPage:0,pageSize:1e3});return e.get(i).then(function(e){return e.response})},this.isPagePrimary=function(e){return n.getFallbacksForPageId(e).then(function(e){return 0===e.length})},this.isPagePrimaryWithContext=function(e,t){return n.getFallbacksForPageIdAndContext(e,t).then(function(e){return 0===e.length})},this.getPrimaryPage=function(e){return n.getFallbacksForPageId(e).then(function(e){return e[0]?i.getById(e[0]):s.when()})},this.getVariationPages=function(e){return o.getVariationsForPrimaryPageId(e).then(function(e){return e.length>0?i.get({uids:e}):s.when([])})},this.updatePageById=function(e,t){return i.getById(e).then(function(n){return delete n.$promise,delete n.$resolved,t=r.assign({},n,t),i.update(e,t)})},this.getPageById=function(e){return i.getById(e)},this.getCurrentPageInfo=function(){return t.getPageUUID().then(function(t){return e.getById(t)})},this.getCurrentPageInfoByVersion=function(n){return t.getPageUUID().then(function(t){return e.getByIdAndVersion(t,n)})},this.buildUriContextForCurrentPage=function(){var e={};return c.siteId&&c.catalogId&&c.catalogVersion&&(e[l]=c.siteId,e[d]=c.catalogId,e[p]=c.catalogVersion),r.isEmpty(e)?a.getCurrentExperience().then(function(t){return e[l]=t.pageContext.siteId,e[d]=t.pageContext.catalogId,e[p]=t.pageContext.catalogVersion,e}):s.when(e)}}])},function(e,t){angular.module("restrictionsStepHandlerFactoryModule",[]).factory("restrictionsStepHandlerFactory",["$q",function(e){return{createRestrictionsStepHandler:function(t,n,i){return new function RestrictionsStepHandler(t,n,i){var o=i,a=function(){return t.containsStep(this.getStepId())}.bind(this);this.hideStep=function hideStep(){a()&&t.removeStepById(this.getStepId())},this.showStep=function showStep(){a()||t.addStep(o,t.getStepsCount())},this.isStepValid=function isStepValid(){return n.isDirty&&n.isDirty()},this.save=function save(){return n.save&&n.save()||e.when()},this.getStepId=function getStepId(){return o.id},this.goToStep=function goToStep(){t.goToStepWithId(this.getStepId())}}(t,n,i)}}}])},function(e,t){angular.module("removeComponentServiceModule",["removeComponentServiceInterfaceModule","smarteditServicesModule"]).factory("removeComponentService",["$q","$log","extend","gatewayProxy","RemoveComponentServiceInterface",function(e,t,n,i,o){var a=function(e){this.gatewayId=e,i.initForService(this,["removeComponent"])};return new(a=n(o,a))("RemoveComponent")}])},function(e,t){angular.module("restrictionsCriteriaServiceModule",[]).service("restrictionsCriteriaService",function(){var e={},t={};function setupCriteria(e,t,n){Object.defineProperty(e,"id",{writable:!1,value:t}),Object.defineProperty(e,"label",{writable:!1,value:"se.cms.restrictions.criteria."+t}),Object.defineProperty(e,"editLabel",{writable:!1,value:"se.cms.restrictions.criteria.select."+t}),Object.defineProperty(e,"value",{writable:!1,value:n})}setupCriteria(e,"all",!1),setupCriteria(t,"any",!0);var n=[e,t];this.getRestrictionCriteriaOptions=function(){return n}})},function(e,t){angular.module("restrictionsServiceModule",["structuresRestServiceModule","typeStructureRestServiceModule","yLoDashModule","cmsitemsRestServiceModule"]).service("restrictionsService",["lodash","structureModeManagerFactory","structuresRestService","typeStructureRestService","cmsitemsRestService",function(e,t,n,i,o){var a=t.createModeManager(["add","edit","create"]);this.getStructureApiUri=function getStructureApiUri(e,t){return a.validateMode(e),n.getUriForContext(e,t)},this.getPagedRestrictionsForType=function(e,t,n,i){return o.get({pageSize:n,currentPage:i,mask:t,sort:"name:ASC",params:"typeCode:"+e})},this.getSupportedRestrictionTypeCodes=function getSupportedRestrictionTypeCodes(){return i.getStructuresByCategory("RESTRICTION").then(function(t){return e.map(t,function(e){return e.code})})}}])},function(e,t){angular.module("rulesAndPermissionsRegistrationModule",["catalogVersionPermissionModule","catalogVersionRestServiceModule","pageServiceModule","pageVersionsModule","cmsSmarteditServicesModule","smarteditServicesModule","cmsitemsRestServiceModule"]).run(["catalogService","catalogVersionPermissionService","catalogVersionRestService","pageService","permissionService","sharedDataService","cMSModesService","typePermissionsRestService","experienceService","pageInfoService","cmsitemsRestService","$q",function(e,t,n,i,o,a,r,s,c,l,d,p){var u=function(e){return!0===e.reduce(function(e,t){return e&&t},!0)},g=function(){return!1};o.registerRule({names:["se.write.page","se.write.slot","se.write.component","se.write.to.current.catalog.version"],verify:function(e){var n=e.map(function(e){return e.context?t.hasWritePermission(e.context.catalogId,e.context.catalogVersion):t.hasWritePermissionOnCurrent()});return p.all(n).then(u,g)}}),o.registerRule({names:["se.sync.catalog"],verify:function(e){var n=e.map(function(e){return e.context?t.hasSyncPermission(e.context.catalogId,e.context.catalogVersion,e.context.targetCatalogVersion):t.hasSyncPermissionFromCurrentToActiveCatalogVersion()});return p.all(n).then(u,g)}}),o.registerRule({names:["se.approval.status.page"],verify:function(){return i.getCurrentPageInfo().then(function(e){return"APPROVED"===e.approvalStatus})}}),o.registerRule({names:["se.read.page","se.read.slot","se.read.component","se.read.current.catalog.version"],verify:function(){return t.hasReadPermissionOnCurrent()}}),o.registerRule({names:["se.page.belongs.to.experience"],verify:function(){return a.get("experience").then(function(e){return e.pageContext&&e.pageContext.catalogVersionUuid===e.catalogDescriptor.catalogVersionUuid})}}),o.registerRule({names:["se.cloneable.page"],verify:function(){return a.get("experience").then(function(e){var t={CURRENT_CONTEXT_SITE_ID:e.pageContext.siteId,CURRENT_CONTEXT_CATALOG:e.pageContext.catalogId,CURRENT_CONTEXT_CATALOG_VERSION:e.pageContext.catalogVersion};return i.getCurrentPageInfo().then(function(i){return n.getCloneableTargets(t).then(function(t){return e.pageContext.active?t.versions.length>0&&i.defaultPage&&!i.copyToCatalogsDisabled:t.versions.length>0})})})}}),o.registerRule({names:["se.content.catalog.non.active"],verify:function(){return e.isContentCatalogVersionNonActive()}}),o.registerRule({names:["se.not.versioning.perspective"],verify:function(){return r.isVersioningPerspectiveActive().then(function(e){return!e})}}),o.registerRule({names:["se.version.page.selected"],verify:function(){return c.getCurrentExperience().then(function(e){return!!e.versionId})}}),o.registerRule({names:["se.version.page.not.selected"],verify:function(){return c.getCurrentExperience().then(function(e){return!e.versionId})}});var m=function(e,t){o.registerRule({names:[e],verify:function(e){var n=e.map(function(e){return t([e.context.typeCode]).then(function(t){return t[e.context.typeCode]})});return p.all(n).then(u,g)}})};m("se.has.change.permissions.on.type",s.hasUpdatePermissionForTypes.bind(s)),m("se.has.create.permissions.on.type",s.hasCreatePermissionForTypes.bind(s)),m("se.has.remove.permissions.on.type",s.hasDeletePermissionForTypes.bind(s));var h=function(e,t){o.registerRule({names:[e],verify:function(){return l.getPageUUID().then(function(e){return d.getById(e).then(function(e){return t([e.typeCode]).then(function(t){return t[e.typeCode]})})})}})};h("se.has.change.type.permissions.on.current.page",s.hasUpdatePermissionForTypes.bind(s)),h("se.has.create.type.permissions.on.current.page",s.hasCreatePermissionForTypes.bind(s)),h("se.has.read.type.permissions.on.current.page",s.hasReadPermissionForTypes.bind(s));var f=function(e,t,n){o.registerRule({names:[e],verify:function(){return n([t]).then(function(e){return e[t]})}})};f("se.has.read.permission.on.version.type","CMSVersion",s.hasReadPermissionForTypes.bind(s)),f("se.has.create.permission.on.version.type","CMSVersion",s.hasCreatePermissionForTypes.bind(s)),f("se.has.remove.permission.on.version.type","CMSVersion",s.hasDeletePermissionForTypes.bind(s)),f("se.has.change.permission.on.version.type","CMSVersion",s.hasUpdatePermissionForTypes.bind(s)),o.registerPermission({aliases:["se.add.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience","se.has.change.type.permissions.on.current.page"]}),o.registerPermission({aliases:["se.read.page"],rules:["se.read.page"]}),o.registerPermission({aliases:["se.edit.page"],rules:["se.write.page"]}),o.registerPermission({aliases:["se.sync.catalog"],rules:["se.sync.catalog"]}),o.registerPermission({aliases:["se.sync.slot.context.menu","se.sync.page","se.sync.slot.indicator"],rules:["se.sync.catalog","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.edit.navigation"],rules:["se.write.component"]}),o.registerPermission({aliases:["se.context.menu.remove.component"],rules:["se.write.slot","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.slot.context.menu.shared.icon","se.slot.context.menu.unshared.icon"],rules:["se.read.slot"]}),o.registerPermission({aliases:["se.slot.context.menu.visibility"],rules:["se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.clone.page"],rules:["se.cloneable.page","se.has.create.type.permissions.on.current.page"]}),o.registerPermission({aliases:["se.context.menu.edit.component"],rules:["se.write.component","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.context.menu.drag.and.drop.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.edit.page.link","se.delete.page.menu"],rules:["se.write.page","se.page.belongs.to.experience","se.not.versioning.perspective","se.has.change.type.permissions.on.current.page"]}),o.registerPermission({aliases:["se.shared.slot.override.options","se.revert.to.shared.slot.link"],rules:["se.write.page","se.page.belongs.to.experience","se.not.versioning.perspective"]}),o.registerPermission({aliases:["se.clone.component"],rules:["se.write.component","se.page.belongs.to.experience"]}),o.registerPermission({aliases:["se.edit.page.type","se.delete.page.type","se.restore.page.type"],rules:["se.has.change.permissions.on.type"]}),o.registerPermission({aliases:["se.clone.page.type"],rules:["se.has.create.permissions.on.type"]}),o.registerPermission({aliases:["se.permanently.delete.page.type"],rules:["se.has.remove.permissions.on.type"]}),o.registerPermission({aliases:["se.version.page"],rules:["se.write.page","se.page.belongs.to.experience","se.content.catalog.non.active","se.has.read.permission.on.version.type","se.has.read.type.permissions.on.current.page"]}),o.registerPermission({aliases:["se.edit.version.page"],rules:["se.write.to.current.catalog.version","se.has.change.permission.on.version.type"]}),o.registerPermission({aliases:["se.create.version.page"],rules:["se.version.page.not.selected","se.page.belongs.to.experience","se.has.create.permission.on.version.type","se.has.read.type.permissions.on.current.page"]});var v=["se.version.page.selected","se.page.belongs.to.experience","se.has.read.permission.on.version.type","se.has.create.permission.on.version.type","se.has.change.type.permissions.on.current.page"];o.registerPermission({aliases:["se.rollback.version.page"],rules:v}),o.registerPermission({aliases:["se.rollback.version.page.versions.menu"],rules:v.filter(function(e){return"se.version.page.selected"!==e})}),o.registerPermission({aliases:["se.delete.version.page"],rules:["se.has.remove.permission.on.version.type"]})}])},function(e,t){angular.module("slotRestrictionsServiceModule",["yLoDashModule"]).service("slotRestrictionsService",["gatewayProxy",function(e){this.getAllComponentTypesSupportedOnPage=function(){},this.getSlotRestrictions=function(){},e.initForService(this,["getAllComponentTypesSupportedOnPage","getSlotRestrictions"],"SLOT_RESTRICTIONS")}])},function(e,t){angular.module("cmssmarteditContainerTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/cmsItemDropdownTemplate.html",'<div class="cms-nested-component-template">\n    <div data-recompile-dom="cmsItemDropdownCtrl._recompileDom"\n        class="cms-nested-component-select">\n        <se-dropdown data-field="cmsItemDropdownCtrl.field"\n            data-qualifier="cmsItemDropdownCtrl.qualifier"\n            data-model="cmsItemDropdownCtrl.model"\n            data-id="cmsItemDropdownCtrl.id"\n            data-item-template-url="cmsItemDropdownCtrl.itemTemplateUrl"\n            data-get-api="cmsItemDropdownCtrl.configureSeDropdown($api)"></se-dropdown>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/cmsItemDropdownWrapperTemplate.html",'<cms-item-dropdown data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-editor-stack-id="editorStackId"\n    data-id="id"></cms-item-dropdown>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/components/nestedComponentTemplate.html",'<div class="cms-nested-component"\n    data-component-id=\'{{$ctrl.item.uid}}\'>\n    <span class="y-select-item-printer cms-nested-component__item"\n        data-ng-if="$ctrl.isSelected"\n        data-ng-click="$event.stopPropagation(); $ctrl.onComponentClick();">\n        <img data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            class="cms-nested-component__image"\n            alt="{{$ctrl.item.name}}"\n            title="{{$ctrl.item.name}} - {{$ctrl.item.typeCode}}" />\n        <span class="cms-nested-component__data">\n            <p class="cms-nested-component__name">{{$ctrl.item.name}}</p>\n            <p class="cms-nested-component__type">{{$ctrl.item.typeCode}}</p>\n        </span>\n    </span>\n    <div class="y-select-item-printer cms-nested-component__result-item"\n        data-ng-if="!$ctrl.isSelected">\n        <span class="cms-nested-component__result-name">{{$ctrl.item.name}}</span>\n        <span class="cms-nested-component__result-code">{{$ctrl.item.typeCode}}</span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/components/subTypeSelectorTemplate.html",'<div class="list-group cms-sub-type-selector">\n    <button type="button"\n        class="cms-sub-type-selector_button list-group-item"\n        data-ng-repeat="subType in $ctrl.subTypes"\n        data-ng-click="$ctrl.onChange(subType)">{{ subType.label | translate }}</button>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/cmsItemDropdown/templates/cmsItemSearchTemplate.html",'<nested-component data-item="item"\n    data-qualifier="ySelect.id"\n    data-is-selected="selected"></nested-component>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/componentMenuTemplate.html",'<div class="se-component-menu"\n    data-recompile-dom="$ctrl._recompileDom"\n    data-ng-class="{ \'se-component-menu__localized\': $ctrl.hasMultipleContentCatalogs }">\n\n    <y-tabset class="se-component-menu--tabs"\n        data-tabs-list="$ctrl.tabsList"\n        data-model="$ctrl.tabsList"\n        data-num-tabs-displayed="2">\n    </y-tabset>\n\n    <div class="se-component-menu--help-tip"\n        data-translate="se.cms.componentmenu.label.draganddrop"></div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/componentMenuWrapperTemplate.html",'<component-menu action-item="item"></component-menu>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/catalogVersionTemplate.html",'<div class="se-component-menu--select-local">\n    <span class="hyicon hyicon-globe se-component-menu--select-globe"\n        data-ng-if="item.isCurrentCatalog == false"></span>\n    <span class="se-component-menu--select-text">{{item.catalogName | l10n}} - {{item.catalogVersionId}}</span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentInfoPopoverTemplate.html",'<div data-translate="se.cms.component.display.off.tooltip"></div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentItemTemplate.html",'<div class="se-component-item">\n    <div class="se-component-item--disabled-overlay"\n        data-ng-if="$ctrl.componentDisabled"\n        data-y-popover\n        data-trigger="\'hover\'"\n        data-placement="\'bottom\'"\n        data-template="$ctrl.getTemplateInfoForNonCloneableComponent()"></div>\n    <div class="smartEditComponent se-component-item--image"\n        data-smartedit-component-id="{{$ctrl.componentInfo.uid}}"\n        data-smartedit-component-uuid="{{$ctrl.componentInfo.uuid}}"\n        data-smartedit-component-type="{{$ctrl.componentInfo.typeCode}}">\n        <img data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            class="se-component-item--image-element"\n            alt="{{$ctrl.componentInfo.name}}"\n            title="{{$ctrl.componentInfo.name}} - {{$ctrl.componentInfo.typeCode}}" />\n    </div>\n    <div class="se-component-item--details-container">\n        <div class="se-component-item--details"\n            title="{{$ctrl.componentInfo.name}} - {{$ctrl.componentInfo.typeCode}}">\n            <div class="se-component-item--details-name">{{$ctrl.componentInfo.name}}</div>\n            <div class="se-component-item--details-type">{{$ctrl.componentInfo.typeCode}}</div>\n        </div>\n        <div data-ng-if="!$ctrl.componentInfo.visible"\n            class="se-component-item--visibility"\n            data-y-popover\n            data-trigger="\'hover\'"\n            data-placement="\'bottom\'"\n            data-template-url="\'componentInfoPopoverTemplate.html\'">\n            <span class="hyicon hyicon-unpowered"></span>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentSearchTemplate.html",'<div class="se-input-group se-component-search">\n    <div class="se-input-group--addon se-component-search--addon">\n        <span class="hyicon hyicon-search se-component-search--search-icon"></span>\n    </div>\n    <input type="text"\n        class="se-input-group--input se-component-search--input"\n        name="search-term"\n        data-ng-model="$ctrl.searchTerm"\n        data-ng-model-options="{debounce: 500}"\n        placeholder="{{$ctrl.placeholder | translate}}">\n    <div data-ng-show="$ctrl.showResetButton"\n        class="se-input-group--addon se-component-search--addon"\n        data-ng-click="$ctrl._resetSearchBox()">\n        <span class="glyphicon glyphicon-remove-sign se-component-search--reset-icon"></span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/components/componentTypeTemplate.html",'<div class="se-component-item">\n\n    <div class="smartEditComponent se-component-item--image"\n        data-smartedit-component-type="{{$ctrl.typeInfo.code}}">\n        <img class="se-component-item--image-element"\n            data-ng-src="{{$ctrl.imageRoot}}/images/component_default.png"\n            alt="{{$ctrl.typeInfo.i18nKey | translate}}"\n            title="{{$ctrl.typeInfo.i18nKey | translate}}" />\n    </div>\n\n    <div class="se-component-item--details-container">\n        <div class="se-component-item--details">\n            <div class="se-component-item--details-type"\n                title="{{$ctrl.typeInfo.i18nKey | translate}}"\n                data-translate="{{$ctrl.typeInfo.i18nKey}}"></div>\n        </div>\n    </div>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentsTabTemplate.html",'<div class="se-component-menu--tabs-header">\n\n    <div class="se-component-menu--clone-on-drop checkbox">\n        <input type="checkbox"\n            id="component-clone-checkbox"\n            class="se-component-item--details"\n            name="clone-on-drop"\n            data-ng-model="$ctrl.cloneOnDrop"\n            data-ng-change="$ctrl.onComponentCloneOnDropChange()">\n        <label class="control-label se-component-menu--clone-on-drop--label"\n            for="component-clone-checkbox"\n            data-translate="se.cms.component.clone.on.drop.label" />\n    </div>\n\n    <div data-ng-if="$ctrl.hasMultipleContentCatalogs == true">\n        <y-select class="se-component-menu--select"\n            data-id="uuid"\n            data-ng-model="$ctrl.selectedCatalogVersionId"\n            data-on-change="$ctrl.onCatalogVersionChange"\n            data-fetch-strategy="$ctrl.catalogVersionsFetchStrategy"\n            data-item-template="::$ctrl.catalogVersionTemplate"\n            data-search-enabled="false" />\n    </div>\n\n</div>\n\n<component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)"\n    data-placeholder="se.cms.componentmenu.search.placeholder"></component-search>\n\n<div class="se-component-menu--item-container"\n    recompile-dom="$ctrl.resetComponentsList">\n    <y-infinite-scrolling data-ng-if="$ctrl.isActive"\n        class="se-component-menu--infinite-scroll"\n        data-drop-down-class="ySEComponents"\n        data-page-size="10"\n        data-mask="$ctrl.searchTerm"\n        data-fetch-page="$ctrl.loadComponentItems"\n        data-context="$ctrl">\n        <div class="se-component-menu--results se-component-menu--results__custom">\n            <component-item class="se-component-menu--item-wrap"\n                data-component-info="item"\n                data-clone-on-drop="$ctrl.cloneOnDrop"\n                data-ng-repeat="item in $ctrl.items track by item.uid"></component-item>\n\n        </div>\n    </y-infinite-scrolling>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentsTabWrapperTemplate.html",'<div>\n    <components-tab has-multiple-content-catalogs="model.componentsTab.hasMultipleContentCatalogs"\n        is-active="model.componentsTab.active"></components-tab>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentTypesTabTemplate.html",'<component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)"\n    data-placeholder="se.cms.componentmenu.search.type.placeholder"></component-search>\n<div class="se-component-menu--item-container">\n    <div class="se-component-menu--overflow">\n        <div class="se-component-menu--results se-component-menu--results__types">\n            <div class="se-component-menu--item-wrap"\n                data-ng-repeat="componentType in $ctrl.componentTypes | nameFilter:$ctrl.searchTerm track by $id(componentType)">\n                <component-type data-type-info="componentType"></component-type>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/componentMenu/tabs/componentTypesTabWrapperTemplate.html","<component-types-tab></component-types-tab>"),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/componentEditor/componentEditorTemplate.html",'<generic-editor data-ng-if="compCtrl.isReady"\n    data-id="compCtrl.tabId"\n    data-smartedit-component-id="compCtrl.componentId"\n    data-smartedit-component-type="compCtrl.componentType"\n    data-structure="compCtrl.tabStructure"\n    data-structure-api="compCtrl.structureApi"\n    data-content="compCtrl.content"\n    data-submit="compCtrl.saveTab"\n    data-reset="compCtrl.resetTab"\n    data-custom-on-submit="compCtrl.onSubmit"\n    data-is-dirty="compCtrl.isDirtyTab"\n    data-get-api="compCtrl.getApi($api);">\n</generic-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/componentEditor/componentEditorWrapperTemplate.html",'<y-message data-ng-if="$ctrl.showDisclaimer"\n    data-type="info"\n    data-message-id="VisibilityTab.DisplayComponentOffDisclaimer">\n    <message-description>\n        <translate>se.cms.editortabset.visibilitytab.disclaimer</translate>\n    </message-description>\n</y-message>\n\n<component-editor data-tab-id="$ctrl.tabId"\n    data-component-id="$ctrl.componentId"\n    data-component-type="$ctrl.componentType"\n    data-tab-structure="$ctrl.tabStructure"\n    data-structure-api="$ctrl.structureApi"\n    data-save-tab="$ctrl.saveTab"\n    data-reset-tab="$ctrl.resetTab"\n    data-cancel-tab="$ctrl.cancelTab"\n    data-component-info="$ctrl.componentInfo"\n    data-is-dirty-tab="$ctrl.isDirtyTab"\n    data-content="$ctrl.content">\n</component-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/editorModal/tabs/basicTabTemplate.html",'<basic-tab class=\'sm-tab-content\'\n    save-tab=\'onSave\'\n    reset-tab=\'onReset\'\n    cancel-tab="onCancel"\n    is-dirty-tab="isDirty"\n    data-tab-id="tabId"\n    data-component-info="model"\n    data-content="model.content"\n    component-id="model.componentUuid"\n    component-type="model.componentType">\n</basic-tab>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/componentRestrictionsEditorTemplate.html",'<restrictions-editor data-editable="true"\n    data-on-restrictions-changed="componentRestrictionsEditorCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n    data-get-restriction-types="componentRestrictionsEditorCtrl.getRestrictionTypes()"\n    data-get-supported-restriction-types="componentRestrictionsEditorCtrl.getSupportedRestrictionTypes()"\n    data-item="componentRestrictionsEditorCtrl.model"\n    data-restrictions="componentRestrictionsEditorCtrl.model.restrictions">\n</restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/componentRestrictionsEditorWrapperTemplate.html",'<component-restrictions-editor data-model="model"\n    data-editor="editor"></component-restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/pageRestrictionsEditorTemplate.html",'<y-message data-type="danger"\n    class="se-restrictions-editor--y-message--modal-adjusted"\n    ng-repeat="error in pageRestrictionsEditorCtrl.errors">\n    <message-description>\n        <translate>{{error.message}}</translate>\n    </message-description>\n</y-message>\n<div data-ng-if="pageRestrictionsEditorCtrl.restrictions.length > 1">\n    <page-restrictions-info-message />\n</div>\n\n<restrictions-editor data-editable="true"\n    data-on-restrictions-changed="pageRestrictionsEditorCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n    data-get-restriction-types="pageRestrictionsEditorCtrl.getRestrictionTypes()"\n    data-get-supported-restriction-types="pageRestrictionsEditorCtrl.getSupportedRestrictionTypes()"\n    data-item="pageRestrictionsEditorCtrl.model"\n    data-restrictions="pageRestrictionsEditorCtrl.model.restrictions">\n</restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/cmsComponents/restrictionEditor/pageRestrictionsEditorWrapperTemplate.html",'<page-restrictions-editor data-page="model"></page-restrictions-editor>'),e.put("web/features/cmssmarteditContainer/components/editorTabset/editorTabsetTemplate.html",'<y-tabset data-model="model"\n    tabs-list="tabsList"\n    data-num-tabs-displayed="{{numTabsDisplayed}}"\n    tab-control="tabControl">\n</y-tabset>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/catalogAwareSelector/catalogAwareSelectorTemplate.html",'<div data-ng-if="ctrl.listIsEmpty()">\n    \x3c!--\n        It\'s important to add the type=button. Otherwise HTML 5 will default it to type=submit, causing the generic\n        editor to submit the form whenever the panel opens.\n    --\x3e\n    <button id="catalog-aware-selector-add-item"\n        type="button"\n        data-ng-if="ctrl.editable"\n        class="y-add-btn"\n        data-ng-click="ctrl.openEditingPanel()">\n        <span class="hyicon hyicon-add"></span>\n        <span translate="se.cms.catalogaware.newbutton.title"\n            translate-values="{catalogItemType: ctrl.catalogItemType}"\n            class="y-add-btn__text"></span>\n    </button>\n</div>\n\n<div data-ng-if="!ctrl.listIsEmpty()"\n    class="se-catalog-aware-selector__content">\n    <div class="se-catalog-aware-selector__content__btn-wrapper"\n        data-ng-if="ctrl.editable">\n        <button type="button"\n            class="btn btn-link se-catalog-aware-selector__content__btn"\n            data-ng-click="ctrl.openEditingPanel()">\n            {{\'se.cms.catalogaware.list.addmore\' | translate}}\n        </button>\n    </div>\n\n\n    <y-editable-list data-id="{{ctrl.id + \'_list\'}}"\n        data-item-template-url="ctrl.itemTemplate"\n        data-items="ctrl.itemsList"\n        data-on-change="ctrl.onListChange"\n        data-editable="ctrl.editable"\n        data-refresh="ctrl._refreshListWidget"\n        class="se-catalog-aware-selector__list">\n    </y-editable-list>\n</div>\n\n<se-item-selector-panel data-panel-title="ctrl.currentOptions.panelTitle"\n    data-items-selected="ctrl.model"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-item-template="ctrl.itemTemplate"\n    data-on-change="ctrl.onPanelChange"\n    data-show-panel="ctrl.showPanel"\n    data-hide-panel="ctrl.closePanel"\n    data-catalog-item-type="ctrl.catalogItemType"\n    data-max-num-items="ctrl.maxNumItems">\n</se-item-selector-panel>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/categorySelectorTemplate.html",'<se-catalog-aware-selector data-id="{{ctrl.id}}"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-item-template="ctrl.categoryTemplate"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.category"\n    data-editable="ctrl.editable"></se-catalog-aware-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/categoryTemplate.html",'<div class="row se-product-row">\n    <div ng-if="item !== undefined">\n        <div class="col-md-6 se-product-row__product se-nowrap-ellipsis"\n            title="{{item.name | l10n}}">{{item.name | l10n}}</div>\n        <div class="col-md-6 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{item.catalogId}} - {{item.catalogVersion}}">{{item.catalogId}} - {{item.catalogVersion}}</div>\n    </div>\n    <div ng-if="node !== undefined">\n        <div class="col-md-6 se-product-row__product se-nowrap-ellipsis"\n            title="{{node.name | l10n}}">{{node.name | l10n}}</div>\n        <div class="col-md-5 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{node.catalogId}} - {{node.catalogVersion}}">{{node.catalogId}} - {{node.catalogVersion}}</div>\n        <div class="col-md-1">\n            <y-drop-down-menu data-ng-if="$ctrl.treeOptions.dragEnabled"\n                data-dropdown-items="$ctrl.getDropdownItems()"\n                data-selected-item="this"\n                class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/categorySelector/multiCategorySelectorTemplate.html",'<se-category-selector data-id="{{field.qualifier}}"\n    data-model="model"\n    data-qualifier="qualifier"\n    data-editable="field.editable"></se-category-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/itemSelectorPanel/catalogItemTemplate.html",'<span data-ng-bind-html="item.name | l10n"></span>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/itemSelectorPanel/itemSelectorPanelTemplate.html",'<y-slider-panel data-slider-panel-show="ctrl._internalShowPanel"\n    data-slider-panel-hide="ctrl._internalHidePanel"\n    data-slider-panel-configuration="ctrl.sliderConfiguration"\n    class="se-item-selector-panel">\n    <content recompile-dom="ctrl.resetSelector"\n        class="se-item-selector-panel__content">\n        \x3c!-- Show the dropdown only if there\'s more than one catalogs to choose from --\x3e\n        <div data-ng-if="ctrl.catalogs.length > 1"\n            class="se-item-selector-panel__content__item">\n            <label class="control-label">{{\'se.cms.catalogaware.panel.catalogs.label\' | translate}}</label>\n            <y-select data-id="se-catalog-selector-dropdown"\n                data-ng-model="ctrl.catalogInfo.catalogId"\n                data-fetch-strategy="ctrl.catalogSelectorFetchStrategy"\n                data-item-template="ctrl.catalogItemTemplate"\n                data-on-change="ctrl._onCatalogSelectorChange"\n                data-reset="ctrl.resetCatalogSelector"\n                class="se-item-selector-panel__content__catalogs__yselect">\n            </y-select>\n            <label data-ng-if="ctrl.catalogs.length !== 1">{{ctrl.catalogInfo.name | l10n}}</label>\n        </div>\n\n        <div class="se-item-selector-panel__content__item">\n            <label class="control-label">{{\'se.cms.catalogaware.panel.catalogsversion.label\' | translate}}</label>\n            <y-select data-id="se-catalog-version-selector-dropdown"\n                data-ng-model="ctrl.catalogInfo.catalogVersion"\n                data-fetch-strategy="ctrl.catalogVersionSelectorFetchStrategy"\n                data-on-change="ctrl._onCatalogVersionSelectorChange"\n                data-search-enabled=false\n                data-reset="ctrl.resetCatalogVersionSelector"\n                class="se-item-selector-panel__content__catalog-version__yselect">\n            </y-select>\n        </div>\n\n        \x3c!-- Show the multi-select--\x3e\n        <div class="se-item-selector-panel__content__item"\n            data-ng-show="ctrl.catalogInfo.catalogVersion">\n            <label class="control-label">{{ctrl.catalogItemType}}</label>\n            <y-select id="se-items-selector-dropdown"\n                multi-select="\'true\'"\n                controls="\'true\'"\n                ng-model="ctrl._internalItemsSelected"\n                on-change="ctrl._onItemsSelectorChange"\n                fetch-strategy="ctrl._internalItemsFetchStrategy"\n                reset="ctrl.resetItemsListSelector"\n                item-template="ctrl.itemTemplate"\n                is-read-only="!ctrl._isItemSelectorEnabled()">\n            </y-select>\n        </div>\n\n    </content>\n</y-slider-panel>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/multiProductSelectorTemplate.html",'<se-product-selector data-id="{{field.qualifier}}"\n    data-model="model"\n    data-qualifier="qualifier"\n    data-editable="field.editable"></se-product-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/productSelectorTemplate.html",'<se-catalog-aware-selector data-id="{{ctrl.id}}"\n    data-ng-model="ctrl.model[ctrl.qualifier]"\n    data-item-template="ctrl.productTemplate"\n    data-get-catalogs="ctrl.getCatalogs"\n    data-items-fetch-strategy="ctrl.itemsFetchStrategy"\n    data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.product"\n    data-max-num-items="ctrl.maxNumItems"\n    data-editable="ctrl.editable"></se-catalog-aware-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/catalog/components/productSelector/productTemplate.html",'<div class="row se-product-row">\n    <div data-ng-if="item !== undefined">\n        <div class="col-xs-1">\n            <div class="se-default-product-img">\n                <div style="background-image: url(\'{{item.thumbnail.url}}\');"></div>\n            </div>\n        </div>\n        <div class="col-xs-5 se-product-row__product se-nowrap-ellipsis"\n            title="{{item.name | l10n}}">{{item.name | l10n}}</div>\n        <div class="col-xs-5 se-product-row__catalog">\n            <div class="se-nowrap-ellipsis"\n                title="{{item.catalogId}} - {{item.catalogVersion}}">{{item.catalogId}} - {{item.catalogVersion}}</div>\n        </div>\n    </div>\n    <div data-ng-if="node !== undefined">\n        <div class="col-xs-1">\n            <div class="se-default-product-img">\n                <div style="background-image: url(\'{{node.thumbnail.url}}\');"></div>\n            </div>\n        </div>\n        <div class="col-xs-5 se-product-row__product se-nowrap-ellipsis"\n            title="{{node.name | l10n}}">{{node.name | l10n}}</div>\n        <div class="col-xs-5 se-product-row__catalog se-nowrap-ellipsis"\n            title="{{node.catalogId}} - {{node.catalogVersion}}">{{node.catalogId}} - {{node.catalogVersion}}</div>\n        <div class="col-xs-1">\n            <y-drop-down-menu data-ng-if="$ctrl.treeOptions.dragEnabled"\n                data-dropdown-items="$ctrl.getDropdownItems()"\n                data-selected-item="this"\n                class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/cmsLinkToSelect/cmsLinkToSelectTemplate.html",'<se-dropdown data-field="ctrl.field"\n    data-qualifier="ctrl.qualifier"\n    data-model="ctrl.model"\n    data-id="ctrl.id"></se-dropdown>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/cmsLinkToSelect/cmsLinkToSelectWrapperTemplate.html",'<cms-link-to-select data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id"></cms-link-to-select>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/displayConditions/pageDisplayConditionWrapperTemplate.html",'<display-conditions-editor data-page="model"></display-conditions-editor>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/linkToggle/linkToggleTemplate.html",'<div class="se-link-toggle">\n\n    <div class="radio se-link-toggle__radio">\n        <input type="radio"\n            name="linktoggle"\n            id="external-link"\n            data-ng-model="$ctrl.model.linkToggle.external"\n            data-ng-value="true"\n            data-ng-change="$ctrl.emptyUrlLink()" />\n        <label class="control-label"\n            for="external-link">{{ \'se.editor.linkto.external.label\' | translate}}</label>\n    </div>\n    <div class="radio se-link-toggle__radio">\n        <input type="radio"\n            name="linktoggle"\n            id="internal-link"\n            data-ng-model="$ctrl.model.linkToggle.external"\n            data-ng-value="false"\n            data-ng-change="$ctrl.emptyUrlLink()" />\n        <label class="control-label"\n            for="internal-link">{{ \'se.editor.linkto.internal.label\' | translate}}</label>\n    </div>\n\n    <input type="text"\n        id="urlLink"\n        name="urlLink"\n        data-ng-model="$ctrl.model.linkToggle.urlLink"\n        data-ng-class="{\'has-error\':$ctrl.field.hasErrors}"\n        class="form-control" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/linkToggle/linkToggleWrapperTemplate.html",'<link-toggle data-field="field"\n    data-model="model"\n    data-editor="editor">\n</link-toggle>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/errorsList/seErrorsListTemplate.html",'<div class="field-errors">\n    <div data-ng-repeat="error in ctrl.getSubjectErrors()">{{ error.message | translate }}</div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/fileSelector/seFileSelectorTemplate.html",'<div class="seFileSelector {{::ctrl.customClass}}">\n    <label class="btn btn__fileSelector"\n        data-ng-show="!ctrl.disabled">\n        <img class="img-upload"\n            data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload label__fileUpload-link">{{::ctrl.labelI18nKey | translate}}</p>\n        <input type="file"\n            class="hide"\n            accept="{{ctrl.buildAcceptedFileTypesList()}}">\n    </label>\n    <label class="btn btn__fileSelector"\n        disabled="disabled"\n        data-ng-show="ctrl.disabled">\n        <img class="img-upload"\n            data-ng-src="{{::ctrl.uploadIcon}}" />\n        <p class="label label__fileUpload">{{::ctrl.labelI18nKey | translate}}</p>\n    </label>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesCondensedTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    data-popover-append-to-body="true"\n    data-popover-placement="bottom"\n    data-popover-trigger="\'mouseenter\'"\n    tabindex="0"\n    class="media-container-advanced-information">\n    <img class="media-advanced-information--image"\n        data-ng-src="{{ctrl.advInfoIcon}}"\n        alt="{{ctrl.i18nKeys.INFORMATION | translate}}"\n        title="{{ctrl.i18nKeys.INFORMATION | translate}}">\n    <p class="media-advanced-information--p">{{ctrl.i18nKeys.INFORMATION | translate}}</p>\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesContentTemplate.html",'<div class="se-adv-media-info">\n    <span class="se-adv-media-info--data advanced-information-description"\n        data-ng-if="ctrl.description">\n        {{ctrl.i18nKeys.DESCRIPTION | translate}}: {{ctrl.description}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-code">\n        {{ctrl.i18nKeys.CODE | translate}}: {{ctrl.code}}\n    </span>\n    <span class="se-adv-media-info--data advanced-information-alt-text"\n        data-ng-if="ctrl.altText">\n        {{ctrl.i18nKeys.ALT_TEXT | translate}}: {{ctrl.altText}}\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaAdvancedProperties/seMediaAdvancedPropertiesTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    popover-append-to-body="true"\n    popover-placement="left"\n    popover-trigger="click"\n    tabindex="0"\n    class="media-advanced-information btn btn-subordinate">\n    {{ctrl.i18nKeys.INFORMATION | translate}}\n    <img class="media-selector--preview--icon" data-ng-src="{{ctrl.advInfoIcon}}">\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaContainerField/seMediaContainerFieldTemplate.html",'<div class="se-media-container-field"\n    ng-if="ctrl.hasReadPermissionOnMediaRelatedTypes">\n    <div class="row">\n        <se-media-format class="col-sm-6 col-md-4 col-lg-3 se-media-container-cell"\n            ng-repeat="option in ctrl.field.options"\n            data-media-uuid="ctrl.model[ctrl.qualifier][option.id]"\n            data-is-under-edit="ctrl.isFormatUnderEdit(option.id)"\n            data-media-format="option.id"\n            data-field="ctrl.field"\n            data-on-file-select="ctrl.fileSelected(files, option.id)"\n            data-on-delete="ctrl.imageDeleted(option.id)">\n        </se-media-format>\n\n    </div>\n    <se-media-upload-form data-ng-if="ctrl.image.file"\n        data-image="ctrl.image"\n        data-field="ctrl.field"\n        data-on-upload-callback="ctrl.imageUploaded(uuid)"\n        data-on-cancel-callback="ctrl.resetImage()"\n        data-on-select-callback="ctrl.fileSelected(files)">\n    </se-media-upload-form>\n    <se-errors-list data-errors="ctrl.fileErrors"></se-errors-list>\n</div>\n<div class="se-media-container-field"\n    ng-if="!ctrl.hasReadPermissionOnMediaRelatedTypes">\n    <span translate="se.cms.media.typepermissions.error"\n        translate-values="{containedTypes: ctrl.field.containedTypes}"></span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaField/seMediaFieldTemplate.html",'<div class="media-field">\n    <se-media-selector ng-if="!ctrl.image.file"\n        data-field="ctrl.field"\n        data-model="ctrl.model"\n        data-editor="ctrl.editor"\n        data-qualifier="ctrl.qualifier">\n    </se-media-selector>\n    <se-file-selector ng-if="ctrl.showFileSelector()"\n        data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY"\n        data-accepted-file-types="ctrl.acceptedFileTypes"\n        data-on-file-select="ctrl.fileSelected(files)"\n        data-upload-icon="ctrl.uploadIconUrl"\n        data-image-root="ctrl.imageRoot"></se-file-selector>\n    <se-media-upload-form ng-if="ctrl.image.file"\n        data-image="ctrl.image"\n        data-field="ctrl.field"\n        data-on-upload-callback="ctrl.imageUploaded(uuid)"\n        data-on-cancel-callback="ctrl.resetImage()"\n        data-on-select-callback="ctrl.fileSelected(files)"></se-media-upload-form>\n    <se-errors-list ng-if="ctrl.fileErrors.length > 0"\n        data-errors="ctrl.fileErrors"></se-errors-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaFormat/seMediaFormatTemplate.html",'<div class="{{ctrl.mediaFormat}} se-media-format">\n    <div class="se-media-format-screentype">\n        {{ctrl.mediaFormatI18NKey | translate}}\n    </div>\n    \x3c!-- when the image is already uploaded --\x3e\n    <div class="media-present"\n        data-ng-if="ctrl.isMediaPreviewEnabled()">\n        <div class="media-present-preview">\n            <se-media-preview data-image-url="ctrl.media.url"></se-media-preview>\n            <div class="se-media-preview-image-wrapper  se-media-format-image-wrapper">\n                <img class="thumbnail thumbnail--image-preview"\n                    data-ng-src="{{ctrl.media.url}}">\n            </div>\n            <span class="media-preview-code se-media-format--code">{{ctrl.media.code}}</span>\n\n        </div>\n\n        <se-media-advanced-properties-condensed data-adv-info-icon="ctrl.advInfoIconUrl"\n            data-code="ctrl.media.code"\n            data-description="ctrl.media.description"\n            data-alt-text="ctrl.media.altText"></se-media-advanced-properties-condensed>\n\n        <se-file-selector data-custom-class="\'media-format-present-replace\' + (ctrl.geField.isFieldDisabled() ? \' file-selector-disabled\' : \'\')"\n            data-disabled="ctrl.geField.isFieldDisabled()"\n            data-label-i18n-key="ctrl.i18nKeys.REPLACE "\n            data-accepted-file-types="ctrl.acceptedFileTypes "\n            data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) "\n            data-upload-icon="ctrl.replaceIconUrl "\n            data-image-root="ctrl.imageRoot "></se-file-selector>\n\n        <button class="media-selector--preview__left remove-image btn btn-subordinate "\n            data-ng-click="ctrl.onDelete({format: ctrl.mediaFormat}) "\n            data-ng-disabled="ctrl.geField.isFieldDisabled()">\n            <img class="media-selector--preview--icon "\n                data-ng-src="{{ctrl.deleteIconUrl}} "\n                alt="{{ctrl.i18nKeys.REMOVE | translate}} " />\n            <p class="media-selector--preview__left--p media-selector--preview__left--p__error"\n                data-ng-class="{\'media-selector--preview-btn__disabled\':!ctrl.field.editable}">{{ctrl.i18nKeys.REMOVE | translate}}</p>\n        </button>\n    </div>\n\n    \x3c!-- when the image is not yet uploaded --\x3e\n    <div class="media-absent "\n        data-ng-if="ctrl.isMediaEditEnabled()">\n        \x3c!-- when the file selector is enabled --\x3e\n        <se-file-selector data-ng-if="ctrl.field.editable"\n            data-label-i18n-key="ctrl.i18nKeys.UPLOAD"\n            data-custom-class="ctrl.geField.isFieldDisabled() ? \'file-selector-disabled\' : \'\'"\n            data-disabled="ctrl.geField.isFieldDisabled()"\n            data-accepted-file-types="ctrl.acceptedFileTypes"\n            data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat})"\n            data-upload-icon="ctrl.uploadIconUrl"\n            data-image-root="ctrl.imageRoot "></se-file-selector>\n        \x3c!-- when the file selector is disabled --\x3e\n        <se-file-selector data-ng-if="!ctrl.field.editable"\n            data-label-i18n-key="ctrl.i18nKeys.UPLOAD"\n            data-custom-class="!ctrl.field.editable ? \'file-selector-disabled\' : \'\'"\n            data-disabled="!ctrl.field.editable"\n            data-accepted-file-types="ctrl.acceptedFileTypes"\n            data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat})"\n            data-upload-icon="ctrl.uploadIconDisabledUrl ? ctrl.uploadIconDisabledUrl : ctrl.uploadIconUrl"\n            data-image-root="ctrl.imageRoot"></se-file-selector>\n    </div>\n\n    \x3c!-- when the image is under edit --\x3e\n    <div data-ng-if="ctrl.isUnderEdit "\n        class="media-under-edit-parent">\n        <div class="media-is-under-edit ">\n            <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD "\n                data-disabled="true"\n                data-custom-class=" \'file-selector-disabled\' "\n                data-accepted-file-types="ctrl.acceptedFileTypes "\n                data-on-file-select="ctrl.onFileSelect({files: files, format: ctrl.mediaFormat}) "\n                data-upload-icon="ctrl.uploadIconDisabledUrl "\n                data-image-root="ctrl.imageRoot "></se-file-selector>\n        </div>\n        <span class="media-preview-under-edit ">{{ctrl.i18nKeys.UNDER_EDIT | translate}}</span>\n    </div>\n\n    <div class="error-input help-block "\n        data-ng-repeat="error in ctrl.getErrors() ">\n        {{error}}\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaPreview/seMediaPreviewContentTemplate.html",'<img class="preview-image"\n    data-ng-src="{{ctrl.imageUrl}}" />'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaPreview/seMediaPreviewTemplate.html",'<a data-uib-popover-template="ctrl.contentUrl"\n    data-ng-click="$event.stopPropagation()"\n    popover-append-to-body="true"\n    popover-placement="right"\n    popover-trigger="\'outsideClick\'"\n    tabindex="1"\n    class="media-preview">\n    <span class="hyicon hyicon-search media-preview-icon"></span>\n</a>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaPrinterTemplate.html",'<div class="media-selector--preview"\n    data-ng-if="selected">\n    <div class="row">\n        <span class="col-xs-6">\n            <se-media-preview data-image-url="item.url"></se-media-preview>{{printer.imagePreviewUrl}}\n            <div class="se-media-preview-image-wrapper">\n                <img class="thumbnail thumbnail--image-preview"\n                    data-ng-src="{{item.url}}">\n            </div>\n            <span class="media-preview-code se-media-printer--code">{{item.code}}</span>\n        </span>\n        <span class="col-xs-6 media-selector--preview--2">\n            <se-media-advanced-properties class="media-selector--preview__right"\n                data-code="item.code"\n                data-description="item.description"\n                data-alt-text="item.altText"\n                data-adv-info-icon="printer.advInfoIcon"></se-media-advanced-properties>\n\n            <button class="media-selector--preview__right replace-image btn btn-subordinate"\n                data-ng-disabled="ySelect.exposedModel.$$attr.disabled"\n                data-ng-click="ySelect.clear($select, $event)">\n                <p class="media-selector--preview__right--p"\n                    data-translate="se.upload.image.replace"></p>\n                <img class="media-selector--preview--icon"\n                    data-ng-src="{{printer.replaceIcon}}" />\n            </button>\n            <button class="media-selector--preview__right remove-image btn btn-subordinate"\n                data-ng-disabled="ySelect.exposedModel.$$attr.disabled"\n                data-ng-click="ySelect.clear($select, $event)">\n                <p class="media-selector--preview__right--p"\n                    data-translate="se.media.format.remove"></p>\n                <img class="media-selector--preview--icon"\n                    data-ng-src="{{printer.deleteIcon}}" />\n            </button>\n        </span>\n\n    </div>\n</div>\n<div class="ySEMediaSearch"\n    data-ng-if="!selected">\n    <div class="row ySEMediaSearch-row">\n        <div class="ySEMediaSearchName col-xs-8">{{item.code}}</div>\n        <div class="ySEMediaSearchImage col-xs-4">\n            <img data-ng-src="{{item.url}}"\n                class="pull-right">\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaPrinterWrapperTemplate.html",'<se-media-printer data-item="item"\n    data-selected="selected">'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaSelector/seMediaSelectorTemplate.html",'<div class="media-selector">\n    <y-select data-ng-disabled="!ctrl.field.editable"\n        data-id="{{ctrl.field.qualifier}}"\n        data-placeholder="ctrl.dropdownProperties.placeHolderI18nKey"\n        data-ng-model="ctrl.model[ctrl.qualifier]"\n        data-fetch-strategy="ctrl.fetchStrategy"\n        data-item-template="ctrl.mediaTemplate"\n        data-is-read-only="ctrl.geField.isFieldDisabled()" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaUploadForm/seMediaUploadFieldTemplate.html",'<div class="form-control se-mu--fileinfo--wrapper">\n    <div class="row">\n        <div class="se-mu--fileinfo--wrapper-col1 col-xs-10">\n            <input type="text"\n                data-ng-class="{\'se-mu--fileinfo--field--input\': true, \'se-mu--fileinfo--field__error\': ctrl.error}"\n                class="se-mu--fileinfo--field--input"\n                name="{{ctrl.field}}"\n                data-ng-model="ctrl.model[ctrl.field]">\n        </div>\n\n        <div class="se-mu--fileinfo--wrapper-col2 col-xs-2">\n            <img ng-src="{{ctrl.assetsRoot}}/images/edit_icon.png"\n                class="se-mu--fileinfo--field--icon "\n                data-ng-if="ctrl.displayImage && !ctrl.error" />\n            <img ng-src="{{ctrl.assetsRoot}}/images/edit_icon_error.png"\n                class="se-mu--fileinfo--field--icon__error "\n                data-ng-if="ctrl.error" />\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/components/mediaUploadForm/seMediaUploadFormTemplate.html",'<div class="se-media-upload-form">\n\n    <div class="container-fluid se-media-upload-form--toolbar">\n        <div class="navbar-left se-media-upload-form--toolbar--title">\n            <h4 class="se-media-upload-form--toolbar--title--h4">{{ctrl.i18nKeys.UPLOAD_IMAGE_TO_LIBRARY | translate}}</h4>\n        </div>\n        <div class="navbar-right se-media-upload-form--toolbar--buttons">\n            <div class="y-toolbar">\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-subordinate btn-lg navbar-btn se-media-upload-btn__cancel"\n                        type="button"\n                        data-ng-click="ctrl.onCancel()">{{ctrl.i18nKeys.UPLOAD_IMAGE_CANCEL | translate}}</button>\n                </div>\n                <div class="y-toolbar-cell">\n                    <button class="btn btn-default btn-lg navbar-btn se-media-upload-btn__submit"\n                        type="button"\n                        data-ng-click="ctrl.onMediaUploadSubmit()">{{ctrl.i18nKeys.UPLOAD_IMAGE_SUBMIT | translate}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="container-fluid se-media-upload--filename">\n        <div class="row">\n            <div class="se-media-upload--filename-col1 col-xs-10">\n                <img ng-src="{{assetsRoot}}/images/image_placeholder.png">\n                <div class="se-media-upload--fn--name">{{ctrl.getTruncatedName()}}</div>\n            </div>\n            <div class="se-media-upload--filename-col2 col-xs-2">\n                <se-file-selector data-label-i18n-key="ctrl.i18nKeys.UPLOAD_IMAGE_REPLACE"\n                    data-accepted-file-types="ctrl.acceptedFileTypes"\n                    data-on-file-select="ctrl.onSelectCallback({files: files})"></se-file-selector>\n\n            </div>\n        </div>\n    </div>\n    <form>\n        <div class="se-media-upload--fileinfo">\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-description"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'description\'), \'se-media-upload--fileinfo--label\': true }">{{ctrl.i18nKeys.DESCRIPTION | translate}}</label>\n                <se-media-upload-field data-field="\'description\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-description"\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'description\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-code"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'code\')}">{{ctrl.i18nKeys.CODE | translate}}*</label>\n                <se-media-upload-field data-error="ctrl.hasError(\'code\')"\n                    data-field="\'code\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-code"\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'code\')">{{error}}</span>\n            </div>\n\n            <div class="se-media-upload--fileinfo--field form-group">\n                <label name="label-alt-text"\n                    data-ng-class="{ \'se-media-upload-has-error\': ctrl.hasError(\'altText\') }">{{ctrl.i18nKeys.ALT_TEXT | translate}}</label>\n                <se-media-upload-field data-field="\'altText\'"\n                    data-model="ctrl.imageParameters"></se-media-upload-field>\n                <span class="upload-field-error upload-field-error-alt-text "\n                    data-ng-repeat="error in ctrl.getErrorsForField(\'altText\')">{{error}}</span>\n            </div>\n        </div>\n\n    </form>\n    <span data-ng-if="ctrl.isUploading"\n        class="upload-image-in-progress">\n        \x3c!--<img src="static-resources/images/spinner.png"> {{ctrl.i18nKeys.UPLOADING | translate}}--\x3e\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/templates/mediaContainerTemplate.html",'<se-media-container-field data-field="field"\n    data-model="model"\n    data-editor="editor"\n    data-qualifier="qualifier"></se-media-container-field>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/media/templates/mediaTemplate.html",'<se-media-field data-field="field"\n    data-model="model"\n    data-editor="editor"\n    data-qualifier="qualifier"></se-media-field>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/breadcrumb/seBreadcrumbTemplate.html",'<div class="ySEBreadcrumb">\n    <div data-ng-repeat="node in bc.breadcrumb"\n        class="ySEBreadcrumbNode">\n        <div class="ySEBreadcrumbInfo"\n            data-ng-class="{\'ySEBreadcrumbInfo__last\':$last}">\n            <span class="yNodeLevel">{{node.formattedLevel | translate:node}}</span>\n            <span class="yNodeName">{{node.name}}</span>\n        </div>\n        <div class="ySEBreadcrumbDivider"\n            data-ng-if="$index < bc.breadcrumb.length - 1">\n            <img data-ng-src="{{bc.arrowIconUrl}}"\n                alt="">\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodePicker/navigationNodePickerRenderTemplate.html",'<div></div>\n<div class="ySETreeNodeDesktop__node-name col-xs-6">\n    <span>\n        {{node.name | l10n}}\n    </span>\n</div>\n<div class="col-sm-4 pull-right tree-node yNavigationPickerRenderer"\n    data-ng-click="$ctrl.pick(this)"\n    data-ng-show="$ctrl.isEditable()">\n    <a data-translate="se.cms.navigationcomponent.management.node.selection.select.action"\n        class="btn btn-link yNavigationPickerRenderer__btn" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodePicker/seNavigationNodePickerTemplate.html",'<div class="categoryTable">\n    <div class="tablehead clearfix hidden-xs ySENavigationTree-head">\n        <div data-translate="se.ytree.template.header.name"\n            class="col-md-offset-1 col-sm-5"></div>\n    </div>\n    <ytree data-node-uri="ctrl.nodeURI"\n        data-root-node-uid="ctrl.rootNodeUid"\n        data-node-template-url="ctrl.nodeTemplateUrl"\n        data-remove-default-template="ctrl.removeDefaultTemplate"\n        data-node-actions="ctrl.actions" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/components/navigationNodeSelector/seNavigationNodeSelectorTemplate.html",'<div data-ng-if="nav.isReady()">\n    <div data-ng-if="nav.model[nav.qualifier]"\n        class="se-navigation-mode">\n\n        <div class="se-navigation--node">\n            <se-breadcrumb class="se-navigation--node-breadcrumb"\n                data-node-uuid="nav.model[nav.qualifier]"\n                data-uri-context="nav.uriContext"></se-breadcrumb>\n            <div class="se-navigation--node-button">\n                <button class="btn btn-link btn-block se-navigation--button"\n                    data-ng-class="{\'se-navigation--button__disabled\':!nav.field.editable}"\n                    data-ng-click="nav.remove($event)"\n                    data-ng-disabled="!nav.field.editable">\n                    <p data-translate="se.cms.navigationcomponent.management.node.selection.remove.action"></p>\n                </button>\n            </div>\n        </div>\n        <navigation-editor-tree data-uri-context="nav.uriContext"\n            data-read-only="true"\n            data-root-node-uid="nav.nodeUid"></navigation-editor-tree>\n    </div>\n    <div data-ng-if="!nav.model[nav.qualifier]">\n\n        <label data-translate="se.cms.navigationcomponent.management.node.selection.invite.action"></label>\n        <se-navigation-picker data-uri-context="nav.uriContext"\n            data-model="nav.model"\n            data-qualifier="nav.qualifier"\n            data-editable=nav.field.editable></se-navigation-picker>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/navigationNode/templates/navigationNodeSelectorWrapperTemplate.html",'<se-navigation-node-selector data-field="field"\n    data-model="model"\n    data-qualifier="qualifier"></se-navigation-node-selector>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/duplicatePrimaryContentPageLabel/duplicatePrimaryContentPageLabelTemplate.html",'<div>\n    <div class="duplicate-primary-content-page-resolution-options">\n        <div class="radio">\n            <input class="duplicate-resolution-option"\n                type="radio"\n                name="duplicateResolution"\n                id="overwritePrimaryPageOption"\n                data-ng-model="$ctrl.conflictResolution"\n                data-ng-click="$ctrl.selectResolution($ctrl.ResolutionOptions.OVERWRITE_PAGE)"\n                data-ng-value="$ctrl.ResolutionOptions.OVERWRITE_PAGE">\n            <label for="overwritePrimaryPageOption"\n                data-translate="se.cms.page.restore.content.duplicate.primaryforvariation.option.overwrite" />\n        </div>\n        <div class="radio">\n            <input class="duplicate-resolution-option"\n                type="radio"\n                name="duplicateResolution"\n                id="renamePrimaryPageOption"\n                data-ng-model="$ctrl.conflictResolution"\n                data-ng-click="$ctrl.selectResolution($ctrl.ResolutionOptions.RENAME_PAGE_LABEL)"\n                data-ng-value="$ctrl.ResolutionOptions.RENAME_PAGE_LABEL">\n            <label for="renamePrimaryPageOption"\n                data-translate="se.cms.page.restore.content.duplicate.primaryforvariation.option.rename" />\n        </div>\n    </div>\n    <div class="rename-label-section"\n        data-ng-if="$ctrl.conflictResolution === $ctrl.ResolutionOptions.RENAME_PAGE_LABEL">\n        <label data-translate="se.cms.page.restore.page.label"></label>\n        <input type="text"\n            class="form-control"\n            data-ng-model="$ctrl.model[\'label\']">\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/duplicatePrimaryContentPageLabel/duplicatePrimaryContentPageWrapperTemplate.html",'<duplicate-primary-content-page-label data-model="model">\n</duplicate-primary-content-page-label>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/duplicatePrimaryNonContentPage/duplicatePrimaryNonContentPageTemplate.html",'<div>\n    <div data-translate="{{$ctrl.label}}"></div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/duplicatePrimaryNonContentPage/duplicatePrimaryNonContentPageWrapperTemplate.html",'<duplicate-primary-non-content-page data-model="model">\n</duplicate-primary-non-content-page>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/missingPrimaryContentPage/missingPrimaryContentPageTemplate.html",'<div>\n    <span class="missing-primary-content-page-message__label"\n        data-translate="se.cms.page.restore.content.page.noprimaryforvariation.msg"></span>\n    <y-select data-id="se-page-restore-change-primary-selector-dropdown"\n        data-ng-model="$ctrl.model.label"\n        data-fetch-strategy="$ctrl.fetchStrategy"\n        data-search-enabled=true>\n\n    </y-select>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageRestore/missingPrimaryContentPage/missingPrimaryContentPageWrapperTemplate.html",'<missing-primary-content-page data-model="model"></missing-primary-content-page>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/pageType/pageTypeEditorTemplate.html",'<div class="edit-page-basic-tab--header">\n    <div class="row">\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="se.cms.pageinfo.page.type"></label>\n            <div class="form-readonly-text form-readonly-text__tight">{{model.typeCode}}</div>\n        </div>\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="se.cms.pageinfo.page.template"></label>\n            <div class="form-readonly-text form-readonly-text__tight">{{model.template}}</div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/restrictionsList/restrictionsListTemplate.html",'<div class="restrictions-list">\n    <div class="restrictions-list__info">\n        <label data-translate="se.cms.restrictions.criteria"></label>\n        <span>{{$ctrl.model.restrictionsCriteria}}</span>\n    </div>\n    <div class="restrictions-list__items"\n        data-ng-repeat="restriction in $ctrl.model.restrictions">\n        <div class="restrictions-list__item">\n            <div class="restrictions-list__item-name">{{restriction.name}}</div>\n            <div class="restrictions-list__item-type">{{restriction.type | l10n}}</div>\n            <div class="restrictions-list__item-description">{{restriction.description}}</div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/restrictionsList/restrictionsListWrapperTemplate.html",'<restrictions-list data-model="model">\n</restrictions-list>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelectorTemplate.html",'<div data-ng-if="$ctrl.propertyType">\n    \x3c!-- Product catalog selector --\x3e\n    <div id="product-catalog">\n        <label class="control-label"\n            data-ng-class="{\'required\': $ctrl.field.required}"\n            data-ng-if="$ctrl.catalogs.length === 1">{{$ctrl.catalogName | l10n}}</label>\n        <se-dropdown data-ng-if="$ctrl.catalogs.length > 1"\n            data-field="$ctrl.productCatalogField"\n            data-qualifier="\'productCatalog\'"\n            data-model="$ctrl.model"\n            data-id="se-catalog-selector-dropdown"></se-dropdown>\n    </div>\n\n    \x3c!-- Item selector --\x3e\n    <div>\n        <label class="control-label">{{$ctrl.mainDropDownI18nKey | translate}}</label>\n        <se-dropdown data-field="$ctrl.field"\n            data-qualifier="$ctrl.qualifier"\n            data-model="$ctrl.model"\n            data-id="se-items-selector-dropdown"></se-dropdown>\n    </div>\n</div>\n<div class="product-catalog-item-type-missing"\n    data-ng-if="!$ctrl.propertyType">{{\'se.cms.catalogawareitem.itemtype.notsupported\' | translate}}</div>'),e.put("web/features/cmssmarteditContainer/components/genericEditor/singleActiveCatalogAwareSelector/singleActiveCatalogAwareItemSelector/singleActiveCatalogAwareItemSelectorWrapperTemplate.html",'<single-active-catalog-aware-item-selector data-field="field"\n    data-qualifier="qualifier"\n    data-model="model"\n    data-id="id"\n    data-editor="editor"></single-active-catalog-aware-item-selector>'),e.put("web/features/cmssmarteditContainer/components/itemManagement/itemManagementTemplate.html",'<div>\n    <generic-editor data-id="$ctrl.editorId"\n        data-smartedit-component-id="$ctrl.itemId"\n        data-smartedit-component-type="$ctrl.componentType"\n        data-structure-api="$ctrl.structureApi"\n        data-content="$ctrl.item"\n        data-content-api="$ctrl.contentApi"\n        data-is-dirty="$ctrl.isDirtyInternal"\n        data-submit="$ctrl.submit"\n        data-uri-context="$ctrl.uriContext"\n        data-reset="$ctrl.reset">\n    </generic-editor>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationEditorLinkTemplate.html",'<div class="nav-management-link-container">\n    <a class="nav-management-link-item__link se-catalog-version__link"\n        data-ng-href="#!/navigations/{{$ctrl.siteId}}/{{$ctrl.catalog.catalogId}}/{{$ctrl.catalogVersion.version}}"\n        data-translate="se.cms.cataloginfo.navigationmanagement"></a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationEditorTreeComponentTemplate.html",'<div class="ySEAdd-Nav-button"\n    data-ng-if="!$ctrl.readOnly">\n    <button class="y-add-btn"\n        data-ng-click="$ctrl.actions.addTopLevelNode()">\n        <span class="hyicon hyicon-add"></span>\n        <span data-translate="se.cms.navigationmanagement.add.top.level.node"\n            class="y-add-btn__text"></span>\n    </button>\n</div>\n<div class="ySEAdd-Nav-tree categoryTable">\n    <div class="tablehead clearfix hidden-xs ySENavigationTree-head">\n        <div data-translate="se.ytree.template.header.name"\n            class="col-sm-offset-1 col-sm-2"></div>\n        <div data-translate="se.ytree.template.header.title"\n            class="col-sm-offset-1 col-sm-3"></div>\n        <div data-translate="se.ytree.template.header.entry"\n            class="col-sm-3"></div>\n    </div>\n    <ytree data-node-uri="$ctrl.nodeURI"\n        data-root-node-uid="$ctrl.rootNodeUid"\n        data-node-template-url="$ctrl.nodeTemplateUrl"\n        data-remove-default-template="$ctrl.removeDefaultTemplate"\n        data-node-actions="$ctrl.actions"\n        data-drag-options="$ctrl.dragOptions"></ytree>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationEditor/navigationNodeRenderTemplate.html",'<div class="col-sm-1 pull-right dropdown tree-node ySENodeTemplate"\n    data-ng-show="!$ctrl.isReadOnly()">\n    <y-drop-down-menu dropdown-items="$ctrl.getDropdownItems()"\n        selected-item="this"\n        class="y-dropdown pull-right nav-node-editor-entry-item__more-menu" />\n</div>\n\n<div class="ySETreeNodeDesktop__node-name col-xs-3">\n    <span>\n        {{node.name | l10n}}\n    </span>\n</div>\n\n<div class="ySETreeNodeDesktop__node-title col-xs-2">\n    <span data-ng-show="node.title">\n        {{node.title | l10n}}\n    </span>\n</div>\n\n<div class="col-xs-5 pull-right tree-node ySETreeNodeDesktop__node-entry">\n    <div y-popover\n        data-trigger="\'hover\'"\n        data-template="$ctrl.getEntryTooltipString(node)"\n        class="ySETreeNodeDesktop__popover">\n        <span>{{ $ctrl.getEntryString(node) }}</span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/navigation/navigationManagementPageTemplate.html",'<div class="ySmartEditToolbars"\n    style="position:absolute">\n    <div>\n        <toolbar data-css-class="ySmartEditHeaderToolbar"\n            data-image-root="imageRoot"\n            data-toolbar-name="smartEditHeaderToolbar"></toolbar>\n    </div>\n</div>\n\n<div class="navigationEditorWrapper"\n    ng-if="nav.readOnly !== undefined">\n    <div class="navEditorHeaderWrapper">\n        <h1 class="se-page-list__title"\n            data-translate=\'se.cms.navigationmanagement.title\'></h1>\n        <h4 class="se-page-list__sub-title">{{nav.catalogName | l10n}} - {{nav.catalogVersion}}</h4>\n\n        <sites-link data-css-class="se-page-list__page-link se-page-list__page-link--left"\n            data-icon-css-class="se-page-list__page-link-icon" />\n    </div>\n    <navigation-editor-tree data-uri-context="nav.uriContext"\n        data-read-only="nav.readOnly"></navigation-editor-tree>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/newPageDisplayCondition/newPageDisplayConditionTemplate.html",'<div data-ng-show="$ctrl.ready === true"\n    class="ySENewPageDisplayCondition">\n\n    <div class="page-condition-selector-wrapper form-group">\n\n        <label for="page-condition-selector-id"\n            class="control-label">{{ \'se.cms.page.condition.selection.label\' | translate }}</label>\n        <ui-select id="page-condition-selector-id"\n            data-ng-model="$ctrl.conditionSelected"\n            class="form-control"\n            search-enabled="false"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.dataChanged()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.conditionSelected.label | translate }}\n            </ui-select-match>\n            <ui-select-choices repeat="c in $ctrl.conditions">\n                {{ c.label | translate }}\n            </ui-select-choices>\n        </ui-select>\n        <span class="help-inline">\n            <span class="help-block-inline">{{ $ctrl.conditionSelected.description | translate }}</span>\n        </span>\n    </div>\n\n    <div data-ng-if="$ctrl.showPrimarySelector()"\n        class="page-condition-primary-selector-wrapper form-group">\n        <label for="page-condition-primary-selector-id"\n            class="control-label">{{ \'se.cms.page.condition.primary.association.label\' | translate }}</label>\n        <ui-select id="page-condition-primary-selector-id"\n            data-ng-model="$ctrl.primarySelected"\n            class="form-control"\n            search-enabled="true"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.dataChanged()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.primarySelected.name }}\n            </ui-select-match>\n            <ui-select-choices repeat="page in $ctrl.primaryPageChoices | filter:$select.search">\n                {{ page.name }}\n            </ui-select-choices>\n        </ui-select>\n        <span data-ng-show="$ctrl.primarySelected.label"\n            class="help-inline">\n            <span class="help-block-inline">{{ \'se.cms.page.label.label\' | translate }}: {{ $ctrl.primarySelected.label }}</span>\n        </span>\n    </div>\n\n    <div data-ng-if="$ctrl.showHomePageWidget()">\n        <div class="se-component-homepage checkbox">\n            <input type="checkbox"\n                id="set-homepage-checkbox"\n                class="se-component-item--details"\n                name="clone-on-drop"\n                data-ng-change="$ctrl.homePageChanged()"\n                data-ng-model="$ctrl.homepage">\n            <label class="control-label se-component-homepage--label"\n                for="set-homepage-checkbox"\n                data-translate="se.cms.display.conditions.homepage.set" />\n        </div>\n        <label class="control-label se-component-homepage--label"\n            for="set-homepage-checkbox"\n            data-ng-if="$ctrl.showReplaceLabel">\n            {{ "se.cms.display.conditions.homepage.replace" | translate: { currentHomepage: $ctrl.currentHomePageName } }}\n        </label>\n    </div>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectPageTemplate/selectPageTemplateTemplate.html",'<div class="page-type-step-template">\n    <div class="se-input-group page-type-step-template-list-search">\n        <span class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </span>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagewizard.templatestep.searchplaceholder\' | translate }}"\n            data-ng-model="$ctrl.searchString"\n            name="query" />\n        <span data-ng-if="$ctrl.searchString"\n            class="se-input-group--addon ySESearchIcon"\n            data-ng-click="$ctrl.clearSearch()">\n            <span class="glyphicon glyphicon-remove-sign"></span>\n        </span>\n    </div>\n    <div class="page-wizard-list">\n        <div data-ng-repeat="template in $ctrl.pageTemplates | templateNameFilter:$ctrl.searchString track by $id(template)"\n            data-ng-class="{ \'page-type-step-template__item__selected\': $ctrl.isSelected(template)}"\n            class="page-type-step-template__item"\n            data-ng-click="$ctrl.templateSelected(template)">\n            <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n            <div class="page-type-step-template__item--info">\n                <div class="page-type-step-template__item--info__title">{{ template.name }}</div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectPageType/selectPageTypeTemplate.html",'<div class="page-type-step-template">\n    <div class="page-type-step-template__text ySEText">{{ \'se.cms.addpagewizard.pagetype.description\' | translate}}</div>\n    <div data-ng-repeat="pageType in $ctrl.pageTypes"\n        data-ng-class="{ \'page-type-step-template__item__selected\': $ctrl.isSelected(pageType)}"\n        class="page-type-step-template__item"\n        data-ng-click="$ctrl.selectType(pageType)">\n        <span class="hyicon hyicon-checked page-type-step-template__item__icon"></span>\n        <div class="page-type-step-template__item--info">\n            <div class="page-type-step-template__item--info__title">{{ pageType.name | l10n }}</div>\n            <div class="page-type-step-template__item--info__description">{{ pageType.description | l10n }}</div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/components/selectTargetCatalogVersion/selectTargetCatalogVersionTemplate.html",'<div class="target-catalog-version-selector-wrapper form-group">\n    <label for="target-catalog-version-selector-id"\n        class="control-label"\n        data-translate="se.cms.clonepagewizard.options.targetcatalogversion.label"></label>\n\n    <y-select data-ng-if="$ctrl.catalogVersions.length"\n        data-id="se-catalog-version-selector-dropdown"\n        data-ng-model="$ctrl.selectedCatalogVersion"\n        data-fetch-strategy="$ctrl.catalogVersionSelectorFetchStrategy"\n        data-on-change="$ctrl.onSelectionChanged"\n        data-search-enabled="false"\n        data-get-api="$ctrl.setYSelectAPI($api)">\n    </y-select>\n\n    <div data-ng-if="$ctrl.catalogVersionContainsPageWithSameLabel">\n        <span class="warning-input help-block"\n            data-translate="se.cms.clonepagewizard.options.targetcatalogversion.label.exists.message"></span>\n    </div>\n    <div data-ng-if="$ctrl.pageAlreadyExists()">\n        <span class="warning-input help-block"\n            data-translate="se.cms.clonepagewizard.options.targetcatalogversion.pagetype.exists.message"></span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageDisplayConditionStepTemplate.html",'<y-event-message class="existing-homepage__ymessage"\n    data-show-event="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n    data-hide-event="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'">\n</y-event-message>\n\n<new-page-display-condition data-page-type-code="addPageWizardCtl.getPageTypeCode()"\n    data-uri-context="addPageWizardCtl.uriContext"\n    data-result-fn="addPageWizardCtl.variationResult">\n</new-page-display-condition>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageInfoStepTemplate.html",'<span data-ng-if="addPageWizardCtl.isPageInfoActive()">\n    <generic-editor data-structure="addPageWizardCtl.getPageInfoStructure()"\n        data-content="addPageWizardCtl.getPageInfo()"\n        data-submit="addPageWizardCtl.callbacks.savePageInfo"\n        data-reset="addPageWizardCtl.callbacks.resetPageInfo"\n        data-is-dirty="addPageWizardCtl.callbacks.isDirtyPageInfo"\n        data-is-valid="addPageWizardCtl.callbacks.isValidPageInfo">\n    </generic-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageRestrictionsStepTemplate.html",'<span data-ng-if="addPageWizardCtl.isRestrictionsActive()">\n\n    <div data-ng-if="addPageWizardCtl.getPageInfo().restrictions.length > 1">\n        <page-restrictions-info-message />\n    </div>\n\n    <restrictions-editor data-editable="true"\n        data-save-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.save"\n        data-reset-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.reset"\n        data-cancel-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.cancel"\n        data-is-dirty-fn="addPageWizardCtl.restrictionsEditorFunctionBindings.isDirty"\n        data-on-restrictions-changed="addPageWizardCtl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n        data-get-restriction-types="addPageWizardCtl.getRestrictionTypes()"\n        data-get-supported-restriction-types="addPageWizardCtl.getSupportedRestrictionTypes()"\n        data-item="addPageWizardCtl.getPageInfo()">\n    </restrictions-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageTemplateStepTemplate.html",'<select-page-template data-uri-context="addPageWizardCtl.uriContext"\n    data-page-type-code="addPageWizardCtl.getPageTypeCode()"\n    data-on-template-selected="addPageWizardCtl.templateSelected">\n</select-page-template>'),e.put("web/features/cmssmarteditContainer/components/pages/addPageWizard/templates/pageTypeStepTemplate.html",'<select-page-type data-on-type-selected="addPageWizardCtl.typeSelected">\n</select-page-type>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/components/clonePageInfo/componentCloneInfoTemplate.html",'<y-message data-ng-if="$ctrl.catalogVersionContainsPageWithSameTypeCode"\n    data-type="warning">\n    <message-description translate="se.cms.clonepagewizard.pageinfo.targetcatalogversion.pagetype.exists.message"\n        translate-value-type-code="{{$ctrl.pageTypeCode}}">\n    </message-description>\n</y-message>\n\n<generic-editor data-structure="$ctrl.structure"\n    data-content="$ctrl.content"\n    data-submit="$ctrl.submit"\n    data-reset="$ctrl.reset"\n    data-is-dirty="$ctrl.isDirty"\n    data-is-valid="$ctrl.isValid"\n    data-get-api="$ctrl.setGenericEditorApi($api)">\n</generic-editor>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/components/clonePageOptions/componentCloneOptionTemplate.html",'<label for="components-cloned-selector-id"\n    class="control-label">\n    <span data-translate="se.cms.clonepagewizard.options.title"></span>\n    <y-help data-title="$ctrl.helpTitle"\n        data-template="$ctrl.helpTemplate"></y-help>\n</label>\n<div id="components-cloned-selector-id">\n    <div class="radio">\n        <input class="components-cloned-option-id"\n            type="radio"\n            name="componentsclone"\n            id="reference-cloning"\n            ng-model="$ctrl.componentInSlotOption"\n            ng-click="$ctrl.updateComponentInSlotOption($ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING)"\n            ng-value="$ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING">\n        <label for="reference-cloning"\n            data-translate="se.cms.clonepagewizard.options.existing" />\n    </div>\n    <div class="radio">\n        <input class="components-cloned-option-id"\n            type="radio"\n            id="deep-cloning"\n            name="componentsclone"\n            ng-model="$ctrl.componentInSlotOption"\n            ng-click="$ctrl.updateComponentInSlotOption($ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE)"\n            ng-value="$ctrl.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE">\n        <label for="deep-cloning"\n            data-translate="se.cms.clonepagewizard.options.copies" />\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageInfoStepTemplate.html",'<component-clone-info-form data-ng-if="clonePageWizardCtrl.isPageInfoActive()"\n    data-structure="clonePageWizardCtrl.getPageInfoStructure()"\n    data-content="clonePageWizardCtrl.getPageInfo()"\n    data-submit="clonePageWizardCtrl.callbacks.savePageInfo"\n    data-reset="clonePageWizardCtrl.callbacks.resetPageInfo"\n    data-is-dirty="clonePageWizardCtrl.callbacks.isDirtyPageInfo"\n    data-is-valid="clonePageWizardCtrl.callbacks.isValidPageInfo"\n    data-page-template="clonePageWizardCtrl.getPageTemplate()"\n    data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-target-catalog-version="clonePageWizardCtrl.getTargetCatalogVersion()">\n</component-clone-info-form>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageOptionsStepTemplate.html",'<y-event-message class="existing-homepage__ymessage"\n    data-show-event="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n    data-hide-event="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'">\n</y-event-message>\n\n<select-target-catalog-version data-ng-if="clonePageWizardCtrl.isBasePageInfoAvailable()"\n    data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-page-label="clonePageWizardCtrl.getPageLabel()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-base-page-info="clonePageWizardCtrl.getBasePageInfo()"\n    data-on-target-catalog-version-selected="clonePageWizardCtrl.onTargetCatalogVersionSelected($catalogVersion)">\n</select-target-catalog-version>\n\n<new-page-display-condition data-page-type-code="clonePageWizardCtrl.getPageTypeCode()"\n    data-uri-context="clonePageWizardCtrl.uriContext"\n    data-result-fn="clonePageWizardCtrl.variationResult"\n    data-initial-condition-selected="\'page.displaycondition.variation\'"\n    data-initial-primary-page-selected="clonePageWizardCtrl.getPageLabel()"\n    data-target-catalog-version="clonePageWizardCtrl.getTargetCatalogVersion()">\n</new-page-display-condition>\n\n<component-clone-option-form data-on-selection-change="clonePageWizardCtrl.triggerUpdateCloneOptionResult($cloneOptionData)"></component-clone-option-form>'),e.put("web/features/cmssmarteditContainer/components/pages/clonePageWizard/templates/clonePageRestrictionsStepTemplate.html",'<span data-ng-if="clonePageWizardCtrl.isRestrictionsActive()">\n    <div data-ng-if="clonePageWizardCtrl.getPageRestrictions().length > 1">\n        <page-restrictions-info-message />\n    </div>\n\n    <restrictions-editor data-editable="true"\n        data-save-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.save"\n        data-reset-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.reset"\n        data-cancel-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.cancel"\n        data-is-dirty-fn="clonePageWizardCtrl.restrictionsEditorFunctionBindings.isDirty"\n        data-on-restrictions-changed="clonePageWizardCtrl.restrictionsResult($onlyOneRestrictionMustApply, $restrictions)"\n        data-get-restriction-types="clonePageWizardCtrl.getRestrictionTypes()"\n        data-get-supported-restriction-types="clonePageWizardCtrl.getSupportedRestrictionTypes()"\n        data-item="clonePageWizardCtrl.getBasePageInfo()"\n        data-restrictions="clonePageWizardCtrl.getBasePageInfo().restrictions">\n    </restrictions-editor>\n</span>'),e.put("web/features/cmssmarteditContainer/components/pages/deletePageMenu/deletePageToolbarItemTemplate.html",'<div class="toolbar-action"\n    data-ng-if="$ctrl.ready"\n    data-item-key="{{ $ctrl.toolbarItem.key }}">\n    <button type="button"\n        class="btn btn-default toolbar-action--button"\n        data-ng-disabled="!$ctrl.isDeletePageEnabled"\n        data-ng-class="{\'toolbar-action__disabled\': !$ctrl.isDeletePageEnabled}"\n        data-ng-click="$ctrl.isDeletePageEnabled && $ctrl.onClickOnDeletePage()">\n        <svg class="toolbar-delete-action__icon"\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 26 31">\n            <path d="M303.807,1015.01h-4.366v-3.47a0.54,0.54,0,0,0-.559-0.53,0.085,0.085,0,0,0-.06.02,0.076,0.076,0,0,0-.04-0.02h-13.64a0.531,0.531,0,0,0-.549.53v3.47h-4.377a1.171,1.171,0,0,0-1.208,1.16v4.89h2.049v19.79a1.155,1.155,0,0,0,1.2,1.15h19.514a1.163,1.163,0,0,0,1.208-1.15v-19.79h2.038v-4.89A1.171,1.171,0,0,0,303.807,1015.01Zm-17.116-1.95h10.642v1.95H286.691v-1.95Zm14.178,26.79a0.083,0.083,0,0,1-.1.09H283.255a0.083,0.083,0,0,1-.1-0.09v-18.79h17.714v18.79Zm2.038-20.84h-21.79v-1.84a0.093,0.093,0,0,1,.1-0.11h21.591a0.093,0.093,0,0,1,.1.11v1.84h0Zm-6.883,4.29h2.108v14.71h-2.108V1023.3Zm-5.112,0h2.108v14.71h-2.108V1023.3Zm-5,0h2.108v14.71h-2.108V1023.3Z"\n                transform="translate(-279 -1011)" />\n        </svg>\n        <div class="toolbar-action--button--txt"\n            data-translate="se.cms.actionitem.page.trash"></div>\n    </button>\n    <div class="toolbar-delete-action__popover"\n        data-ng-if="!$ctrl.isDeletePageEnabled"\n        data-y-popover\n        data-placement="\'bottom\'"\n        data-template="$ctrl.getTooltipTemplate()"\n        data-trigger="\'hover\'">\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/deletePageMenu/deletePageToolbarItemWrapperTemplate.html",'<delete-page-toolbar-item data-toolbar-item="item"></delete-page-toolbar-item>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsEditor/displayConditionsEditorTemplate.html",'<div>\n    <y-event-message class="existing-homepage__ymessage"\n        data-show-event="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n        data-hide-event="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'">\n    </y-event-message>\n    <display-conditions-page-info data-page-name="$ctrl.getPageName()"\n        data-page-type="$ctrl.getPageType()"\n        data-is-primary="$ctrl.isPagePrimary()"></display-conditions-page-info>\n    <div data-ng-if="$ctrl.isPagePrimary()">\n        <display-conditions-page-variations data-variations="$ctrl.getVariations()"></display-conditions-page-variations>\n    </div>\n    <div data-ng-if="!$ctrl.isPagePrimary()">\n        <display-conditions-primary-page data-read-only="$ctrl.getIsAssociatedPrimaryReadOnly()"\n            data-associated-primary-page="$ctrl.getAssociatedPrimaryPage()"\n            data-all-primary-pages="$ctrl.getPrimaryPages()"\n            data-on-primary-page-select="$ctrl.onPrimaryPageSelect(primaryPage)"></display-conditions-primary-page>\n    </div>\n\n    <div data-ng-if="$ctrl.showHomePageWidget()">\n        <div class="se-component-homepage checkbox">\n            <input type="checkbox"\n                id="set-homepage-checkbox"\n                class="se-component-item--details"\n                name="clone-on-drop"\n                data-ng-disabled="$ctrl.disableHomepageCheckbox()"\n                data-ng-change="$ctrl.homePageChanged()"\n                data-ng-model="$ctrl.page.homepage">\n            <label class="control-label se-component-homepage--label"\n                for="set-homepage-checkbox"\n                data-translate="se.cms.display.conditions.homepage.set" />\n            <y-help data-ng-if="$ctrl.disableHomepageCheckbox()"\n                data-template="$ctrl.getHomePageDisabledTooltipTemplate()"></y-help>\n        </div>\n        <label class="control-label se-component-homepage--label"\n            for="set-homepage-checkbox"\n            data-ng-if="$ctrl.showReplaceLabel">\n            {{ "se.cms.display.conditions.homepage.replace" | translate: { currentHomepage: $ctrl.currentHomePageName } }}\n        </label>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPageInfo/displayConditionsPageInfoTemplate.html",'<div class="ySEDisplayConditionsPageInfo">\n    <div class="row">\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="{{ $ctrl.pageNameI18nKey }}"></label>\n            <div class="form-readonly-text form-readonly-text__tight dc-page-name"\n                data-ng-bind="$ctrl.pageName"></div>\n        </div>\n        <div class="col-md-6 form-group">\n            <label class="control-label"\n                data-translate="{{ $ctrl.pageTypeI18nKey }}"></label>\n            <div class="form-readonly-text form-readonly-text__tight dc-page-type"\n                data-ng-bind="$ctrl.pageType"></div>\n        </div>\n    </div>\n    <div class="form-group">\n        <label class="control-label">\n            <span data-translate="{{ $ctrl.displayConditionLabelI18nKey }}"></span>\n            <y-help data-title="pageSync.helpTitle"\n                data-template="$ctrl.helpTemplate"></y-help>\n        </label>\n        <p class="form-readonly-text form-readonly-text__tight dc-page-display-condition">{{ $ctrl.getPageDisplayConditionI18nKey() | translate }}</p>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPageVariations/displayConditionsPageVariationsTemplate.html",'<div class="form-group dc-page-variations">\n    <label class="control-label control-label__margin">\n        <span>{{ $ctrl.variationPagesTitleI18nKey | translate }}</span>\n        <y-help data-ng-if="$ctrl.variations.length > 0"\n            data-template="$ctrl.renderers.helpTemplate()">\n        </y-help>\n    </label>\n    <div data-ng-if="$ctrl.variations.length === 0"\n        class="dc-no-variations form-readonly-text form-readonly-text__tight form-readonly-text__inline">{{ $ctrl.noVariationsI18nKey | translate }}</div>\n    <div data-ng-if="$ctrl.variations.length > 0">\n        <client-paged-list data-items="$ctrl.variations"\n            data-keys="$ctrl.keys"\n            data-renderers="$ctrl.renderers"\n            data-items-per-page="$ctrl.itemsPerPage"\n            class="dc-page-variations-list">\n        </client-paged-list>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/displayConditions/displayConditionsPrimaryPage/displayConditionsPrimaryPageTemplate.html",'<div class="form-group form-group__inline">\n    <label class="control-label control-label__margin">{{ $ctrl.associatedPrimaryPageLabelI18nKey | translate }}</label>\n    <div data-ng-if="$ctrl.readOnly"\n        class="dc-associated-primary-page form-readonly-text form-readonly-text__tight">{{ ::$ctrl.associatedPrimaryPage.name }}\n    </div>\n    <div data-ng-if="!$ctrl.readOnly">\n        <ui-select id="display-conditions-primary-association-selector"\n            data-ng-model="$ctrl.associatedPrimaryPage"\n            class="form-control"\n            search-enabled="true"\n            theme="select2"\n            data-dropdown-auto-width="false"\n            data-ng-change="$ctrl.triggerOnPrimaryPageSelect()">\n            <ui-select-match id="select-type"\n                class="ySEPageRestr-picker--select__match">\n                {{ $ctrl.associatedPrimaryPage.name }}\n            </ui-select-match>\n            <ui-select-choices repeat="primaryPage in $ctrl.allPrimaryPages | filter:$select.search">\n                {{ primaryPage.name }}\n            </ui-select-choices>\n        </ui-select>\n        <span data-ng-show="$ctrl.associatedPrimaryPage.name"\n            class="help-inline">\n            <span class="help-block-inline">{{ \'se.cms.page.label.label\' | translate }}: {{ $ctrl.associatedPrimaryPage.label }}</span>\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/homepageIcon/HomepageIconTemplate.html",'<span data-ng-if="$ctrl.isVisible()"\n    data-ng-class="$ctrl.getHomepageIcon()"></span>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfoMenuTemplate.html",'<div class="toolbar-action"\n    data-uib-dropdown\n    data-auto-close="outsideClick"\n    data-is-open="$ctrl.actionItem.isOpen"\n    data-item-key="{{ $ctrl.actionItem.key }}"\n    data-on-toggle="$ctrl.onDropdownToggle(open)">\n    <button type="button"\n        class="btn btn-default toolbar-action--button"\n        data-uib-dropdown-toggle\n        aria-pressed="false">\n        <span class="hyicon hyicon-info se-toolbar-menu-ddlb--button__icon"></span>\n        <div class="se-toolbar-page-info-wrapper">\n            <span class="toolbar-action--button--txt">{{ $ctrl.actionItem.name | translate}}</span>\n            <homepage-icon data-cms-page="$ctrl.cmsPage"\n                data-uri-context="$ctrl.uriContext"\n                class="ng-isolate-scope se-toolbar-page-info-wrapper__homepage-icon">\n            </homepage-icon>\n        </div>\n    </button>\n    <div data-uib-dropdown-menu\n        class="btn-block dropdown-menu-left toolbar-action--include">\n        <div class="ySEPageInfoMenu"\n            ng-if="$ctrl.actionItem.isOpen">\n            <div class="ySEPageInfoMenu__header">\n                <div class="ySEPageInfoMenu__headerContainer row">\n                    <div class="col-xs-10">\n                        <div class="ySEHeaderText"\n                            data-translate="se.cms.pageinfo.information.title"></div>\n                    </div>\n                    <div class="col-xs-2"\n                        data-has-operation-permission="$ctrl.editPagePermission">\n                        <button class="btn pull-right ySEPageInfo__edit-btn"\n                            data-ng-if="$ctrl.isComponentReady"\n                            data-ng-click="$ctrl.onEditPageClick()">\n                            {{\'se.cms.contextmenu.title.edit\' | translate}}\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class="ySEPageInfoMenu__content">\n                <div class="ySEPageInfoStaticInfoContainer">\n                    <div class="ySEPageInfoStaticInfo">\n                        <div data-ng-if="$ctrl.isComponentReady"\n                            class="ySEPageInfoEditInfoContainer">\n                            <generic-editor data-smartedit-component-id="$ctrl.pageInfo.uid"\n                                data-smartedit-component-type="$ctrl.pageInfo.typeCode"\n                                data-structure="$ctrl.pageStructure"\n                                data-content="$ctrl.pageInfo">\n                            </generic-editor>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageInfoMenu/pageInfoMenuWrapperTemplate.html",'<page-info-menu action-item="item"></page-info-menu>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/clonePageItem/clonePageItemTemplate.html",'<div data-has-operation-permission="$ctrl.clonePagePermission">\n    <a class="se-dropdown-item"\n        data-ng-click="$ctrl.onClickOnClone()">\n        <span class="se-dropdown-item--label"\n            data-translate="se.cms.actionitem.page.clone" />\n    </a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/deletePageItem/deletePageItemTemplate.html",'<div data-has-operation-permission="$ctrl.deletePagePermission">\n    <a class="se-dropdown-item se-dropdown-item--delete"\n        data-ng-class="{\'se-dropdown-item__disabled\': !$ctrl.isDeletePageEnabled}"\n        data-ng-click="$ctrl.isDeletePageEnabled && $ctrl.onClickOnDeletePage()">\n        <span class="se-dropdown-item--label"\n            data-translate="se.cms.actionitem.page.trash" />\n        <div class="se-dropdown-item--delete-page-popover"\n            data-ng-if="!$ctrl.isDeletePageEnabled"\n            data-y-popover\n            data-placement="\'left\'"\n            data-template="$ctrl.getTooltipTemplate()"\n            data-trigger="\'hover\'">\n        </div>\n    </a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/editPageItem/editPageItemTemplate.html",'<div data-has-operation-permission="$ctrl.editPagePermission">\n    <a class="se-dropdown-item"\n        data-ng-click="$ctrl.onClickOnEdit()">\n        <span class="se-dropdown-item--label"\n            data-translate="se.cms.actionitem.page.edit" />\n    </a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/permanentlyDeletePageItem/permanentlyDeleteBlockedTooltipTemplate.html",'<div class="popover-tooltip">\n    <span data-translate="se.cms.actionitem.page.permanently.delete.blocked" />\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/permanentlyDeletePageItem/permanentlyDeletePageItemTemplate.html",'<div data-has-operation-permission="$ctrl.permanentlyDeletePagePermission">\n    <a class="se-dropdown-item"\n        ng-class="{\'se-dropdown-item__disabled\': $ctrl.isDeleteButtonDisabled()}"\n        data-ng-click="!$ctrl.isDeleteButtonDisabled() && $ctrl.permanentlyDelete()">\n        <span class="se-dropdown-item--label"\n            data-translate="se.cms.actionitem.page.permanently.delete" />\n\n        <div class="se-dropdown-item--delete-page-popover"\n            data-ng-if="$ctrl.isDeleteButtonDisabled()"\n            data-y-popover\n            data-placement="\'bottom\'"\n            data-template-url="\'permanentlyDeleteBlockedTooltipTemplate.html\'"\n            data-trigger="\'hover\'">\n        </div>\n    </a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/restorePageItem/restorePageItemTemplate.html",'<div data-has-operation-permission="$ctrl.restorePagePermission">\n    <a class="se-dropdown-item"\n        data-ng-click="$ctrl.restorePage()">\n        <span class="se-dropdown-item--label"\n            data-translate="se.cms.actionitem.page.restore" />\n    </a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageItems/syncPageItem/syncPageItemTemplate.html",'<a class="se-dropdown-item"\n    data-ng-click="$ctrl.onClickOnSync()">\n    <span class="se-dropdown-item--label"\n        data-translate="se.cms.actionitem.page.sync" />\n</a>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListLinkDirectiveTemplate.html",'<div class="page-list-link-container">\n    <a class="page-list-link-item__link se-catalog-version__link"\n        data-ng-href="#!/pages/{{$ctrl.siteId}}/{{$ctrl.catalog.catalogId}}/{{$ctrl.catalogVersion.version}}"\n        data-translate="se.cms.cataloginfo.pagelist"></a>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListLinkTemplate.html",'<page-list-link data-catalog="$ctrl.catalog"\n    data-catalog-version="$ctrl.catalogVersion"\n    data-site-id="$ctrl.siteId"></page-list-link>'),e.put("web/features/cmssmarteditContainer/components/pages/pageList/pageListTemplate.html",'<div class="ySmartEditToolbars">\n    <toolbar data-css-class="ySmartEditHeaderToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="smartEditHeaderToolbar"></toolbar>\n</div>\n<div data-ng-if="pageListCtl.isReady"\n    class="pageListWrapper">\n    <div class="se-page-list__header">\n        <h1 class="se-page-list__title">\n            <span data-translate="se.cms.pagelist.title"></span>\n        </h1>\n        <h4 class="se-page-list__sub-title">{{pageListCtl.catalogName | l10n}} - {{pageListCtl.catalogVersion}}</h4>\n\n        <sites-link data-css-class="se-page-list__page-link se-page-list__page-link--left"\n            data-icon-css-class="se-page-list__page-link-icon" />\n\n        <div class="se-page-list__page-link se-page-list__page-link--right"\n            data-ng-if="pageListCtl.isCatalogVersionInactive"\n            data-ng-click="pageListCtl.goToTrash()">\n            <a class="se-page-list__page-link-text"\n                data-translate="se.cms.pagelist.trashcan.link.text"\n                data-translate-values="{{ pageListCtl.trashedPagesTranslationData }}"></a>\n            <span class="se-page-list__page-link-icon icon-navigation-right-arrow"></span>\n        </div>\n    </div>\n\n    <div class="se-input-group ySEPage-list-search">\n        <div class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </div>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}"\n            data-ng-model="pageListCtl.query.value"\n            data-ng-model-options="pageListCtl.searchOptions"\n            name="query">\n        <div class="se-input-group--addon ySESearchIcon"\n            data-ng-show="pageListCtl.query.value"\n            data-ng-click="pageListCtl.reset()">\n            <span class="glyphicon glyphicon-remove-sign se-component-search--reset-icon"></span>\n        </div>\n    </div>\n\n    <div class="se-page-list__add-btn-wrapper"\n        has-operation-permission="\'se.edit.page\'">\n        <button class="y-add-btn"\n            data-ng-click="pageListCtl.openAddPageWizard()">\n            <span class="hyicon hyicon-add"></span>\n            <span class="y-add-btn__text">{{\'se.cms.addpagewizard.addpage\' | translate}}</span>\n        </button>\n    </div>\n\n    <dynamic-paged-list data-config="pageListCtl.pageListConfig"\n        data-mask="pageListCtl.query.value"\n        data-get-api="pageListCtl.getApi($api);">\n    </dynamic-paged-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/pages/pageRestrictionsInfoMessage/pageRestrictionsInfoMessageTemplate.html",'<y-message data-message-id="yMsgInfoId"\n    data-type="info"\n    class="se-restrictions-editor--y-message--modal-adjusted">\n    <message-title>{{ \'se.cms.restrictions.editor.ymessage.title\' | translate }}</message-title>\n    <message-description>{{ \'se.cms.restrictions.editor.ymessage.description\' | translate }}</message-description>\n</y-message>'),e.put("web/features/cmssmarteditContainer/components/pages/restrictionsPageListIcon/restrictionsPageListIconTemplate.html",'<img class="restrictionPageListIcon"\n    data-ng-src="{{ $ctrl.imageSrc }}"\n    data-y-popover\n    data-placement="bottom"\n    data-trigger="\'hover\'"\n    data-template="$ctrl.title">'),e.put("web/features/cmssmarteditContainer/components/pages/trashedPageList/trashedpageListTemplate.html",'<div class="ySmartEditToolbars">\n    <toolbar data-css-class="ySmartEditHeaderToolbar"\n        data-image-root="imageRoot"\n        data-toolbar-name="smartEditHeaderToolbar"></toolbar>\n</div>\n<div class="pageListWrapper">\n    <div class="se-page-list__header">\n        <h1 class="se-page-list__title"\n            data-translate=\'se.cms.trashedpagelist.title\'></h1>\n        <h4 class="se-page-list__sub-title">{{trashedPageListCtl.catalogName | l10n}} - {{trashedPageListCtl.catalogVersion}}</h4>\n        <div class="se-page-list__page-link se-page-list__page-link--left"\n            data-ng-click="trashedPageListCtl.backToPagelist()">\n            <span class="se-page-list__page-link-icon icon-navigation-left-arrow"></span>\n            <a class="se-page-list__page-link-text">{{ \'se.cms.back.to.pagelist\' | translate }}</a>\n        </div>\n    </div>\n\n    <div class="se-input-group ySEPage-list-search">\n        <div class="se-input-group--addon">\n            <span class="hyicon hyicon-search ySEPage-list-search-icon"></span>\n        </div>\n        <input type="text"\n            class="se-input-group--input ySEPage-list-search-input"\n            placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}"\n            data-ng-model="trashedPageListCtl.mask"\n            data-ng-model-options="{debounce: 500}"\n            name="mask">\n        <div class="se-input-group--addon ySESearchIcon"\n            data-ng-show="trashedPageListCtl.mask"\n            data-ng-click="trashedPageListCtl.reset()">\n            <span class="glyphicon glyphicon-remove-sign"></span>\n        </div>\n    </div>\n\n    <dynamic-paged-list class="se-trashed-pages"\n        data-config="trashedPageListCtl.trashedPageListConfig"\n        data-mask="trashedPageListCtl.mask"\n        data-get-api="trashedPageListCtl.getApi($api);">\n    </dynamic-paged-list>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementEditTemplate.html",'<div data-ng-if="$ctrl.ready"\n    class="se-restriction-management-edit">\n    <div data-ng-if="$ctrl.isTypeSupported"\n        class="se-restriction-management-supported-edit">\n        <div class="se-restriction-management-edit__header">\n            <div class="se-restriction-management-edit__name">\n                {{ $ctrl.restriction.name }}\n            </div>\n            <div class="se-restriction-management-edit__code">\n                {{ $ctrl.restriction.typeCode }}\n            </div>\n        </div>\n        <div class="se-restriction-management-edit__data">\n            <item-manager data-item="$ctrl.restriction"\n                data-mode="$ctrl.itemManagementMode"\n                data-structure-api="$ctrl.structureApi"\n                data-content-api="$ctrl.contentApi"\n                data-uri-context="$ctrl.uriContext"\n                data-component-type="$ctrl.restriction.itemtype"\n                data-submit-function="$ctrl.submitInternal"\n                data-is-dirty="$ctrl.isDirtyFn" />\n        </div>\n    </div>\n    <div data-ng-if="!$ctrl.isTypeSupported">\n        <div class="se-restrictions-list--content">\n            <div>\n                {{ \'se.cms.restriction.management.select.type.not.supported.warning\' | translate }}\n            </div>\n            <p class="ySERestrictionsNameHeader">{{ $ctrl.restriction.name }}</p>\n            <div class="ySERestrictionsDescription">\n                {{ $ctrl.restriction.description }}\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementItemNameTemplate.html",'<span class="se-restriction-management-item-name"\n    data-ng-bind-html="item.name | l10n">\n</span>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/flavours/restrictionManagementSelectTemplate.html",'<div class="se-restriction-management-select">\n    <y-message data-ng-show="$ctrl.selectModel.getRestriction() && !$ctrl.selectModel.isTypeSupported()"\n        data-message-id="yMsgWarningId"\n        data-type="warning"\n        class="se-restriction-management-select--y-message--modal-adjusted">\n        <message-title>{{ \'se.cms.restriction.management.select.type.not.supported.warning\' | translate }}</message-title>\n    </y-message>\n\n    <div class="se-restriction-management-select__y-select">\n        <label for=""\n            class="control-label">{{ \'se.cms.restriction.management.select.type.label\' | translate }}</label>\n\n        <y-select data-id="restriction-type"\n            data-fetch-strategy="{ fetchAll: $ctrl.selectModel.getRestrictionTypes }"\n            data-item-template="::$ctrl.itemTemplateUrl"\n            data-placeholder="\'se.cms.restriction.management.select.type.placeholder\'"\n            data-ng-model="$ctrl.selectModel.selectedIds.restrictionType"\n            data-on-change="$ctrl.selectRestrictionType"\n            data-search-enabled="false">\n        </y-select>\n    </div>\n\n    <div data-recompile-dom="$ctrl.resetSelector"\n        class="se-restriction-management-select__restriction">\n        <div data-ng-if="$ctrl.controllerModel.showRestrictionSelector"\n            class="se-restriction-management-select__restriction__info">\n            <label class="control-label se-restriction-management-select__restriction__info__label">\n                {{ \'se.cms.restriction.management.select.restriction.label\' | translate }}\n            </label>\n            <y-select data-id="restriction-name"\n                data-fetch-strategy="$ctrl.fetchOptions"\n                data-ng-model="$ctrl.selectModel.selectedIds.restriction"\n                data-placeholder="\'se.cms.restriction.management.select.restriction.placeholder\'"\n                data-on-change="$ctrl.selectRestriction"\n                data-disable-choice-fn="$ctrl.disableRestrictionChoice"\n                data-item-template="::$ctrl.itemTemplateUrl"\n                data-results-header-template="$ctrl.getResultsHeaderTemplate()"\n                data-results-header-label="::$ctrl.resultsHeaderLabel">\n            </y-select>\n        </div>\n\n        <div data-recompile-dom="$ctrl.resetEditor"\n            class="se-restriction-management-select__restriction__editor"\n            data-ng-if="$ctrl.controllerModel.showRestrictionEditor">\n            <p class="se-restriction-management-select__restriction__editor__instr">\n                {{ $ctrl.editorHeader | translate }}\n            </p>\n            <div data-ng-if="$ctrl.selectModel.isTypeSupported()">\n                <item-manager data-item="$ctrl.selectModel.getRestriction()"\n                    data-mode="$ctrl.controllerModel.mode"\n                    data-structure-api="$ctrl.controllerModel.structureApi"\n                    data-content-api="$ctrl.controllerModel.contentApi"\n                    data-uri-context="$ctrl.uriContext"\n                    data-component-type="$ctrl.selectModel.getRestrictionTypeCode()"\n                    data-submit-function="$ctrl.submitInternal"\n                    data-is-dirty="$ctrl.isDirtyInternal" />\n            </div>\n            <div class="ySERestrictionsList-item"\n                data-ng-if="!$ctrl.selectModel.isTypeSupported()">\n                <p class="ySERestrictionsNameHeader">{{ $ctrl.selectModel.getRestriction().name }}</p>\n                <div class="ySERestrictionsDescription">\n                    {{ $ctrl.selectModel.getRestriction().description }}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionManagement/restrictionManagementTemplate.html",'<div data-ng-if="$ctrl.editMode"\n    class="se-restriction-management se-restriction-management-edit">\n    <restriction-management-edit data-restriction="$ctrl.restriction"\n        data-get-supported-restriction-types-fn="$ctrl.getSupportedRestrictionTypesFn"\n        data-uri-context="$ctrl.uriContext"\n        data-is-dirty-fn="$ctrl.isDirtyFn"\n        data-submit-fn="$ctrl.submitInternal">\n    </restriction-management-edit>\n</div>\n<div data-ng-if="!$ctrl.editMode"\n    class="se-restriction-management se-restriction-management-select">\n    <restriction-management-select data-existing-restrictions="$ctrl.existingRestrictions"\n        data-get-restriction-types-fn="$ctrl.getRestrictionTypesFn()"\n        data-get-supported-restriction-types-fn="$ctrl.getSupportedRestrictionTypesFn"\n        data-uri-context="$ctrl.uriContext"\n        data-is-dirty-fn="$ctrl.isDirtyFn"\n        data-submit-fn="$ctrl.submitInternal">\n    </restriction-management-select>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionsEditor/restrictionsEditorTemplate.html",'<div class="ySEVisbilityModalContainer">\n    <button data-ng-show="!$ctrl.showRestrictionPicker"\n        type="button"\n        class="y-add-btn"\n        data-ng-click="$ctrl.onClickOnAdd()">\n        <span class="hyicon hyicon-add"></span>\n        <span class="y-add-btn__text">{{ \'se.cms.restrictions.editor.button.add.new \' | translate }}</span>\n    </button>\n\n    <label data-ng-if="$ctrl.restrictions.length > 0"\n        class="ySEVisbilityModalContainer-leftPane-title">{{ \'se.cms.restrictions.list.title\' | translate }}</label>\n\n    <restrictions-table data-ng-if="$ctrl.isRestrictionsReady"\n        data-editable="true"\n        data-restrictions="$ctrl.restrictions"\n        data-on-click-on-edit=\'$ctrl.onClickOnEdit\'\n        data-on-criteria-selected="$ctrl.matchCriteriaChanged"\n        data-restriction-criteria="$ctrl.criteria"\n        data-errors="$ctrl.errors"\n        data-custom-class="\'ySERestrictionListLink\'">\n    </restrictions-table>\n\n    <div data-ng-if="$ctrl.errors.length > 0">\n        <span data-ng-repeat="error in $ctrl.errors"\n            class="se-help-block--has-error help-block">\n            {{ error.message | translate}}\n        </span>\n    </div>\n\n    <span data-ng-show="$ctrl.showRestrictionPicker"\n        class="ySEVisbilityModalContainer-rightPane__restriction">\n        <y-slider-panel data-slider-panel-configuration="$ctrl.sliderPanelConfiguration"\n            data-slider-panel-hide="$ctrl.sliderPanelHide"\n            class="se-add-restriction-panel"\n            data-slider-panel-show="$ctrl.sliderPanelShow">\n            <restriction-management data-config="$ctrl.restrictionManagement.operation"\n                data-uri-context="$ctrl.restrictionManagement.uriContext"\n                class="se-se-add-restriction-panel__restriction-management"\n                data-submit-fn="$ctrl.restrictionManagement.submitFn"\n                data-is-dirty-fn="$ctrl.restrictionManagement.isDirtyFn">\n            </restriction-management>\n        </y-slider-panel>\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/restrictions/restrictionsTable/restrictionsTableTemplate.html",'<div class="ySERestrictionsContainer ySERestrictionsContainer-left {{$ctrl.customClass}}">\n    <div data-ng-if="$ctrl.restrictions.length > 1">\n        <div data-ng-if="$ctrl.editable">\n            <ui-select on-select="$ctrl.criteriaClicked($item)"\n                data-ng-model="$ctrl.restrictionCriteria"\n                class="form-control ySERestriction-select"\n                search-enabled="false"\n                theme="select2"\n                data-dropdown-auto-width="false">\n                <ui-select-match placeholder="{{ \'se.cms.restrictions.picker.type.placeholder\' | translate }}"\n                    class="ySERestriction-select__placeholder">\n                    {{$select.selected.editLabel | translate}}\n                </ui-select-match>\n                <ui-select-choices repeat="criteriaOption in $ctrl.criteriaOptions"\n                    class="ySERestriction-select__choices"\n                    position="down ">\n                    {{ criteriaOption.editLabel | translate }}\n                </ui-select-choices>\n            </ui-select>\n        </div>\n        <div class="ySERestrictionsCriteria"\n            data-ng-if="!$ctrl.editable">\n            <span class="ySERestrictionsCriteriaLabel">{{ \'se.cms.restrictions.criteria\' | translate }} {{ $ctrl.restrictionCriteria.label | translate }}</span>\n        </div>\n    </div>\n\n    <div data-ng-if="$ctrl.showRemoveAllButton()"\n        class="ySERestrictionsContainer__clear_all">\n        <button class="btn btn-link cms-clean-btn ySERestrictionsContainer__clear_all__btn"\n            data-ng-click="$ctrl.removeAllRestrictions()"\n            data-translate="se.cms.restrictions.list.clear.all">\n        </button>\n    </div>\n\n    <div class="se-restrictions-list"\n        data-ng-if="$ctrl.restrictions.length > 0">\n        <div id="restriction-{{$index+1}}"\n            data-ng-repeat="restriction in $ctrl.restrictions"\n            class="se-restrictions-list--item">\n            <div class="se-restrictions-list--content"\n                data-ng-click="$ctrl.onSelect(restriction)">\n                <p class="ySERestrictionsNameHeader ng-class:{\'error-input\':$ctrl.isInError($index)}">{{ restriction.name }}</p>\n                <div class="ySERestrictionsTypeAndID ng-class:{\'error-input\':$ctrl.isInError($index)}">{{ restriction.typeCode }}</div>\n                <div class="ySERestrictionsDescription ng-class:{\'error-input\':$ctrl.isInError($index)}"\n                    title="{{ restriction.description }}">{{ restriction.description }}</div>\n            </div>\n            <div class="se-restrictions-list--options"\n                data-ng-if="$ctrl.editable">\n                <y-drop-down-menu dropdown-items="$ctrl.actions"\n                    selected-item="restriction"\n                    class="y-dropdown ySERestrictionsList-item-btn__more pull-right" />\n            </div>\n        </div>\n    </div>\n\n</div>'),e.put("web/features/cmssmarteditContainer/components/slots/revertToSharedSlotConfirmationTemplate.html",'<y-message class="revert-confirm--ymessage"\n    data-type="info"\n    data-message-id="\'revertToSharedSlotYMessage\'">\n    <message-description>\n        <translate>se.cms.slot.unshared.revert.to.shared.sync.ymessage</translate>\n    </message-description>\n</y-message>\n<div class="revert-confirm--description"\n    data-translate="se.cms.slot.unshared.revert.to.shared.description"></div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/catalogs/catalogDetailsSyncTemplate.html",'<synchronize-catalog data-catalog="$ctrl.catalog"\n    data-catalog-version="$ctrl.catalogVersion"\n    data-active-catalog-version="$ctrl.activeCatalogVersion">\n</synchronize-catalog>'),e.put("web/features/cmssmarteditContainer/components/synchronize/catalogs/synchronizeCatalogTemplate.html",'<div class="se-synchronize-catalog">\n    \x3c!-- Status --\x3e\n    <div class="se-synchronize-catalog__item se-synchronize-catalog__sync-info">\n        <div data-ng-if="ctrl.isSyncJobFinished()">\n            <label class="se-synchronize-catalog__sync-info__sync-label"\n                data-ng-if="ctrl.catalogVersion.active">\n                {{ \'se.cms.cataloginfo.lastsyncedfrom\' | translate: ctrl.getSyncFromLabels() }}\n            </label>\n            <label class="se-synchronize-catalog__sync-info__sync-label"\n                data-ng-if="!ctrl.catalogVersion.active"\n                data-translate="se.cms.cataloginfo.lastsynced"></label>\n            <span class="catalog-last-synced">{{ctrl.syncJobStatus.syncEndTime| date:\'short\'}}</span>\n        </div>\n        <span data-ng-if="ctrl.isSyncJobInProgress()"\n            class="se-synchronize-catalog__in-progress"\n            data-translate="se.sync.status.synced.inprogress"></span>\n        <span data-ng-if="ctrl.isSyncJobFailed()"\n            class="label-error se-synchronize-catalog__sync-failed"\n            data-translate="se.sync.status.synced.syncfailed"></span>\n    </div>\n\n    <div class="se-synchronize-catalog__item se-synchronize-catalog__sync-btn"\n        data-ng-if="!ctrl.catalogVersion.active"\n        data-has-operation-permission="ctrl.syncCatalogPermission">\n        <button class="btn btn-default"\n            data-ng-disabled="!ctrl.isButtonEnabled()"\n            data-ng-click="ctrl.syncCatalog()">{{ \'se.cms.cataloginfo.btn.sync\' | translate }}</button>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageListSyncIcon/pageListSyncIconTemplate.html",'<span class="hyicon se-sync-button__sync "\n    data-ng-class="$ctrl.classes[$ctrl.syncStatus.status]"\n    data-sync-status="{{$ctrl.syncStatus.status}}">\n</span>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageSynchronizationHeaderTemplate.html",'<div data-ng-if="$ctrl.ready">\n    <span data-ng-if="$ctrl.pageSyncConditions.pageHasNoDepOrNoSyncStatus">\n        <div class="se-sync-panel-header__label"\n            data-translate="se.cms.synchronization.page.new.header"></div>\n        <div class="se-sync-panel-header__text">\n            <span data-ng-bind-html="$ctrl.headerText"></span>\n        </div>\n    </span>\n    <span data-ng-if="$ctrl.pageSyncConditions.pageHasSyncStatus">\n        <span class="se-sync-panel-header__label"\n            data-translate="se.cms.synchronization.panel.lastsync.text"></span>\n        <span class="se-sync-panel-header__timestamp">{{$ctrl.syncStatus.lastSyncStatus | date:\'short\'}}</span>\n        <div data-ng-if="$ctrl.showDetailedInfo"\n            class="se-sync-panel-header__text">\n            <span data-ng-if="!$ctrl.pageSyncConditions.canSyncHomepage"\n                data-translate="se.cms.synchronization.page.header.old.homepage"></span>\n            <span data-translate="se.cms.synchronization.page.header"></span>\n            <y-help data-ng-if="$ctrl.helpTemplate"\n                data-template="$ctrl.helpTemplate"></y-help>\n        </div>\n        <div data-ng-if="!$ctrl.showDetailedInfo"\n            class="se-sync-panel-header__text">\n            <span data-ng-if="!$ctrl.pageSyncConditions.canSyncHomepage"\n                data-translate="se.cms.synchronization.page.header.old.homepage"></span>\n            <div data-ng-if="$ctrl.pageSyncConditions.canSyncHomepage">\n                <span data-translate="se.cms.synchronization.page.header">\n                </span>\n                <y-help data-ng-if="$ctrl.helpTemplate"\n                    data-template="$ctrl.helpTemplate"></y-help>\n            </div>\n        </div>\n    </span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/pageSynchronizationPanelTemplate.html",'<page-synchronization-header class="se-sync-panel__sync-status "\n    data-sync-status="$ctrl.syncStatus"\n    data-page-sync-conditions="$ctrl.pageSyncConditions"\n    data-show-detailed-info="$ctrl.showDetailedInfo"></page-synchronization-header>\n<synchronization-panel data-ng-if="!$ctrl.showSyncButton"\n    data-item-id="$ctrl.cmsPage.uuid"\n    data-get-sync-status="$ctrl.getSyncStatus"\n    data-perform-sync="$ctrl.performSync"\n    data-sync-items="$ctrl.syncItems"\n    data-on-selected-items-update="$ctrl.onSelectedItemsUpdate"\n    data-on-sync-status-ready="$ctrl.onSyncStatusReady($syncStatus)"\n    data-get-api="$ctrl.getApi($api)">\n</synchronization-panel>\n<synchronization-panel data-ng-if="$ctrl.showSyncButton"\n    data-item-id="$ctrl.cmsPage.uuid"\n    data-get-sync-status="$ctrl.getSyncStatus"\n    data-perform-sync="$ctrl.performSync"\n    data-on-sync-status-ready="$ctrl.onSyncStatusReady($syncStatus)"\n    data-get-api="$ctrl.getApi($api)">\n</synchronization-panel>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/syncMenu/pageSyncMenuToolbarItemTemplate.html",'<div class="toolbar-action"\n    data-uib-dropdown\n    data-auto-close="outsideClick"\n    data-is-open="$ctrl.toolbarItem.isOpen"\n    data-item-key="{{ $ctrl.toolbarItem.key }}">\n    <button type="button"\n        class="btn btn-default toolbar-action--button"\n        data-uib-dropdown-toggle\n        aria-pressed="false">\n        <span class="hyicon hyicon-sync se-toolbar-menu-ddlb--button__icon"></span>\n        <div class="se-toolbar-sync-wrapper">\n            <span class="toolbar-action--button--txt"\n                data-ng-class="{\'se-toolbar-menu-ddlb--button__txt\': $ctrl.isNotInSync }">\n                {{ $ctrl.toolbarItem.name | translate }}\n            </span>\n            <span data-ng-if="$ctrl.isNotInSync"\n                class="hyicon hyicon-caution se-toolbar-menu-ddlb--button__caution">\n            </span>\n        </div>\n    </button>\n    <div data-uib-dropdown-menu\n        class="dropdown-menu-left btn-block toolbar-action--include">\n        <div ng-if="$ctrl.toolbarItem.isOpen && $ctrl.isReady">\n            <ul class="se-toolbar-menu-content se-toolbar-menu-content__page-sync"\n                role="menu">\n                <li role="menuitem">\n                    <div class="se-toolbar-menu-content--wrapper">\n                        <div class="se-toolbar-menu-content--header">\n                            <div class="se-toolbar-menu-content--header__title se-page-sync__header-content">\n                                <span data-translate="se.cms.synchronization.page.title"></span>\n                                <y-help class="se-page-sync__y-help"\n                                    data-ng-if="!$ctrl.syncPageConditions.canSyncHomepage && !$ctrl.syncPageConditions.pageHasNoDepOrNoSyncStatus"\n                                    data-template="$ctrl.helpTemplate"></y-help>\n                            </div>\n                        </div>\n                        <div class="se-toolbar-menu-content--body">\n                            <page-synchronization-panel data-cms-page="$ctrl.cmsPage"\n                                data-uri-context="$ctrl.uriContext"></page-synchronization-panel>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/synchronize/pages/syncMenu/pageSyncMenuToolbarItemWrapperTemplate.html",'<page-sync-menu-toolbar-item data-item="item"></page-sync-menu-toolbar-item>'),e.put("web/features/cmssmarteditContainer/components/versioning/context/versionItemContextTemplate.html",'<div class="se-version-item-context">\n    <div class="se-version-item-context__btn">\n        <div class="se-version-item-context__btn--txt"\n            data-y-popover\n            data-placement="\'bottom\'"\n            data-template="$ctrl.getPopoverTemplate()"\n            data-trigger="\'hover\'">\n            <div class="se-version-item-context__btn--label"\n                title="{{ $ctrl.getPageVersion().label }}">\n                {{ $ctrl.getPageVersion().label }}\n            </div>\n            <div class="se-version-item-context__btn--date">\n                {{ $ctrl.getPageVersion().creationtime | date:\'short\' }}\n            </div>\n        </div>\n        <div class="se-version-item-context__btn--hyicon">\n            <button type="button"\n                data-uib-dropdown-toggle=""\n                data-ng-click="$ctrl.deselectPageVersion()"\n                class="btn btn-link pull-right se-version-item-context__btn--hyicon-remove">\n                <span class="list-arrow hyicon hyicon-remove"></span>\n            </button>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/context/versionItemContextWrapperTemplate.html","<version-item-context></version-item-context>"),e.put("web/features/cmssmarteditContainer/components/versioning/pageVersionsMenuTemplate.html",'<div class="se-toolbar-menu-content se-toolbar-menu-content__page-sync"\n    data-ng-if="$ctrl.actionItem.isOpen">\n    <versions-panel data-page-uuid="$ctrl.pageUuid"></versions-panel>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/pageVersionsMenuWrapperTemplate.html",'<page-versions-menu data-action-item="item"></page-versions-menu>'),e.put("web/features/cmssmarteditContainer/components/versioning/panel/itemMenu/versionItemMenuItemsTemplate.html",'<div class="se-version-item-menu">\n    <div class="se-version-item-menu__item"\n        data-ng-repeat="dropdownItem in $ctrl.menuItems"\n        data-ng-click="$ctrl.executeItemCallback(dropdownItem, $event)">\n        <span class="se-version-item-menu__item-link">\n            {{ dropdownItem.i18nKey | translate }}\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/panel/itemMenu/versionItemMenuTemplate.html",'<div class="se-version-item-menu__popup-anchor"\n    data-ng-click="$ctrl.onButtonClick($event)"\n    y-popup-overlay="$ctrl.popupConfig"\n    y-popup-overlay-trigger="{{$ctrl.isMenuOpen}}"\n    y-popup-overlay-on-hide="$ctrl.onMenuHide()">\n    <span data-ng-if="$ctrl.menuItems.length > 0"\n        class="hyicon hyicon-more se-version-item-menu__icon"></span>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/panel/versionItemTemplate.html",'<div class="se-version-item"\n    data-ng-class="{ \'se-version-item--selected\': $ctrl.isSelectedVersion() }">\n    <div class="se-version-item--header"\n        data-ng-click="$ctrl.selectVersion()">\n        <div class="se-version-item--label"\n            title="{{ $ctrl.pageVersion.label }}">{{ $ctrl.pageVersion.label }}</div>\n        <version-item-menu data-ng-if="$ctrl.isVersionMenuEnabled()"\n            data-item="$ctrl.pageVersion"></version-item-menu>\n    </div>\n    <div class="se-version-item--date">{{\'se.cms.versions.created.on.prefix\' | translate}} {{ $ctrl.pageVersion.creationtime | date:\'short\' }}</div>\n    <div class="se-version-item--description"\n        data-ng-if="$ctrl.pageVersion.description">\n        <y-more-text data-limit="$ctrl.textLimit"\n            data-ellipsis="\'...\'"\n            data-text="$ctrl.pageVersion.description"\n            class="se-version-item__y-more-text"></y-more-text>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/panel/versionsPanelTemplate.html",'<div class="se-toolbar-menu-content--wrapper">\n    <div class="se-toolbar-menu-content--header">\n        <div class="se-toolbar-menu-content--header__title se-version-toolbar-menu-content--header__title"\n            data-translate="se.cms.actionitem.page.versions">\n        </div>\n    </div>\n    <div class="se-version-toolbar-menu-content--body">\n        <versions-search data-versions-found="$ctrl.versionsFound"\n            data-on-search-term-changed="$ctrl.onSearchTermChanged(newSearchTerm)"\n            data-show-search-controls="$ctrl.pageHasVersions()"></versions-search>\n        <div>\n            <y-infinite-scrolling data-page-size="$ctrl.pageSize"\n                data-mask="$ctrl.searchTerm"\n                data-fetch-page="$ctrl.loadVersions"\n                data-context="$ctrl"\n                data-ng-if="$ctrl.pageHasVersionsOrIsLoading()"\n                class="se-version-panel--infinite-scroll">\n\n                <div data-ng-repeat="item in $ctrl.items track by $index">\n                    <version-item data-page-version="item"></version-item>\n                </div>\n            </y-infinite-scrolling>\n            <div data-ng-if="!$ctrl.pageHasVersionsOrIsLoading()"\n                class="se-version-panel--empty-version-list">\n                <span>{{ \'se.cms.toolbaritem.versioning.noversionsfound\' | translate }}</span>\n            </div>\n        </div>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/components/versioning/panel/versionsSearchTemplate.html",'<div class="se-version-panel--filter-section"\n    data-ng-if="$ctrl.showManageVersionsButton()">\n    <a class="se-version-panel--manage-version-btn"\n        data-ng-click="$ctrl.switchToVersioningMode()">\n        {{ \'se.cms.toolbaritem.versioning.manageversions.name\' | translate }}\n    </a>\n</div>\n<div class="se-version-panel--search-controls-section"\n    data-ng-if="$ctrl.showSearchControls">\n    <div class="se-version-panel--search-controls-section__search-version">\n        <div class="se-input-group">\n            <div class="se-input-group--addon se-component-search--addon">\n                <span class="hyicon hyicon-search se-component-search--search-icon"></span>\n            </div>\n            <input type="text"\n                class="se-input-group--input se-component-search--input versions-panel--search-input"\n                name="search-term"\n                data-ng-model="$ctrl.searchTerm"\n                data-ng-model-options="{debounce: 500}"\n                placeholder="{{ ::\'se.cms.versions.search.placeholder\' | translate }}">\n            <div data-ng-show="$ctrl.showResetButton"\n                class="se-input-group--addon se-component-search--addon"\n                data-ng-click="$ctrl.resetSearchBox()">\n                <span class="glyphicon glyphicon-remove-sign se-component-search--reset-icon"></span>\n            </div>\n        </div>\n    </div>\n    <div class="se-version-panel--search-controls-section__versions-count">\n        <span class="se-version-panel--versions-count">\n            {{ \'se.cms.versions.search.versions.found\' | translate: $ctrl.getVersionsFoundTranslationData() }}\n        </span>\n    </div>\n</div>'),e.put("web/features/cmssmarteditContainer/services/genericEditorModalTemplate.html",'<y-message data-ng-if="modalController.showDisclaimer"\n    data-type="info"\n    data-message-id="VisibilityTab.DisplayComponentOffDisclaimer">\n    <message-description>\n        <translate>se.cms.editortabset.visibilitytab.disclaimer</translate>\n    </message-description>\n</y-message>\n\n<generic-editor data-id="modalController.genericEditorId"\n    data-smartedit-component-id="modalController.data.componentUuid"\n    data-smartedit-component-type="modalController.data.componentType"\n    data-structure="modalController.structure"\n    data-structure-api="modalController.structureApi"\n    data-content="modalController.data.content"\n    data-content-api="modalController.contentApi"\n    data-submit="modalController.controls.submit"\n    data-reset="modalController.controls.reset"\n    data-is-dirty="modalController.controls.isDirty"\n    data-editor-stack-id="modalController.editorStackId"\n    data-get-api="modalController.getApi($api);">\n</generic-editor>')}])},function(e,t,n){var i={"./components/synchronize/synchronizationPanel.js":125,"./dao/cmswebservices/sites/cmsitemsRestService.js":126,"./dao/resource.js":127,"./dao/resourceLocations.js":128,"./services/componentService.js":129,"./services/componentVisibilityAlertServiceInterface.js":130,"./services/removeComponentServiceInterface.js":131,"./services/synchronizationService.js":132,"./templates.js":133};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){var t=i[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=124},function(e,t){angular.module("synchronizationPanelModule",["yHelpModule","translationServiceModule","alertServiceModule","timerModule","alertsBoxModule","yMessageModule","smarteditServicesModule","l10nModule"]).controller("SynchronizationPanelController",["$q","$attrs","$translate","isBlank","EVENT_CONTENT_CATALOG_UPDATE","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","alertService","systemEventService","timerService","crossFrameEventService","catalogService","l10nFilter","sharedDataService","waitDialogService",function(e,t,n,i,o,a,r,s,c,l,d,p,u,g,m){this.syncPendingItems=[],this.selectedItems=[],this.showItemList=!0,this.refreshInterval=a.SLOW_POLLING_TIME,this.getRows=function(){return this.syncStatus?[this.syncStatus].concat(this.syncStatus.selectedDependencies):[]},this.api={selectAll:function(){if(!this.syncStatus)throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.");this.syncStatus.selected=!0,this.selectionChange(0)}.bind(this),displayItemList:function(e){this.showItemList=e}.bind(this),disableItem:null},this.selectionChange=function(e){this.syncStatus.selectedDependencies.forEach(function(t){t.selected=0===e&&t.status!==r.IN_SYNC&&!t.isExternal||t.selected}.bind(this)),this.selectedItems=this.getRows().filter(function(e){return e.selected}),this.onSelectedItemsUpdate&&this.onSelectedItemsUpdate(this.selectedItems)},this.preserveSelection=function(e){var t=(e||[]).map(function(e){return e.itemId},[]);this.getRows().forEach(function(e){e.selected=t.indexOf(e.itemId)>-1&&e.status!==r.IN_SYNC})},this.isDisabled=function(e){return!(!this.api.disableItem||!this.api.disableItem(e))||(e!==this.syncStatus&&this.syncStatus.selected||e.status===r.IN_SYNC)}.bind(this),this.isSyncButtonDisabled=function(){return 0===this.selectedItems.length||0!==this.syncPendingItems.length},this.isInSync=function(e){return e.status===r.IN_SYNC},this.isOutOfSync=function(e){return e.status===r.NOT_IN_SYNC},this.isInProgress=function(e){return e.status===r.IN_PROGRESS},this.isSyncFailed=function(e){return e.status===r.SYNC_FAILED},this.hasHelp=function(e){return e.dependentItemTypesOutOfSync&&e.dependentItemTypesOutOfSync.length>0},this.buildInfoTemplate=function(e){if(e&&e.dependentItemTypesOutOfSync&&!e.isExternal){var t=e.dependentItemTypesOutOfSync.reduce(function(e,t){return e+="<div>"+n.instant(t.i18nKey)+"</div>"},"");return t?"<div>"+t+"</div>":""}if(e.isExternal)return e.catalogVersionNameTemplate},this.fetchSyncStatus=function(e,t){if(!t||t.itemId===this.itemId)return this.getSyncStatus(this.itemId).then(function(e){g.get("experience").then(function(t){var n=e.catalogVersionUuid;this.syncStatus=e,this.preserveSelection(this.selectedItems),this.selectionChange(),this._updateStatus(),this.markExternalComponents(n,this.getRows()),this.setTemplateExternalCatalogVersionName(t,this.getRows()),0===this.syncPendingItems.length&&(this.refreshInterval=a.SLOW_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),c.publishAsync(a.SLOW_DOWN,this.itemId)),"function"==typeof this.onSyncStatusReady&&this.onSyncStatusReady({$syncStatus:e})}.bind(this))}.bind(this))},this.markExternalComponents=function(e,t){t.forEach(function(t){t.isExternal=t.catalogVersionUuid!==e})},this.getInfoTitle=function(e){if(!e.isExternal)return"se.cms.synchronization.panel.update.title"},this.getTemplateInfoForExternalComponent=function(){return"<div>"+n.instant("se.cms.synchronization.slot.external.component")+"</div>"},this.setTemplateExternalCatalogVersionName=function(e,t){t.forEach(function(t){t.catalogVersionNameTemplate="<span></span>",p.getCatalogVersionByUuid(t.catalogVersionUuid,e.siteDescriptor.uid).then(function(e){t.catalogVersionNameTemplate="<div>"+u(e.catalogName)+"</div>"})})},this._updateStatus=function(){var e=!1,t="",i=this.syncPendingItems.length;this.getRows().forEach(function(n){this.syncPendingItems.indexOf(n.itemId)>-1&&n.status===r.SYNC_FAILED&&(t=" "+t+n.itemId,e=!0),this.syncPendingItems.indexOf(n.itemId)>-1&&n.status!==r.IN_PROGRESS&&this.syncPendingItems.splice(this.syncPendingItems.indexOf(n.itemId),1);var a=i&&0===this.syncPendingItems.length;(a||0===i)&&(a&&(c.publishAsync(o),i=0),m.hideWaitModal()),n.status===r.IN_PROGRESS&&-1===this.syncPendingItems.indexOf(n.itemId)&&this.syncPendingItems.push(n.itemId)}.bind(this)),e&&s.showDanger({message:n.instant("se.cms.synchronization.panel.failure.message",{items:t})})},this.$onInit=function(){this.syncItems=function(){var t=this.getRows().filter(function(e){return e.selected}).map(function(e){return{itemId:e.itemId,itemType:e.itemType}});return Array.prototype.push.apply(this.syncPendingItems,t.map(function(e){return e.itemId})),this.selectedItems.length?(m.showWaitModal("se.sync.synchronizing"),this.performSync(t).then(function(){this.refreshInterval=a.FAST_POLLING_TIME,this.resynchTimer.restart(this.refreshInterval),c.publishAsync(a.SPEED_UP,this.itemId)}.bind(this))):e.when()}.bind(this),"function"==typeof this.getApi&&this.getApi({$api:this.api}),this.unsubscribeFastFetch=d.subscribe(a.FAST_FETCH,this.fetchSyncStatus.bind(this)),this.fetchSyncStatus(),this.resynchTimer=l.createTimer(this.fetchSyncStatus.bind(this),this.refreshInterval),this.resynchTimer.start()},this.$onDestroy=function(){this.resynchTimer.teardown(),this.unsubscribeFastFetch(),c.publishAsync(a.SLOW_DOWN,this.itemId)},this.$postLink=function(){this.showSyncButton=i(t.syncItems)}}]).component("synchronizationPanel",{templateUrl:"synchronizationPanelTemplate.html",controller:"SynchronizationPanelController",controllerAs:"sync",bindings:{itemId:"<",getSyncStatus:"<",performSync:"<",headerTemplateUrl:"<?",syncItems:"=?",onSelectedItemsUpdate:"<?",onSyncStatusReady:"&?",getApi:"&?"}})},function(e,t){angular.module("cmsitemsRestServiceModule",["functionsModule","resourceLocationsModule","smarteditServicesModule","yLoDashModule"]).provider("cmsitemsUri",["CONTEXT_SITE_ID",function(e){this.uri="/cmswebservices/v1/sites/"+e+"/cmsitems",this.$get=function(){return this.uri}.bind(this)}]).provider("cmsitemsUuidsUri",["CONTEXT_SITE_ID",function(e){this.uri="/cmswebservices/v1/sites/"+e+"/cmsitems/uuids",this.$get=function(){return this.uri}.bind(this)}]).service("cmsitemsRestService",["lodash","restServiceFactory","cmsitemsUri","cmsitemsUuidsUri","catalogService","operationContextService","OPERATION_CONTEXT",function(e,t,n,i,o,a,r){var s=t.get(n),c=t.get(n+"/:itemUuid"),l=t.get(i);a.register(n.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),r.CMS),this.create=function(e){return o.getCatalogVersionUUid().then(function(t){return e.catalogVersion=e.catalogVersion||t,void 0===e.onlyOneRestrictionMustApply&&(e.onlyOneRestrictionMustApply=!1),s.save(e)})},this.getById=function(e){return s.getById(e)},this.getByIdAndVersion=function(e,t){return c.get({itemUuid:e,versionId:t})},this.get=function(t){return o.retrieveUriContext().then(function(n){var i={catalogId:t.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:t.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};return t=e.merge(i,t),s.get(t)})},this.getByIds=function(e){return o.getCatalogVersionUUid().then(function(t){return l.save({catalogVersion:t,uuids:e})})},this.update=function(e){return s.update(e)},this.delete=function(e){return s.remove({identifier:e})},this._getByUIdAndType=function(e,t){return this.get({pageSize:100,currentPage:0,mask:e,typeCode:t}).then(function(t){return t.response.find(function(t){return t.uid===e})})}}])},function(e,t){angular.module("resourceModule",["smarteditServicesModule","resourceLocationsModule","cmsResourceLocationsModule","functionsModule"]).factory("itemsResource",["restServiceFactory","ITEMS_RESOURCE_URI","URIBuilder",function(e,t,n){return{getItemResource:function(){return e.get(t)},getItemResourceByContext:function(i){return e.get(new n(t).replaceParams(i).build())}}}]).factory("pagesContentSlotsComponentsResource",["restServiceFactory","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("navigationNodeRestService",["restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI",function(e,t){return e.get(t)}]).factory("synchronizationResource",["restServiceFactory","URIBuilder","GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","POST_PAGE_SYNCHRONIZATION_RESOURCE_URI",function(e,t,n,i){return{getPageSynchronizationGetRestService:function(i){var o=new t(n).replaceParams(i).build();return e.get(o)},getPageSynchronizationPostRestService:function(n){var o=new t(i).replaceParams(n).build();return e.get(o)}}}])},function(e,t){!function(){var e="CURRENT_CONTEXT_CATALOG",t="CURRENT_CONTEXT_CATALOG_VERSION",n="CURRENT_CONTEXT_SITE_ID",i="CURRENT_PAGE_CONTEXT_CATALOG";angular.module("cmsResourceLocationsModule",[]).constant("CONTEXT_SITE_ID",n).constant("CONTEXT_CATALOG",e).constant("CONTEXT_CATALOG_VERSION",t).constant("PAGE_CONTEXT_SITE_ID","CURRENT_PAGE_CONTEXT_SITE_ID").constant("PAGE_CONTEXT_CATALOG",i).constant("PAGE_CONTEXT_CATALOG_VERSION","CURRENT_PAGE_CONTEXT_CATALOG_VERSION").constant("TYPES_RESOURCE_URI","/cmswebservices/v1/types").constant("ITEMS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/items").constant("PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslotscomponents").constant("CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI","/cmswebservices/v1/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pages/:pageUid/contentslots/:slotUid/typerestrictions").constant("PAGES_LIST_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages").constant("PAGE_LIST_PATH","/pages/:siteId/:catalogId/:catalogVersion").constant("TRASHED_PAGE_LIST_PATH","/trashedpages/:siteId/:catalogId/:catalogVersion").constant("PAGES_CONTENT_SLOT_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagescontentslots").constant("PAGE_TEMPLATES_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/pagetemplates").constant("NAVIGATION_MANAGEMENT_PAGE_PATH","/navigations/:siteId/:catalogId/:catalogVersion").constant("NAVIGATION_MANAGEMENT_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations").constant("NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI","/cmswebservices/v1/sites/:"+n+"/catalogs/:"+e+"/versions/:"+t+"/navigations/:navigationUid/entries").constant("NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI","/cmswebservices/v1/navigationentrytypes").constant("CONTEXTUAL_PAGES_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages").constant("CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/pagesrestrictions").constant("PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions").constant("UPDATE_PAGES_RESTRICTIONS_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pagesrestrictions/pages").constant("RESTRICTION_TYPES_URI","/cmswebservices/v1/restrictiontypes").constant("PAGE_TYPES_RESTRICTION_TYPES_URI","/cmswebservices/v1/pagetypesrestrictiontypes").constant("PAGEINFO_RESOURCE_URI","/cmswebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/pages/:pageUid").constant("PAGE_TYPES_URI","/cmswebservices/v1/pagetypes").constant("GET_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/CURRENT_PAGE_CONTEXT_SITE_ID/catalogs/"+i+"/versions/CURRENT_PAGE_CONTEXT_CATALOG_VERSION/synchronizations/versions/:target/pages/:pageUid").constant("POST_PAGE_SYNCHRONIZATION_RESOURCE_URI","/cmssmarteditwebservices/v1/sites/"+n+"/catalogs/"+e+"/versions/"+t+"/synchronizations/versions/:target")}()},function(e,t){angular.module("componentServiceModule",["smarteditServicesModule","cmsSmarteditServicesModule","resourceLocationsModule","cmsitemsRestServiceModule","slotRestrictionsServiceModule"]).service("ComponentService",["$q","restServiceFactory","TYPES_RESOURCE_URI","PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","cmsitemsRestService","catalogService","slotRestrictionsService","pageInfoService","pageContentSlotsComponentsRestService","typePermissionsRestService",function(e,t,n,i,o,a,r,s,c,l,d,p){var u=t.get(n),g=r,m=t.get(i);this.createNewComponent=function(e,t){var n={};if(n.name=e.name,n.slotId=e.targetSlotId,n.pageId=e.pageId,n.position=e.position,n.typeCode=e.componentType,n.itemtype=e.componentType,n.catalogVersion=e.catalogVersionUuid,"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);else if(t)throw"ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]";return g.create(n)},this.updateComponent=function(e){return g.update(e)},this.addExistingComponent=function(e,t,n,i){var o={};return o.pageId=e,o.slotId=n,o.componentId=t,o.position=i,m.save(o)},this.loadComponentTypes=function(){return u.get({category:"COMPONENT"})},this.getSupportedComponentTypesForCurrentPage=function(){return e.all([this.loadComponentTypes(),c.getAllComponentTypesSupportedOnPage()]).then(function(e){var t=e[1],n=e[0].componentTypes.filter(function(e){return t.indexOf(e.code)>-1}),i=n.map(function(e){return e.code});return p.hasCreatePermissionForTypes(i).then(function(e){return n.filter(function(t){return e[t.code]})})}.bind(this))}.bind(this),this.loadComponentItem=function(e){return g.getById(e)},this.loadPagedComponentItems=function(e,t,n){return s.retrieveUriContext().then(function(i){var r={pageSize:t,currentPage:n,mask:e,sort:"name",typeCode:"AbstractCMSComponent",catalogId:i[o],catalogVersion:i[a]};return g.get(r)})},this.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion};return g.get(t)},this.getSlotsForComponent=function(e){var t=[];return this._getContentSlotsForComponents().then(function(n){return Object.keys(n).forEach(function(i){n[i].find(function(t){return t.uuid===e})&&t.push(i)}),t}.bind(this))},this._getContentSlotsForComponents=function(){return l.getPageUID().then(function(e){return d.getSlotsToComponentsMapForPageUid(e)})}}])},function(e,t){angular.module("componentVisibilityAlertServiceInterfaceModule",[]).factory("ComponentVisibilityAlertServiceInterface",function(){var e=function(){};return e.prototype.checkAndAlertOnComponentVisibility=function(){},e})},function(e,t){angular.module("removeComponentServiceInterfaceModule",[]).factory("RemoveComponentServiceInterface",function(){function RemoveComponentServiceInterface(){}return RemoveComponentServiceInterface.prototype.removeComponent=function(){},RemoveComponentServiceInterface})},function(e,t){angular.module("synchronizationServiceModule",["smarteditServicesModule","resourceLocationsModule","alertServiceModule","authenticationModule","timerModule","smarteditCommonsModule","cmsConstantsModule"]).constant("CATALOG_SYNC_INTERVAL_IN_MILLISECONDS",5e3).service("synchronizationService",["restServiceFactory","timerService","$q","$translate","alertService","authenticationService","operationContextService","crossFrameEventService","OPERATION_CONTEXT","CATALOG_SYNC_INTERVAL_IN_MILLISECONDS","SYNCHRONIZATION_EVENT",function(e,t,n,i,o,a,r,s,c,l,d){var p={},u=[],g=e.get("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target"),m=e.get("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target","catalog");r.register("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",c.CMS),r.register("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",c.CMS),this.updateCatalogSync=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return this.addCatalogSyncRequest(t),m.update({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion}).then(function(e){return e}.bind(this),function(t){var n=i.instant("sync.running.error.msg",{catalogName:e.name});return"Conflict"===t.statusText&&o.showDanger({message:n}),!1}.bind(this))},this.getCatalogSyncStatus=function(e){return e.sourceCatalogVersion?this.getSyncJobInfoBySourceAndTarget(e):this.getLastSyncJobInfoByTarget(e)},this.getSyncJobInfoBySourceAndTarget=function(e){return m.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})},this.getLastSyncJobInfoByTarget=function(e){return g.get({catalog:e.catalogId,target:e.targetCatalogVersion})},this.startAutoGetSyncData=function(e,n){var i=e.catalogId,o=e.sourceCatalogVersion,a=e.targetCatalogVersion,r=this._getJobKey(i,o,a),s=t.createTimer(this._autoSyncCallback.bind(this,e,n,r),l);s.start(),p[r]=s},this._autoSyncCallback=function(e,t,n){a.isAuthenticated("/cmswebservices").then(function(i){i||this.stopAutoGetSyncData(e),this.getCatalogSyncStatus(e).then(this.syncRequestedCallback(e)).then(t).then(function(){p[n]||this.startAutoGetSyncData(e,t)}.bind(this))}.bind(this))},this.syncRequestedCallback=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return function(n){return this.catalogSyncInProgress(t)&&(this.catalogSyncFinished(n)&&(this.removeCatalogSyncRequest(t),s.publish(d.CATALOG_SYNCHRONIZED,e)),(p[t].discardWhenNextSynced&&this.catalogSyncFinished(n)||this.catalogSyncAborted(n))&&(p[t].stop(),p[t]=void 0,this.removeCatalogSyncRequest(t))),n}.bind(this)},this.catalogSyncInProgress=function(e){return u.indexOf(e)>-1},this.catalogSyncFinished=function(e){return"FINISHED"===e.syncStatus},this.catalogSyncAborted=function(e){return"ABORTED"===e.syncStatus},this.removeCatalogSyncRequest=function(e){var t=u.indexOf(e);t>-1&&u.splice(t,1)},this.addCatalogSyncRequest=function(e){-1===u.indexOf(e)&&u.push(e)},this.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);p[t]&&(u.indexOf(t)>-1?p[t].discardWhenNextSynced=!0:(p[t].stop(),p[t]=void 0))},this._getJobKey=function(e,t,n){return e+"_"+t+"_"+n}}])},function(e,t){angular.module("cmscommonsTemplates",[]).run(["$templateCache",function(e){"use strict";e.put("web/features/cmscommons/components/synchronize/synchronizationPanelTemplate.html",'<div class="se-sync-panel">\n\n    <div class="se-sync-panel__sync-status"\n        data-ng-if="sync.headerTemplateUrl"\n        data-ng-include="sync.headerTemplateUrl">\n    </div>\n\n    <div class="se-sync-panel__sync-info"\n        data-ng-show="sync.showItemList">\n        <div data-ng-repeat="dependency in sync.getRows()"\n            data-ng-class="{active: $index==0, \'se-sync-panel--item__external\': dependency.isExternal}"\n            class="se-sync-panel__sync-info__row">\n\n            <div class="checkbox se-sync-panel__sync-info__checkbox se-nowrap-ellipsis">\n                <input type="checkbox"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-model="dependency.selected"\n                    data-ng-disabled="sync.isDisabled(dependency)"\n                    data-ng-change="sync.selectionChange($index)"\n                    id="sync-info__checkbox_{{$index}}">\n                <label data-ng-if="$index===0"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.selectAll | translate}}">\n                    {{::dependency.selectAll | translate}}</label>\n\n                <label data-ng-if="$index!==0 && !dependency.isExternal"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis"\n                    title="{{::dependency.name | translate}}">\n                    {{::dependency.name | translate}}</label>\n\n                <label data-ng-if="$index!==0 && dependency.isExternal"\n                    data-y-popover\n                    data-trigger="\'hover\'"\n                    data-template="sync.getTemplateInfoForExternalComponent()"\n                    for="sync-info__checkbox_{{$index}}"\n                    class="se-sync-panel__sync-info__checkbox-label se-nowrap-ellipsis">\n                    {{::dependency.name | translate}}\n                </label>\n            </div>\n\n            <span data-ng-if="sync.buildInfoTemplate(dependency)"\n                data-y-popover\n                data-trigger="\'hover\'"\n                data-title="sync.getInfoTitle(dependency)"\n                data-template="sync.buildInfoTemplate(dependency)"\n                data-ng-class="{\'pull-right se-sync-panel__sync-info__right-icon\': true, \'se-sync-panel--icon-globe\': dependency.isExternal} ">\n                <span data-status="{{dependency.status}}"\n                    data-ng-if="!dependency.isExternal"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n                <span data-ng-if="dependency.isExternal"\n                    class="hyicon hyicon-globe"></span>\n            </span>\n\n            <span data-ng-if="!sync.buildInfoTemplate(dependency)"\n                class="pull-right se-sync-panel__sync-info__right-icon">\n                <span data-status="{{dependency.status}}"\n                    data-ng-class="{\'hyicon hyicon__se-sync-panel__sync-info\':true, \'hyicon-done hyicon__se-sync-panel__sync-done\':sync.isInSync(dependency), \'hyicon-sync hyicon__se-sync-panel__sync-not\':!sync.isInSync(dependency)}"></span>\n            </span>\n        </div>\n    </div>\n\n    <div class="se-sync-panel__footer"\n        data-ng-if="sync.showSyncButton">\n        <button class="btn btn-lg btn-primary se-sync-panel__footer__btn"\n            data-ng-disabled="sync.isSyncButtonDisabled()"\n            data-ng-click="sync.syncItems()"\n            data-translate="se.cms.actionitem.page.sync"></button>\n    </div>\n\n</div>')}])},function(e,t){function webpackEmptyContext(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,e.exports=webpackEmptyContext,webpackEmptyContext.id=134},function(e,t,n){"use strict";function importAll(e){e.keys().forEach(function(t){e(t)})}n.r(t);var i,o,a=n(1),r=n(0);!function(e){e.ContentPage="ContentPage",e.CategoryPage="CategoryPage",e.ProductPage="ProductPage"}(i||(i={})),function(e){e.ACTIVE="ACTIVE",e.DELETED="DELETED"}(o||(o={}));var s,c=function(){function AssetsService(e){this.TEST_ASSETS_KEY="testAssets",this.TEST_ASSETS_SRC="/web/webroot",this.PROD_ASSETS_SRC="/cmssmartedit",this.$injector=e}return AssetsService.prototype.getAssetsRoot=function(){var e=!1;if(this.getInjector().has(this.TEST_ASSETS_KEY)){var t=this.getInjector().get(this.TEST_ASSETS_KEY);e="boolean"==typeof t&&t}return e?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC},AssetsService.prototype.getInjector=function(){return this.$injector},AssetsService.$inject=["$injector"],AssetsService}(),l=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},d=function(){function CMSModesService(e){this.perspectiveService=e}var e;return CMSModesService.$inject=["perspectiveService"],e=CMSModesService,CMSModesService.prototype.isVersioningPerspectiveActive=function(){return this.perspectiveService.getActivePerspectiveKey().then(function(t){return t===e.VERSIONING_PERSPECTIVE_KEY})},CMSModesService.VERSIONING_PERSPECTIVE_KEY="se.cms.perspective.versioning",CMSModesService=e=l([Object(r.SeInjectable)()],CMSModesService)}(),p=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};!function(e){e.CREATE="create",e.READ="read",e.CHANGE="change",e.REMOVE="remove"}(s||(s={}));var u,g,m=function(){function TypePermissionsRestService(e,t,n,i){this.$log=e,this.$q=t,this.sessionService=n,this.URI="/permissionswebservices/v1/permissions/principals/:user/types",this.resource=i.get(this.URI)}return TypePermissionsRestService.$inject=["$log","$q","sessionService","restServiceFactory"],TypePermissionsRestService.prototype.hasCreatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.CREATE)},TypePermissionsRestService.prototype.hasReadPermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.READ)},TypePermissionsRestService.prototype.hasUpdatePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.CHANGE)},TypePermissionsRestService.prototype.hasDeletePermissionForTypes=function(e){return this._getPermissionsForTypesAndName(e,s.REMOVE)},TypePermissionsRestService.prototype.hasAllPermissionsForTypes=function(e){var t=this,n={};return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,n){return n.permissions&&(e[n.id]={},e[n.id][s.READ]=t._getPermissionByNameAndResult(n,s.READ),e[n.id][s.CHANGE]=t._getPermissionByNameAndResult(n,s.CHANGE),e[n.id][s.CREATE]=t._getPermissionByNameAndResult(n,s.CREATE),e[n.id][s.REMOVE]=t._getPermissionByNameAndResult(n,s.REMOVE)),e},n)})},TypePermissionsRestService.prototype._getPermissionByNameAndResult=function(e,t){return JSON.parse(e.permissions.find(function(e){return e.key===t}).value)},TypePermissionsRestService.prototype._getPermissionsForTypesAndName=function(e,t){var n=this;return this._getAllPermissionsForTypes(e).then(function(e){return e.reduce(function(e,i){return i.permissions&&(e[i.id]=n._getPermissionByNameAndResult(i,t)),e},{})})},TypePermissionsRestService.prototype._getAllPermissionsForTypes=function(e){var t=this;return e.length<=0?this.$q.when([]):this.sessionService.getCurrentUsername().then(function(n){return n?t.resource.get({user:n,types:e.join(","),permissionNames:s.CREATE+","+s.CHANGE+","+s.READ+","+s.REMOVE}).then(function(e){return e.permissionsList||[]},function(n){return n&&t.$log.error("TypePermissionsRestService - no composed types "+e+" exist"),t.$q.reject(n)}):[]})},p([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.authorizationEvictionTag]})],TypePermissionsRestService.prototype,"_getAllPermissionsForTypes",null),TypePermissionsRestService=p([Object(r.SeInjectable)()],TypePermissionsRestService)}(),h=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},f=function(){function VersionExperienceInterceptor(e,t,n){this.TYPES_RESOURCE_URI=e,this.interceptorHelper=t,this.sharedDataService=n,this.request=this.request.bind(this)}var e;return VersionExperienceInterceptor.$inject=["TYPES_RESOURCE_URI","interceptorHelper","sharedDataService"],e=VersionExperienceInterceptor,VersionExperienceInterceptor.prototype.request=function(t){var n=this;return this.isGET(t)&&this.isPreviewDataTypeResourceEndpoint(t.url)?this.interceptorHelper.handleRequest(t,function(){return n.sharedDataService.get("experience").then(function(n){return n.versionId&&(t.url=t.url.replace(e.MODE_DEFAULT,e.MODE_PREVIEW_VERSION)),t})}):t},VersionExperienceInterceptor.prototype.isGET=function(e){return"GET"===e.method},VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint=function(t){return t.indexOf(this.TYPES_RESOURCE_URI)>-1&&t.indexOf(e.PREVIEW_DATA_TYPE)>-1},VersionExperienceInterceptor.MODE_DEFAULT="DEFAULT",VersionExperienceInterceptor.MODE_PREVIEW_VERSION="PREVIEWVERSION",VersionExperienceInterceptor.PREVIEW_DATA_TYPE="PreviewData",VersionExperienceInterceptor=e=h([Object(r.SeInjectable)()],VersionExperienceInterceptor)}(),v=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},y=function(){function VersionExperienceInterceptorModule(){}return VersionExperienceInterceptorModule=v([Object(r.SeModule)({imports:["interceptorHelperModule"],providers:[f],config:["$httpProvider",function(e){"ngInject";e.interceptors.push(r.diNameUtils.buildServiceName(f))}]})],VersionExperienceInterceptorModule)}(),S=function(){function IPageContentSlotsComponentsRestService(){}return IPageContentSlotsComponentsRestService.prototype.clearCache=function(){"proxyFunction"},IPageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){"proxyFunction";return null},IPageContentSlotsComponentsRestService}(),C={UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"},b={SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:2e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"},T={CATALOG_SYNCHRONIZED:"CATALOG_SYNCHRONIZED_EVENT"},E=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},P=function(){function CmsConstantsModule(){}return CmsConstantsModule=E([Object(r.SeModule)({providers:[r.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_STATUSES:C}),r.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_POLLING:b}),r.diNameUtils.makeValueProvider({DEFAULT_SYNCHRONIZATION_EVENT:T})]})],CmsConstantsModule)}(),I=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},_=function(){function TrashedPageListController(e,t,n,i,o,a,r,s,c,l,d){var p=this;this.$routeParams=e,this.$location=t,this.$q=n,this.$scope=i,this.PAGE_LIST_PATH=o,this.urlService=a,this.catalogService=r,this.cmsitemsUri=s,this.systemEventService=c,this.catalogVersionPermissionService=l,this.dropdownItems=[],this.eventSubscriptions=[],this.initialize().then(function(){p.eventSubscriptions.push(p.systemEventService.subscribe(d,p.onContentCatalogUpdate.bind(p)))}),this.$scope.$on("$destroy",function(){p.eventSubscriptions.forEach(function(e){e()})})}return TrashedPageListController.$inject=["$routeParams","$location","$q","$scope","PAGE_LIST_PATH","urlService","catalogService","cmsitemsUri","systemEventService","catalogVersionPermissionService","EVENT_CONTENT_CATALOG_UPDATE"],TrashedPageListController.prototype.reset=function(){this.mask=""},TrashedPageListController.prototype.backToPagelist=function(){this.$location.path(this.PAGE_LIST_PATH.replace(":siteId",this.siteUID).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))},TrashedPageListController.prototype.getApi=function(e){this.dynamicPagedListApi=e},TrashedPageListController.prototype.initialize=function(){var e=this;return this.siteUID=this.$routeParams.siteId,this.catalogId=this.$routeParams.catalogId,this.catalogVersion=this.$routeParams.catalogVersion,this.uriContext=this.urlService.buildUriContext(this.siteUID,this.catalogId,this.catalogVersion),this.trashedPageListConfig={sortBy:"name",reversed:!1,itemsPerPage:10,displayCount:!0},this.trashedPageListConfig.uri=this.cmsitemsUri,this.trashedPageListConfig.queryParams={catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted"},this.trashedPageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:!0},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:!0},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions"},{property:"modifiedtime",i18n:"se.cms.trashedpagelist.trashed.date",sortable:!0},{property:"syncStatus",i18n:"se.cms.actionitem.page.sync"},{property:"dropdownitems",i18n:""}],this.mask="",this.catalogService.getContentCatalogsForSite(this.siteUID).then(function(t){e.catalogName=t.filter(function(t){return t.catalogId===e.catalogId})[0].name}),this.trashedPageListConfig.renderers={numberOfRestrictions:function(){return'<restrictions-page-list-icon data-number-of-restrictions="item.restrictions.length"/>'},modifiedtime:function(){return'<div>{{item.modifiedtime | date:"short"}}</div>'},syncStatus:function(){return'<div data-recompile-dom="item.reloadSynchIcon"><page-list-sync-icon data-uri-context="$ctrl.config.injectedContext.uriContext" data-page-id="item.uuid" /></div>'},dropdownitems:function(){return'<div has-operation-permission="$ctrl.config.injectedContext.permissionForDropdownItems" class="paged-list-table__body__td paged-list-table__body__td-menu"><y-drop-down-menu dropdown-items="$ctrl.config.injectedContext.dropdownItems" selected-item="item" class="y-dropdown pull-right" /></div>'}},this.catalogVersionPermissionService.hasSyncPermissionToActiveCatalogVersion(this.catalogId,this.catalogVersion).then(function(t){return e.dropdownItems.push({template:"<restore-page-item data-page-info='$ctrl.selectedItem' />"}),t&&e.dropdownItems.push({template:"<sync-page-item data-page-info='$ctrl.selectedItem' />"}),e.dropdownItems.push({template:"<permanently-delete-page-item data-page-info='$ctrl.selectedItem' data-uri-context='$ctrl.config.injectedContext.uriContext'/>"}),e.trashedPageListConfig.injectedContext={uriContext:e.uriContext,permissionForDropdownItems:"se.edit.page",dropdownItems:e.dropdownItems},e.$q.when()})},TrashedPageListController.prototype.onContentCatalogUpdate=function(){this.dynamicPagedListApi&&this.dynamicPagedListApi.reloadItems()},TrashedPageListController=I([Object(r.SeInjectable)()],TrashedPageListController)}(),R=a.module("trashedPageListControllerModule",["pageListTemplatePrinterModule","resourceLocationsModule","catalogVersionPermissionModule"]).controller(_.name,_),M=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},O=function(){function RestorePageItemComponent(e){this.managePageService=e}return RestorePageItemComponent.$inject=["managePageService"],RestorePageItemComponent.prototype.$onInit=function(){this.restorePagePermission=[{names:["se.restore.page.type"],context:{typeCode:this.pageInfo.typeCode}}]},RestorePageItemComponent.prototype.restorePage=function(){this.managePageService.restorePage(this.pageInfo)},RestorePageItemComponent=M([Object(r.SeComponent)({templateUrl:"restorePageItemTemplate.html",inputs:["pageInfo"]})],RestorePageItemComponent)}(),A=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},N=function(){function PermanentlyDeletePageItemComponent(e,t,n,i,o){this.managePageService=e,this.crossFrameEventService=t,this.SYNCHRONIZATION_POLLING=n,this.SYNCHRONIZATION_STATUSES=i,this.pageSynchronizationService=o,this.isDeletable=!1}return PermanentlyDeletePageItemComponent.$inject=["managePageService","crossFrameEventService","SYNCHRONIZATION_POLLING","SYNCHRONIZATION_STATUSES","pageSynchronizationService"],PermanentlyDeletePageItemComponent.prototype.$onInit=function(){this.unregFetchSyncStatus=this.crossFrameEventService.subscribe(this.SYNCHRONIZATION_POLLING.FAST_FETCH,this.triggerSyncFetch.bind(this)),this.triggerSyncFetch(),this.permanentlyDeletePagePermission=[{names:["se.permanently.delete.page.type"],context:{typeCode:this.pageInfo.typeCode}}]},PermanentlyDeletePageItemComponent.prototype.$onDestroy=function(){this.unregFetchSyncStatus()},PermanentlyDeletePageItemComponent.prototype.triggerSyncFetch=function(){var e=this;this.pageSynchronizationService.getSyncStatus(this.pageInfo.uuid,this.uriContext).then(function(t){var n=!!t.lastSyncStatus,i=t.status===e.SYNCHRONIZATION_STATUSES.IN_SYNC;e.isDeletable=!n||i},function(){e.isDeletable=!1})},PermanentlyDeletePageItemComponent.prototype.permanentlyDelete=function(){this.managePageService.hardDeletePage(this.pageInfo)},PermanentlyDeletePageItemComponent.prototype.isDeleteButtonDisabled=function(){return!this.isDeletable},PermanentlyDeletePageItemComponent=A([Object(r.SeComponent)({templateUrl:"permanentlyDeletePageItemTemplate.html",inputs:["pageInfo","uriContext"]})],PermanentlyDeletePageItemComponent)}(),D=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},w=function(){function PageInfoMenuComponent(e,t,n,i,o,a){this.pageInfoMenuService=e,this.pageService=t,this.$q=n,this.catalogService=i,this.systemEventService=o,this.EVENT_CONTENT_CATALOG_UPDATE=a,this.cmsPage=null,this.uriContext=null,this.isComponentReady=!1}return PageInfoMenuComponent.$inject=["pageInfoMenuService","pageService","$q","catalogService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE"],PageInfoMenuComponent.prototype.$onInit=function(){this.unRegisterSubscription=this.systemEventService.subscribe(this.EVENT_CONTENT_CATALOG_UPDATE,this.updateHomepageIcon.bind(this)),this.updateHomepageIcon()},PageInfoMenuComponent.prototype.$onDestroy=function(){this.unRegisterSubscription()},PageInfoMenuComponent.prototype.onEditPageClick=function(){this.pageInfoMenuService.openPageEditor(this.pageInfo.content),this.closeMenu()},PageInfoMenuComponent.prototype.updateHomepageIcon=function(){var e=this;this.$q.all([this.pageService.getCurrentPageInfo(),this.catalogService.retrieveUriContext()]).then(function(t){var n=t[0],i=t[1];e.cmsPage=n,e.uriContext=i,e.editPagePermission=[{names:["se.edit.page.type"],context:{typeCode:n.typeCode}},{names:["se.edit.page.link"]}]})},PageInfoMenuComponent.prototype.onDropdownToggle=function(e){var t=this;e&&this.pageInfoMenuService.getCurrentPageInfo().then(function(e){return t.pageInfo=e,t.pageInfoMenuService.getPageStructureForViewing(e.typeCode,e.defaultPage)}).then(function(e){t.pageStructure=e,t.isComponentReady=!0})},PageInfoMenuComponent.prototype.closeMenu=function(){this.actionItem&&(this.actionItem.isOpen=!1)},PageInfoMenuComponent=D([Object(r.SeComponent)({templateUrl:"pageInfoMenuTemplate.html",inputs:["actionItem"]})],PageInfoMenuComponent)}(),V=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},L=function(){function PageInfoMenuService(e,t,n,i,o,a,r,s,c,l){this.pageService=e,this.pageEditorModalService=t,this.cmsitemsRestService=n,this.typeStructureRestService=i,this.displayConditionsFacade=o,this.pageVersionSelectionService=a,this.lodash=r,this.$translate=s,this.$q=c,this.$log=l,this.ALL_RESTRICTIONS_CRITERIA_LABEL="se.cms.restrictions.criteria.all",this.ANY_RESTRICTIONS_CRITERIA_LABEL="se.cms.restrictions.criteria.any",this.isPageEditorOpened=!1}return PageInfoMenuService.$inject=["pageService","pageEditorModalService","cmsitemsRestService","typeStructureRestService","displayConditionsFacade","pageVersionSelectionService","lodash","$translate","$q","$log"],PageInfoMenuService.prototype.openPageEditor=function(e){var t=this;this.lodash.isNil(e)?this.$log.warn("[pageInfoMenuService] - Cannot open page editor. Provided page is empty."):this.isPageEditorOpened||(this.isPageEditorOpened=!0,this.pageEditorModalService.open(e).finally(function(){t.isPageEditorOpened=!1}))},PageInfoMenuService.prototype.getCurrentPageInfo=function(){var e=this;return this.pageService.getCurrentPageInfoByVersion(this.getCurrentPageVersionId()).then(function(t){return e.cmsitemsRestService.getById(t.masterTemplate).then(function(n){return e.getPrimaryPageName(t).then(function(i){t.template=n.uid;var o=e.lodash.cloneDeep(t);return o.content=t,o.primaryPage=i,o.localizedType=t.typeCode,o.displayCondition=e.getPageDisplayCondition(t),o.restrictionsCriteria=e.getPageRestrictionsCriteria(t),o})})}).catch(function(){e.$log.warn("[pageInfoMenuService] - Cannot retrieve page info. Please try again later.")})},PageInfoMenuService.prototype.getPageStructureForViewing=function(e,t){var n=this;return this.typeStructureRestService.getStructureByType(e).then(function(e){e.forEach(function(e){e.editable=!1}),n.removeFieldFromStructure(e,"uid"),n.removeFieldFromStructure(e,"restrictions");var i=[];return n.addFieldToStructure(i,n.removeFieldFromStructure(e,"name")),n.addFieldToStructure(i,n.removeFieldFromStructure(e,"creationtime")),n.addFieldToStructure(i,n.buildField("localizedType")),n.addFieldToStructure(i,n.removeFieldFromStructure(e,"modifiedtime")),n.addFieldToStructure(i,n.buildField("template")),n.addFieldToStructure(i,n.buildField("displayCondition")),n.addFieldToStructure(i,n.removeFieldFromStructure(e,"label")),t||(n.addFieldToStructure(i,n.buildField("primaryPage")),n.addFieldToStructure(i,n.buildField("restrictions","RestrictionsList"))),n.addFieldToStructure(i,n.removeFieldFromStructure(e,"title")),{attributes:n.lodash.concat(i,e),category:"PAGE"}}).catch(function(){n.$log.warn("[pageInfoMenuService] - Cannot retrieve page info structure. Please try again later.")})},PageInfoMenuService.prototype.addFieldToStructure=function(e,t){t&&e.push(t)},PageInfoMenuService.prototype.buildField=function(e,t){return void 0===t&&(t="ShortString"),{cmsStructureType:t,qualifier:e,i18nKey:"se.cms.pageinfo.page."+e.toLocaleLowerCase(),editable:!1}},PageInfoMenuService.prototype.removeFieldFromStructure=function(e,t){return this.lodash.remove(e,function(e){return e.qualifier===t})[0]},PageInfoMenuService.prototype.getPrimaryPageName=function(e){return this.isVariationPage(e)?this.displayConditionsFacade.getPrimaryPageForVariationPage(e.uid).then(function(e){return e.name}):this.$q.when(null)},PageInfoMenuService.prototype.isVariationPage=function(e){return!e.defaultPage},PageInfoMenuService.prototype.getPageDisplayCondition=function(e){return this.$translate.instant(this.isVariationPage(e)?"page.displaycondition.variation":"page.displaycondition.primary")},PageInfoMenuService.prototype.getPageRestrictionsCriteria=function(e){var t=null;return this.isVariationPage(e)&&void 0!==e.onlyOneRestrictionMustApply&&(t=this.$translate.instant(e.onlyOneRestrictionMustApply?this.ANY_RESTRICTIONS_CRITERIA_LABEL:this.ALL_RESTRICTIONS_CRITERIA_LABEL)),t},PageInfoMenuService.prototype.getCurrentPageVersionId=function(){var e=this.pageVersionSelectionService.getSelectedPageVersion();return e?e.uid:null},PageInfoMenuService=V([Object(r.SeInjectable)()],PageInfoMenuService)}(),$=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},U=function(){function PageVersioningService(e,t){this.restServiceFactory=e,this.PAGE_CONTEXT_SITE_ID=t,this.pageVersionsServiceResourceURI="/cmswebservices/v1/sites/"+this.PAGE_CONTEXT_SITE_ID+"/cmsitems/:pageUuid/versions",this.pageVersionsRollbackServiceResourceURI="/cmswebservices/v1/sites/"+this.PAGE_CONTEXT_SITE_ID+"/cmsitems/:pageUuid/versions/:versionId/rollbacks",this.pageVersionRESTService=this.restServiceFactory.get(this.pageVersionsServiceResourceURI),this.pageVersionsRESTService=this.restServiceFactory.get(this.pageVersionsServiceResourceURI),this.pageVersionsRollbackRESTService=this.restServiceFactory.get(this.pageVersionsRollbackServiceResourceURI)}return PageVersioningService.$inject=["restServiceFactory","PAGE_CONTEXT_SITE_ID"],PageVersioningService.prototype.findPageVersions=function(e){return this.pageVersionsRESTService.get(e)},PageVersioningService.prototype.getPageVersionForId=function(e,t){return this.pageVersionRESTService.get({pageUuid:e,identifier:t})},PageVersioningService.prototype.getResourceURI=function(){return this.pageVersionsServiceResourceURI},PageVersioningService.prototype.deletePageVersion=function(e,t){return this.pageVersionsRESTService.remove({pageUuid:e,identifier:t})},PageVersioningService.prototype.rollbackPageVersion=function(e,t){return this.pageVersionsRollbackRESTService.save({pageUuid:e,versionId:t})},PageVersioningService=$([Object(r.SeInjectable)()],PageVersioningService)}(),F=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};!function(e){e.PENDING="PENDING",e.NO_HOMEPAGE="NO_HOMEPAGE",e.LOCAL="LOCAL",e.OLD="OLD",e.PARENT="PARENT"}(u||(u={})),function(e){e.OLD="old",e.CURRENT="current",e.FALLBACK="fallback"}(g||(g={}));var x=function(){function HomepageService(e,t,n,i,o,a){this.$q=e,this.catalogService=t,this.systemEventService=n,this.CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO=i,this.CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO=o,this.CONTEXT_CATALOG=a}return HomepageService.$inject=["$q","catalogService","systemEventService","CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO","CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO","CONTEXT_CATALOG"],HomepageService.prototype.sendEventHideReplaceParentHomePageInfo=function(e){this.systemEventService.publish(this.CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO,e)},HomepageService.prototype.sendEventShowReplaceParentHomePageInfo=function(e){this.systemEventService.publish(this.CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO,e)},HomepageService.prototype.getHomepageDetailsForContext=function(e){var t=this;return this.catalogService.getContentCatalogVersion(e).then(function(e){return e.homepage?e.homepage.current:null}).then(function(n){return t.buildHomepageDetailsForContext(n,e)})},HomepageService.prototype.isCurrentHomepage=function(e,t){return this.isHomepageType(e,t,g.CURRENT)},HomepageService.prototype.isOldHomepage=function(e,t){return this.isHomepageType(e,t,g.OLD)},HomepageService.prototype.getHomepageType=function(e,t){var n=this;return this.catalogService.getContentCatalogVersion(t).then(function(t){return t&&t.homepage?t.homepage.current&&t.homepage.current.uid===e.uid&&t.homepage.current.catalogVersionUuid===e.catalogVersion?g.CURRENT:t.homepage.old&&t.homepage.old.uid===e.uid?n.compareCatalogVersions(t.homepage.old.catalogVersionUuid,e.catalogVersion,function(e,t){return e.catalogId===t.catalogId?g.OLD:null}):t.homepage.fallback&&t.homepage.fallback.uid===e.uid?n.compareCatalogVersions(t.homepage.fallback.catalogVersionUuid,e.catalogVersion,function(e,t){return e.uuid===t.uuid?g.FALLBACK:null}):null:null})},HomepageService.prototype.hasFallbackHomePage=function(e){return this.catalogService.getContentCatalogVersion(e).then(function(e){if(!e||!e.homepage)throw Error("HomepageService.hasFallbackHomePage - Catalog does not have homepage fallback property");return!!e.homepage.fallback})},HomepageService.prototype.canSyncHomepage=function(e,t){var n=this;return this.isOldHomepage(e,t).then(function(i){return!i||n.catalogService.getContentCatalogVersion(t).then(function(t){return n.compareCatalogVersions(t.homepage.current.catalogVersionUuid,e.catalogVersion,function(n,i){return e.uid!==t.homepage.current.uid&&n.catalogId!==i.catalogId})})})},HomepageService.prototype.compareCatalogVersions=function(e,t,n){var i=this;return this.catalogService.getCatalogVersionByUuid(e).then(function(e){return i.catalogService.getCatalogVersionByUuid(t).then(function(t){return n(e,t)})})},HomepageService.prototype.isHomepageType=function(e,t,n){return this.getHomepageType(e,t).then(function(e){return e===n})},HomepageService.prototype.buildHomepageDetailsForContext=function(e,t){var n=this;return e?this.catalogService.getCatalogVersionByUuid(e.catalogVersionUuid).then(function(i){var o=i.catalogId!==t[n.CONTEXT_CATALOG];return n.catalogService.getContentCatalogVersion(t).then(function(t){return o?{status:u.PARENT,parentCatalogName:i.catalogName,parentCatalogVersion:i.version,targetCatalogName:t.catalogName,targetCatalogVersion:t.version}:{status:u.LOCAL,currentHomepageName:e.name,currentHomepageUid:e.uid,oldHomepageUid:i.homepage&&i.homepage.old?i.homepage.old.uid:null}})}):this.$q.resolve({status:u.NO_HOMEPAGE})},HomepageService=F([Object(r.SeInjectable)()],HomepageService)}(),k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}(),j=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},G=function(e){function PageContentSlotsComponentsRestService(){return e.call(this)||this}return k(PageContentSlotsComponentsRestService,e),PageContentSlotsComponentsRestService=j([Object(r.GatewayProxied)("clearCache","getSlotsToComponentsMapForPageUid")],PageContentSlotsComponentsRestService)}(S),B=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},H=function(){function PageSynchronizationService(e){this.syncPollingService=e}return PageSynchronizationService.$inject=["syncPollingService"],PageSynchronizationService.prototype.getSyncStatus=function(e,t,n){return void 0===n&&(n=!1),this.syncPollingService.getSyncStatus(e,t,n).then(function(e){return e})},PageSynchronizationService.prototype.performSync=function(e,t){return this.syncPollingService.performSync(e,t)},PageSynchronizationService=B([Object(r.SeInjectable)()],PageSynchronizationService)}(),z=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},W=function(){function TrashedPageService(e){this.managePageService=e}return TrashedPageService.$inject=["managePageService"],TrashedPageService.prototype.getTrashedPagesCount=function(e){return this.managePageService.getSoftDeletedPagesCount(e)},TrashedPageService=z([Object(r.SeInjectable)()],TrashedPageService)}(),q=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Y=function(){function ManagePageService(e,t,n,i,o,a,r,s,c,l,d,p,u,g,m,h,f,v){this.$location=e,this.$log=t,this.$q=n,this.$translate=i,this.alertService=o,this.cmsitemsRestService=a,this.systemEventService=r,this.crossFrameEventService=s,this.pageInfoService=c,this.confirmationModalService=l,this.pagesVariationsRestService=d,this.waitDialogService=p,this.pageRestoreModalService=u,this.pageRestoredAlertService=g,this.homepageService=m,this.lodash=h,this.EVENTS=f,this.EVENT_CONTENT_CATALOG_UPDATE=v}return ManagePageService.$inject=["$location","$log","$q","$translate","alertService","cmsitemsRestService","systemEventService","crossFrameEventService","pageInfoService","confirmationModalService","pagesVariationsRestService","waitDialogService","pageRestoreModalService","pageRestoredAlertService","homepageService","lodash","EVENTS","EVENT_CONTENT_CATALOG_UPDATE"],ManagePageService.prototype.softDeletePage=function(e,t){var n=this,i=this.lodash.cloneDeep(e),o={catalogId:t.CURRENT_CONTEXT_CATALOG,catalogVersion:t.CURRENT_CONTEXT_CATALOG_VERSION,siteId:t.CURRENT_CONTEXT_SITE_ID};return this.getConfirmationModalDescription(i,t).then(function(t){return n.confirmationModalService.confirm({description:t,descriptionPlaceholders:{pageName:e.name},title:"se.cms.actionitem.page.trash.confirmation.title"}).then(function(){return i.identifier=e.uuid,i.pageStatus="DELETED",n.cmsitemsRestService.update(i).then(function(){n.crossFrameEventService.publish(n.EVENTS.PAGE_DELETED),n.alertService.showSuccess({message:"se.cms.actionitem.page.trash.alert.success.description",messagePlaceholders:{pageName:e.name}}),n.$location.path("/pages/:siteId/:catalogId/:catalogVersion".replace(":siteId",o.siteId).replace(":catalogId",o.catalogId).replace(":catalogVersion",o.catalogVersion))},function(t){return t&&t.data&&n.displayValidationErrors(t,e.name),n.$q.reject(t)})})})},ManagePageService.prototype.hardDeletePage=function(e){var t=this;return this.confirmationModalService.confirm({title:"se.cms.actionitem.page.permanently.delete.confirmation.title",description:"se.cms.actionitem.page.permanently.delete.confirmation.description",descriptionPlaceholders:{pageName:e.name}}).then(function(){return t.cmsitemsRestService.delete(e.uuid).then(function(e){t.alertService.showSuccess("se.cms.page.permanently.delete.alert.success"),t.systemEventService.publishAsync(t.EVENT_CONTENT_CATALOG_UPDATE,e),t.crossFrameEventService.publish(t.EVENTS.PAGE_DELETED)})})},ManagePageService.prototype.restorePage=function(e){var t=this,n=this.lodash.cloneDeep(e);return n.pageStatus="ACTIVE",n.identifier=e.uuid,this.waitDialogService.showWaitModal(null),this.cmsitemsRestService.update(n).then(function(e){t.waitDialogService.hideWaitModal(),t.systemEventService.publishAsync(t.EVENT_CONTENT_CATALOG_UPDATE,e),t.pageRestoredAlertService.displayPageRestoredSuccessAlert(n),t.crossFrameEventService.publish(t.EVENTS.PAGE_RESTORED)},function(e){var i=e.data.errors;t.waitDialogService.hideWaitModal(),t.pageRestoreModalService.handleRestoreValidationErrors(n,i)})},ManagePageService.prototype.isPageTrashable=function(e,t){var n=this;return this.homepageService.getHomepageType(e,t).then(function(i){return null!==i||e.homepage?n.homepageService.hasFallbackHomePage(t):n.pagesVariationsRestService.getVariationsForPrimaryPageId(e.uid).then(function(e){return 0===e.length})})},ManagePageService.prototype.getSoftDeletedPagesCount=function(e){var t={pageSize:10,currentPage:0,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted",catalogId:e.CONTEXT_CATALOG,catalogVersion:e.CONTEXT_CATALOG_VERSION};return this.cmsitemsRestService.get(t).then(function(e){return e.pagination.totalCount})},ManagePageService.prototype.getDisabledTrashTooltipMessage=function(e,t){var n=this,i="se.cms.tooltip.movetotrash";return this.homepageService.getHomepageType(e,t).then(function(e){return e===g.CURRENT?i="se.cms.tooltip.current.homepage.movetotrash":e===g.OLD&&(i="se.cms.tooltip.old.homepage.movetotrash"),n.$q.when(i)})},ManagePageService.prototype.getConfirmationModalDescription=function(e,t){var n=this,i=this.$q.defer();return this.pageInfoService.getPageUUID().then(function(o){o?n.homepageService.getHomepageType(e,t).then(function(t){null!==t||e.homepage?i.resolve("se.cms.actionitem.page.trash.confirmation.description.storefront.homepage"):i.resolve("se.cms.actionitem.page.trash.confirmation.description.storefront")}):(n.$log.error("deletePageService::deletePage - pageUUID is undefined"),i.reject())},function(){i.resolve("se.cms.actionitem.page.trash.confirmation.description.pagelist")}),i.promise},ManagePageService.prototype.displayValidationErrors=function(e,t){var n=this;e&&e.data&&e.data.errors.filter(function(e){return"ValidationError"===e.type}).forEach(function(e){var i=n.$translate.instant("se.cms.actionitem.page.trash.alert.failure.prefix",{pageName:t})+e.subject+" - "+e.message;n.alertService.showDanger({message:i,timeout:5e3})})},q([Object(r.Cached)({actions:[r.rarelyChangingContent],tags:[r.pageDeletionEvictionTag,r.pageRestoredEvictionTag]})],ManagePageService.prototype,"getSoftDeletedPagesCount",null),ManagePageService=q([Object(r.SeInjectable)()],ManagePageService)}(),K=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},X=function(){function DeletePageService(e,t,n){this.managePageService=e,this.pageService=t,this.pageFacade=n}return DeletePageService.$inject=["managePageService","pageService","pageFacade"],DeletePageService.prototype.deletePage=function(e,t){return this.managePageService.softDeletePage(e,t)},DeletePageService.prototype.isDeletePageEnabled=function(e){var t=this;return this.pageFacade.retrievePageUriContext().then(function(n){return t.pageService.getPageById(e).then(function(e){return t.managePageService.isPageTrashable(e,n)})})},DeletePageService=K([Object(r.SeInjectable)()],DeletePageService)}(),Z=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},J=function(){function PageRestoreModalService(e,t,n,i,o,a,r,s,c,l,d){this.lodash=e,this.alertService=t,this.confirmationModalService=n,this.genericEditorModalService=i,this.crossFrameEventService=o,this.pageRestoredAlertService=a,this.$translate=r,this.$timeout=s,this.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT=c,this.EVENTS=l,this.EVENT_CONTENT_CATALOG_UPDATE=d,this.ACTIONABLE_ERRORS=[{subject:"name",errorCode:"field.already.exist",structure:{cmsStructureType:"ShortString",collection:!1,editable:!0,i18nKey:"type.cmsitem.name.name",localized:!1,paged:!1,qualifier:"name",required:!0}},{subject:"label",errorCode:"default.page.label.already.exist",structure:{cmsStructureType:"DuplicatePrimaryContentPage",collection:!1,editable:!0,i18nKey:"se.cms.page.restore.content.duplicate.primaryforvariation.label",localized:!1,paged:!1,qualifier:"label",required:!0}},{subject:"label",errorCode:"default.page.does.not.exist",structure:{cmsStructureType:"MissingPrimaryContentPage",collection:!1,editable:!0,i18nKey:"se.cms.page.restore.content.noprimaryforvariation.label",localized:!1,paged:!1,qualifier:"label",required:!0}},{subject:"typeCode",errorCode:"default.page.already.exist",structure:{cmsStructureType:"DuplicatePrimaryNonContentPageMessage",collection:!1,editable:!0,i18nKey:"type.cmsitem.label.name",localized:!1,paged:!1,qualifier:"replace",required:!0}}],this.NON_ACTIONABLE_ERRORS=[{subject:"typeCode",errorCode:"default.page.does.not.exist",messageKey:"se.cms.page.restore.noprimaryforvariation.error"}]}return PageRestoreModalService.$inject=["lodash","alertService","confirmationModalService","genericEditorModalService","crossFrameEventService","pageRestoredAlertService","$translate","$timeout","GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT","EVENTS","EVENT_CONTENT_CATALOG_UPDATE"],PageRestoreModalService.prototype.handleRestoreValidationErrors=function(e,t){var n=this,i=this.getActionableErrors(t),o=this.getNonActionableError(t),a=this.lodash.difference(t,i,o);a.length>0?this.showErrorAlert(a):o.length>0?this.showConfirmationMessage(o):this.showRestoreEditor(e,i).then(function(){n.crossFrameEventService.publish(n.EVENT_CONTENT_CATALOG_UPDATE)})},PageRestoreModalService.prototype.showRestoreEditor=function(e,t){var n=this,i=this.getRestoreEditorStructureFields(t),o={content:e,title:"se.cms.page.restore.page.title",componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode,structure:this.buildStructure(i)};return this.forceErrorsDisplayInEditor(e.componentUuid,t),this.genericEditorModalService.open(o,null,function(){n.pageRestoredAlertService.displayPageRestoredSuccessAlert(e),n.crossFrameEventService.publish(n.EVENTS.PAGE_RESTORED)},function(t,o){var a=n.getActionableErrors(t),r=n.lodash.difference(t,a);r.length>0?n.showErrorAlert(r):(i=n.lodash.concat(i,n.getRestoreEditorStructureFields(t)),o.structure=n.buildStructure(i),n.forceErrorsDisplayInEditor(e.componentUuid,t))})},PageRestoreModalService.prototype.forceErrorsDisplayInEditor=function(e,t){var n=this;this.$timeout(function(){n.crossFrameEventService.publish(n.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:t,targetGenericEditorId:e})},0)},PageRestoreModalService.prototype.buildStructure=function(e){return{attributes:e,category:"PAGE"}},PageRestoreModalService.prototype.getRestoreEditorStructureFields=function(e){var t=this;return e.reduce(function(e,n){var i=t.ACTIONABLE_ERRORS.find(function(e){return t.isSupportedError(n)&&t.isEqualTo(n,e)});return e.push(i.structure),e},[])},PageRestoreModalService.prototype.showConfirmationMessage=function(e){var t=this,n=e.reduce(function(e,n){var i=t.NON_ACTIONABLE_ERRORS.find(function(e){return t.isSupportedError(n)&&t.isEqualTo(n,e)});return e+t.$translate.instant(i.messageKey)+" "},""),i={};i.description=n.trim(),i.showOkButtonOnly=!0,i.title="se.cms.page.restore.error.confirmationmodal.title",this.confirmationModalService.confirm(i)},PageRestoreModalService.prototype.showErrorAlert=function(e){var t=e.reduce(function(e,t){return e+t.message+" "},"");this.alertService.showDanger(t.trim())},PageRestoreModalService.prototype.getActionableErrors=function(e){var t=this;return e.filter(function(e){return t.ACTIONABLE_ERRORS.some(function(n){return t.isSupportedError(e)&&t.isEqualTo(e,n)})})},PageRestoreModalService.prototype.getNonActionableError=function(e){var t=this;return e.filter(function(e){return t.NON_ACTIONABLE_ERRORS.some(function(n){return t.isSupportedError(e)&&t.isEqualTo(e,n)})})},PageRestoreModalService.prototype.isSupportedError=function(e){return"ValidationError"===e.type},PageRestoreModalService.prototype.isEqualTo=function(e,t){return e.subject===t.subject&&e.errorCode===t.errorCode},PageRestoreModalService=Z([Object(r.SeInjectable)()],PageRestoreModalService)}(),Q=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ee=function(){function PageServicesModule(){}return PageServicesModule=Q([Object(r.SeModule)({imports:[],providers:[J]})],PageServicesModule)}(),te=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ne=function(){function PageRestoredAlertService(e,t,n){this.catalogService=e,this.actionableAlertService=t,this.actionableAlertConstants=n}return PageRestoredAlertService.$inject=["catalogService","actionableAlertService","actionableAlertConstants"],PageRestoredAlertService.prototype.displayPageRestoredSuccessAlert=function(e){var t=this;if(!e)throw new Error("[pageRestoredAlertService] - page info not provided.");return this.catalogService.getCatalogVersionByUuid(e.catalogVersion).then(function(n){var i={controller:["experienceService",function(t){this.description="se.cms.page.restored.alert.info.description",this.hyperlinkLabel="se.cms.page.restored.alert.info.hyperlink",this.hyperlinkDetails={pageName:e.name},this.onClick=function(){t.loadExperience({siteId:n.siteId,catalogId:n.catalogId,catalogVersion:n.version,pageId:e.uid})}}]};return t.actionableAlertService.displayActionableAlert(i,t.actionableAlertConstants.ALERT_TYPES.SUCCESS)})},PageRestoredAlertService=te([Object(r.SeInjectable)()],PageRestoredAlertService)}(),ie=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},oe=function(){function SyncPollingService(e,t,n,i,o,a,r,s,c,l,d,p,u,g,m){this.$q=e,this.$log=t,this.isBlank=n,this.pageInfoService=i,this.experienceService=o,this.catalogService=a,this.synchronizationResource=r,this.crossFrameEventService=s,this.SYNCHRONIZATION_POLLING=c,this.systemEventService=l,this.OVERLAY_RERENDERED_EVENT=d,this.lodash=p,this.EVENTS=u,this.SYNCHRONIZATION_EVENT=g,this.timerService=m,this.SYNC_POLLING_THROTTLE=500,this.syncStatus={},this.triggers=[],this.syncPollingTimer=null,this.refreshInterval=null}return SyncPollingService.$inject=["$q","$log","isBlank","pageInfoService","experienceService","catalogService","synchronizationResource","crossFrameEventService","SYNCHRONIZATION_POLLING","systemEventService","OVERLAY_RERENDERED_EVENT","lodash","EVENTS","SYNCHRONIZATION_EVENT","timerService"],SyncPollingService.prototype.getSyncStatus=function(e,t,n){var i=this;return n=!0===n&&n,this.syncStatus[e]&&e===this.syncStatus[e].itemId&&!n?this.$q.when(this.syncStatus[e]):this.getPageUUID(e).then(function(e){return i.syncPollingTimer.restart(i.refreshInterval),i._fetchSyncStatus(e,t).then(function(e){return e},function(){return i.$log.error("syncPollingService::getSyncStatus - failed call to _fetchSyncStatus"),i.$q.reject()})},function(n){return i.$log.error("syncPollingService::getSyncStatus - failed call to getPageUUID"),i.syncPollingTimer.stop(),i._fetchSyncStatus(e,t)})},SyncPollingService.prototype._fetchSyncStatus=function(e,t){var n=this;return this.getPageUUID(e).then(function(e){return e?n._isCurrentPageFromActiveCatalog().then(function(i){return i?n.$q.reject():n.catalogService.getContentCatalogActiveVersion(t).then(function(i){return n.synchronizationResource.getPageSynchronizationGetRestService(t).get({pageUid:e,target:i}).then(function(e){return JSON.stringify(e)!==JSON.stringify(n.syncStatus[e.itemId])&&n.crossFrameEventService.publish(n.SYNCHRONIZATION_POLLING.FAST_FETCH,e),n.syncStatus[e.itemId]=e,e})})}):n.$q.when({})},function(){return n.syncPollingTimer.stop(),n.$q.reject()})},SyncPollingService.prototype.changePollingSpeed=function(e,t){e===this.SYNCHRONIZATION_POLLING.SPEED_UP?(this.syncStatus={},t&&-1===this.triggers.indexOf(t)&&this.triggers.push(t),this.refreshInterval=this.SYNCHRONIZATION_POLLING.FAST_POLLING_TIME):(t&&this.triggers.splice(this.triggers.indexOf(t),1),0===this.triggers.length&&(this.refreshInterval=this.SYNCHRONIZATION_POLLING.SLOW_POLLING_TIME)),this.syncPollingTimer.restart(this.refreshInterval)},SyncPollingService.prototype.initSyncPolling=function(){var e=this;this.refreshInterval=this.SYNCHRONIZATION_POLLING.SLOW_POLLING_TIME,this.triggers=[],this.syncStatus={};var t=this.changePollingSpeed.bind(this);this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SPEED_UP,t),this.systemEventService.subscribe(this.SYNCHRONIZATION_POLLING.SLOW_DOWN,t),this.crossFrameEventService.subscribe(this.SYNCHRONIZATION_POLLING.FETCH_SYNC_STATUS_ONCE,function(t,n){e._fetchSyncStatus.bind(e)(n)}),this.crossFrameEventService.subscribe(this.OVERLAY_RERENDERED_EVENT,this.lodash.throttle(function(){e.syncPollingTimer.isActive()&&e._fetchSyncStatus.bind(e)()},this.SYNC_POLLING_THROTTLE)),this.crossFrameEventService.subscribe(this.EVENTS.PAGE_CHANGE,this.stopSync.bind(this)),this.crossFrameEventService.subscribe(this.SYNCHRONIZATION_EVENT.CATALOG_SYNCHRONIZED,function(){e.syncStatus={},e._fetchSyncStatus.bind(e)()}),this.syncPollingTimer=this.timerService.createTimer(this._fetchSyncStatus.bind(this),this.refreshInterval)},SyncPollingService.prototype.performSync=function(e,t){var n=this;return this._isCurrentPageFromActiveCatalog().then(function(i){return i?n.$q.reject():n.catalogService.getContentCatalogActiveVersion(t).then(function(i){return n.synchronizationResource.getPageSynchronizationPostRestService(t).save({target:i,items:e})})})},SyncPollingService.prototype.stopSync=function(){this.syncPollingTimer.isActive()&&this.syncPollingTimer.stop()},SyncPollingService.prototype.startSync=function(e){this.syncPollingTimer.isActive()||this.changePollingSpeed(e||this.SYNCHRONIZATION_POLLING.SLOW_POLLING_TIME)},SyncPollingService.prototype.getPageUUID=function(e){return this.isBlank(e)?this.pageInfoService.getPageUUID():this.$q.when(e)},SyncPollingService.prototype._isCurrentPageFromActiveCatalog=function(){return this.experienceService.getCurrentExperience().then(function(e){return e.pageContext?e.pageContext.active:e.catalogDescriptor.active})},SyncPollingService=ie([Object(r.GatewayProxied)("getSyncStatus","_fetchSyncStatus","changePollingSpeed","registerSyncPollingEvents","performSync"),Object(r.SeInjectable)()],SyncPollingService)}(),ae=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},re=function(){function SynchronizationPollingServiceModule(){}return SynchronizationPollingServiceModule=ae([Object(r.SeModule)({imports:["functionsModule","resourceModule",P],providers:[oe],initialize:["syncPollingService",function(e){"ngInject";e.initSyncPolling()}]})],SynchronizationPollingServiceModule)}(),se=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ce=function(){function CmsSmarteditServicesModule(){}return CmsSmarteditServicesModule=se([Object(r.SeModule)({imports:[re,"smarteditServicesModule",ee],providers:[c,d,X,x,W,m,Y,U,G,H,ne,r.diNameUtils.makeValueProvider({DEFAULT_CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO:"CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO"}),r.diNameUtils.makeValueProvider({DEFAULT_CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO:"CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO"})]})],CmsSmarteditServicesModule)}(),le=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},de=function(){function HomepageIconComponent(e,t){this.homepageService=e,this.catalogService=t,this.type=null}return HomepageIconComponent.$inject=["homepageService","catalogService"],HomepageIconComponent.prototype.$onChanges=function(e){var t=this;e.cmsPage.previousValue===e.cmsPage.currentValue&&e.uriContext.previousValue===e.uriContext.currentValue||this.cmsPage&&this.homepageService.getHomepageType(this.cmsPage,this.uriContext).then(function(e){t.type=e})},HomepageIconComponent.prototype.isVisible=function(){return null!==this.type},HomepageIconComponent.prototype.getHomepageIcon=function(){return{"hyicon hyicon-home hyicon-home--current":g.CURRENT===this.type,"hyicon hyicon-home hyicon-home--old":g.OLD===this.type}},HomepageIconComponent=le([Object(r.SeComponent)({templateUrl:"HomepageIconTemplate.html",inputs:["cmsPage","uriContext"]})],HomepageIconComponent)}(),pe=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ue=function(){function ClonePageItemComponent(e){this.clonePageWizardService=e}return ClonePageItemComponent.$inject=["clonePageWizardService"],ClonePageItemComponent.prototype.$onInit=function(){this.clonePagePermission=[{names:["se.clone.page.type"],context:{typeCode:this.pageInfo.typeCode}}]},ClonePageItemComponent.prototype.onClickOnClone=function(){this.clonePageWizardService.openClonePageWizard(this.pageInfo)},ClonePageItemComponent=pe([Object(r.SeComponent)({templateUrl:"clonePageItemTemplate.html",inputs:["pageInfo"]})],ClonePageItemComponent)}(),ge=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},me=function(){function DeletePageItemComponent(e,t,n,i){this.managePageService=e,this.systemEventService=t,this.catalogService=n,this.EVENT_CONTENT_CATALOG_UPDATE=i,this.isDeletePageEnabled=!1,this.tooltipMessage="se.cms.tooltip.movetotrash"}return DeletePageItemComponent.$inject=["managePageService","systemEventService","catalogService","EVENT_CONTENT_CATALOG_UPDATE"],DeletePageItemComponent.prototype.$onInit=function(){var e=this;this.catalogService.retrieveUriContext().then(function(t){e.managePageService.isPageTrashable(e.pageInfo,t).then(function(n){e.isDeletePageEnabled=n,e.isDeletePageEnabled?e.tooltipMessage=null:e.managePageService.getDisabledTrashTooltipMessage(e.pageInfo,t).then(function(t){e.tooltipMessage=t})})}),this.deletePagePermission=[{names:["se.delete.page.type"],context:{typeCode:this.pageInfo.typeCode}}]},DeletePageItemComponent.prototype.onClickOnDeletePage=function(){var e=this;this.catalogService.retrieveUriContext().then(function(t){return e.managePageService.softDeletePage(e.pageInfo,t).then(function(t){e.systemEventService.publishAsync(e.EVENT_CONTENT_CATALOG_UPDATE,t)})})},DeletePageItemComponent.prototype.getTooltipTemplate=function(){return'<div class="popover-tooltip"><span data-translate="'+this.tooltipMessage+'" /></div>'},DeletePageItemComponent=ge([Object(r.SeComponent)({templateUrl:"deletePageItemTemplate.html",inputs:["pageInfo"]})],DeletePageItemComponent)}(),he=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},fe=function(){function EditPageItemComponent(e){this.pageInfoMenuService=e}return EditPageItemComponent.$inject=["pageInfoMenuService"],EditPageItemComponent.prototype.$onInit=function(){this.editPagePermission=[{names:["se.edit.page.type"],context:{typeCode:this.pageInfo.typeCode}}]},EditPageItemComponent.prototype.onClickOnEdit=function(){return this.pageInfoMenuService.openPageEditor(this.pageInfo)},EditPageItemComponent=he([Object(r.SeComponent)({templateUrl:"editPageItemTemplate.html",inputs:["pageInfo"]})],EditPageItemComponent)}(),ve=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ye=function(){function SyncPageItemComponent(e,t,n,i){this.syncPageModalService=e,this.catalogService=t,this.EVENT_CONTENT_CATALOG_UPDATE=n,this.systemEventService=i}return SyncPageItemComponent.$inject=["syncPageModalService","catalogService","EVENT_CONTENT_CATALOG_UPDATE","systemEventService"],SyncPageItemComponent.prototype.onClickOnSync=function(){var e=this;this.catalogService.retrieveUriContext().then(function(t){e.syncPageModalService.open(e.pageInfo,t).then(function(t){e.systemEventService.publishAsync(e.EVENT_CONTENT_CATALOG_UPDATE,t)})})},SyncPageItemComponent=ve([Object(r.SeComponent)({templateUrl:"syncPageItemTemplate.html",inputs:["pageInfo"]})],SyncPageItemComponent)}(),Se=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ce=function(){function PageEditorModalService(e,t,n,i,o,a,r,s,c){this.$q=e,this.genericEditorModalService=t,this.crossFrameEventService=n,this.contextAwarePageStructureService=i,this.cmsitemsRestService=o,this.pageService=a,this.SYNCHRONIZATION_POLLING=r,this.systemEventService=s,this.EVENT_CONTENT_CATALOG_UPDATE=c}return PageEditorModalService.$inject=["$q","genericEditorModalService","crossFrameEventService","contextAwarePageStructureService","cmsitemsRestService","pageService","SYNCHRONIZATION_POLLING","systemEventService","EVENT_CONTENT_CATALOG_UPDATE"],PageEditorModalService.prototype.open=function(e){var t,n=this,i={title:"se.cms.pageeditormodal.editpagetab.title",componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode};return this.$q.all([this.cmsitemsRestService.getById(e.uuid),this.pageService.isPagePrimary(e.uid)]).then(function(e){var o=e[0],a=e[1];return i.content=o,t=a,n.cmsitemsRestService.getById(o.masterTemplate)}).then(function(e){return i.content.template=e.uid,n.contextAwarePageStructureService.getPageStructureForPageEditing(i.content.typeCode,i.content.uid)}).then(function(o){return i.structure=o,t&&(i.structure.attributes=i.structure.attributes.filter(function(e){return"restrictions"!==e.qualifier&&"onlyOneRestrictionMustApply"!==e.qualifier})),n.genericEditorModalService.open(i,null,function(){n.crossFrameEventService.publish(n.SYNCHRONIZATION_POLLING.FETCH_SYNC_STATUS_ONCE,e.uuid)})}).then(function(e){return n.systemEventService.publishAsync(n.EVENT_CONTENT_CATALOG_UPDATE,e),e})},PageEditorModalService=Se([Object(r.SeInjectable)()],PageEditorModalService)}(),be=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Te=function(){function RestrictionsPageListIconComponent(e,t){this.assetsService=e,this.$translate=t}return RestrictionsPageListIconComponent.$inject=["assetsService","$translate"],Object.defineProperty(RestrictionsPageListIconComponent.prototype,"imageSrc",{get:function(){return this.assetsService.getAssetsRoot()+(this.numberOfRestrictions>0?"/images/icon_restriction_small_blue.png":"/images/icon_restriction_small_grey.png")},enumerable:!0,configurable:!0}),Object.defineProperty(RestrictionsPageListIconComponent.prototype,"title",{get:function(){return this.$translate.instant("se.icon.tooltip.visibility",{numberOfRestrictions:this.numberOfRestrictions})},enumerable:!0,configurable:!0}),RestrictionsPageListIconComponent=be([Object(r.SeComponent)({inputs:["numberOfRestrictions"],templateUrl:"restrictionsPageListIconTemplate.html"})],RestrictionsPageListIconComponent)}(),Ee=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Pe=function(){function PageComponentsModule(){}return PageComponentsModule=Ee([Object(r.SeModule)({imports:["typeStructureRestServiceModule","pageServiceModule","seConstantsModule","cmsSmarteditServicesModule","smarteditServicesModule","clonePageWizardServiceModule","syncPageModalServiceModule","genericEditorModalServiceModule","contextAwarePageStructureServiceModule","cmsitemsRestServiceModule","cmssmarteditContainerTemplates","translationServiceModule"],declarations:[w,N,O,de,ue,me,fe,ye,Te],providers:[L,Ce]})],PageComponentsModule)}(),Ie=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},_e=function(){function RestrictionsListComponent(){}return RestrictionsListComponent=Ie([Object(r.SeComponent)({templateUrl:"restrictionsListTemplate.html",inputs:["model"]})],RestrictionsListComponent)}(),Re=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Me=function(){function DuplicatePrimaryNonContentPageComponent(){this.PRODUCT_PAGE="ProductPage"}return DuplicatePrimaryNonContentPageComponent.prototype.$onInit=function(){this.model.replace=!0,this.label="PRODUCT_PAGE"===this.model.typeCode?"se.cms.page.restore.category.duplicate.primaryforvariation.error":"se.cms.page.restore.product.duplicate.primaryforvariation.error"},DuplicatePrimaryNonContentPageComponent=Re([Object(r.SeComponent)({templateUrl:"duplicatePrimaryNonContentPageTemplate.html",inputs:["model"]})],DuplicatePrimaryNonContentPageComponent)}(),Oe=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ae=function(){function DuplicatePrimaryContentPageLabelComponent(){this.ResolutionOptions={OVERWRITE_PAGE:1,RENAME_PAGE_LABEL:2},this.conflictResolution=null}return DuplicatePrimaryContentPageLabelComponent.prototype.$onInit=function(){this.conflictResolution=this.ResolutionOptions.OVERWRITE_PAGE,this.model.replace=!0},DuplicatePrimaryContentPageLabelComponent.prototype.selectResolution=function(e){this.model.replace=e===this.ResolutionOptions.OVERWRITE_PAGE},DuplicatePrimaryContentPageLabelComponent=Oe([Object(r.SeComponent)({templateUrl:"duplicatePrimaryContentPageLabelTemplate.html",inputs:["model"]})],DuplicatePrimaryContentPageLabelComponent)}(),Ne=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},De=function(){function MissingPrimaryContentPageComponent(e,t){this.pageService=e,this.$log=t,this.fetchStrategy={fetchAll:this.fetchAll.bind(this)},this.CONTENT_PAGE_TYPE_CODE="ContentPage"}return MissingPrimaryContentPageComponent.$inject=["pageService","$log"],MissingPrimaryContentPageComponent.prototype.fetchAll=function(){var e=this;return this.pageService.getPrimaryPagesForPageType(this.CONTENT_PAGE_TYPE_CODE).then(function(e){return e.map(function(e){return{id:e.label,label:e.name}})},function(t){e.$log.warn("[MissingPrimaryContentPageComponent] - Cannot retrieve list of alternative content primary pages. ",t)})},MissingPrimaryContentPageComponent=Ne([Object(r.SeComponent)({templateUrl:"missingPrimaryContentPageTemplate.html",inputs:["model"]})],MissingPrimaryContentPageComponent)}(),we=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ve=function(){function GenericEditorWidgetsModule(){}return GenericEditorWidgetsModule=we([Object(r.SeModule)({imports:[],declarations:[_e,Me,Ae,De]})],GenericEditorWidgetsModule)}(),Le=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},$e=function(){function VersionsSearchComponent(e){this.perspectiveService=e,this.VERSIONING_MODE_KEY=d.VERSIONING_PERSPECTIVE_KEY}return VersionsSearchComponent.$inject=["perspectiveService"],VersionsSearchComponent.prototype.$onInit=function(){this.previousSearchTerm="",this.showResetButton=!1,this.resetSearchBox()},VersionsSearchComponent.prototype.$doCheck=function(){this.searchTerm!==this.previousSearchTerm&&(this.previousSearchTerm=this.searchTerm,this.showResetButton=""!==this.searchTerm,this.onSearchTermChanged({newSearchTerm:this.searchTerm}))},VersionsSearchComponent.prototype.resetSearchBox=function(){this.searchTerm=""},VersionsSearchComponent.prototype.getVersionsFoundTranslationData=function(){return{versionsFound:this.versionsFound}},VersionsSearchComponent.prototype.showManageVersionsButton=function(){var e=this.perspectiveService.getActivePerspective();return e&&e.key!==this.VERSIONING_MODE_KEY},VersionsSearchComponent.prototype.switchToVersioningMode=function(){this.perspectiveService.switchTo(this.VERSIONING_MODE_KEY)},VersionsSearchComponent=Le([Object(r.SeComponent)({templateUrl:"versionsSearchTemplate.html",inputs:["onSearchTermChanged: &","versionsFound","showSearchControls"]})],VersionsSearchComponent)}(),Ue=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Fe=function(){function VersionsPanelComponent(e,t){var n=this;this.pageVersioningService=e,this.$log=t,this.loadVersions=function(e,t,i){var o={pageUuid:n.pageUuid,currentPage:i,mask:e,pageSize:t};return n.pageVersioningService.findPageVersions(o).then(function(e){return n.isLoading&&(n.totalPageVersions=e.pagination.totalCount,n.isLoading=!1),n.versionsFound=e.pagination.totalCount,e},function(e){return n.$log.error("Cannot find page versions for page "+n.pageUuid+"."),null})}}return VersionsPanelComponent.$inject=["pageVersioningService","$log"],VersionsPanelComponent.prototype.$onInit=function(){this.pageSize=10,this.totalPageVersions=0,this.isLoading=!0,this.searchTerm=""},VersionsPanelComponent.prototype.onSearchTermChanged=function(e){this.searchTerm=e},VersionsPanelComponent.prototype.pageHasVersions=function(){return this.totalPageVersions>0},VersionsPanelComponent.prototype.pageHasVersionsOrIsLoading=function(){return this.pageUuid&&(this.pageHasVersions()||this.isLoading)},VersionsPanelComponent=Ue([Object(r.SeComponent)({entryComponents:[$e],templateUrl:"versionsPanelTemplate.html",inputs:["pageUuid"]})],VersionsPanelComponent)}(),xe=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ke=function(){function PageVersionsMenuComponent(e,t){this.pageInfoService=e,this.pageVersionSelectionService=t}return PageVersionsMenuComponent.$inject=["pageInfoService","pageVersionSelectionService"],PageVersionsMenuComponent.prototype.$onInit=function(){var e=this;this.pageVersionSelectionService.showToolbarContextIfNeeded(),this.pageInfoService.getPageUUID().then(function(t){e.pageUuid=t})},PageVersionsMenuComponent=xe([Object(r.SeComponent)({entryComponents:[Fe],templateUrl:"pageVersionsMenuTemplate.html",inputs:["actionItem"]})],PageVersionsMenuComponent)}(),je=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ge=function(){function VersionItemComponent(e,t,n){this.pageVersionSelectionService=e,this.perspectiveService=t,this.cMSModesService=n,this.VERSIONING_MODE_KEY=d.VERSIONING_PERSPECTIVE_KEY}return VersionItemComponent.$inject=["pageVersionSelectionService","perspectiveService","cMSModesService"],VersionItemComponent.prototype.$onInit=function(){this.textLimit=40},VersionItemComponent.prototype.selectVersion=function(){var e=this;this.cMSModesService.isVersioningPerspectiveActive().then(function(t){t||e.perspectiveService.switchTo(e.VERSIONING_MODE_KEY),e.pageVersionSelectionService.selectPageVersion(e.pageVersion)})},VersionItemComponent.prototype.isSelectedVersion=function(){var e=this.pageVersionSelectionService.getSelectedPageVersion();return e&&e.uid===this.pageVersion.uid},VersionItemComponent.prototype.isVersionMenuEnabled=function(){var e=this.perspectiveService.getActivePerspective();return e&&e.key===this.VERSIONING_MODE_KEY},VersionItemComponent=je([Object(r.SeComponent)({templateUrl:"versionItemTemplate.html",inputs:["pageVersion"]})],VersionItemComponent)}(),Be=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},He=function(){function VersionItemMenuComponent(e,t,n,i,o,a){var r=this;this.managePageVersionService=e,this.pageVersionSelectionService=t,this.rollbackPageVersionService=n,this.permissionService=i,this.$q=o,this.systemEventService=a,this.isMenuOpen=!1,this.popupConfig={templateUrl:"versionItemMenuItemsTemplate.html",halign:"left",valign:"bottom"},this.getButtonsAfterApplyingPermissions(this.getButtonsConfiguration()).then(function(e){return r.menuItems=e}),this.systemEventService.subscribe("VERSION_ITEM_MENU_OPENED_EVENT",this.onOtherMenuOpening.bind(this))}return VersionItemMenuComponent.$inject=["managePageVersionService","pageVersionSelectionService","rollbackPageVersionService","permissionService","$q","systemEventService"],VersionItemMenuComponent.prototype.getButtonsConfiguration=function(){return[{i18nKey:"se.cms.version.item.menu.view.label",callback:this.viewItemCallback.bind(this),permissions:["se.version.page"]},{i18nKey:"se.cms.version.item.menu.edit.label",callback:this.editItemCallback.bind(this),permissions:["se.edit.version.page"]},{i18nKey:"se.cms.version.item.menu.rollback.label",callback:this.rollbackItemCallback.bind(this),permissions:["se.rollback.version.page.versions.menu"]},{i18nKey:"se.cms.version.item.menu.delete.label",callback:this.deleteItemCallback.bind(this),permissions:["se.delete.version.page"]}]},VersionItemMenuComponent.prototype.getButtonsAfterApplyingPermissions=function(e){var t=this,n=e.map(function(e){return t.permissionService.isPermitted([{names:e.permissions}])});return this.$q.all(n).then(function(t){return e.filter(function(e,n){return t[n]})})},VersionItemMenuComponent.prototype.onButtonClick=function(e){e.stopPropagation(),this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.systemEventService.publishAsync("VERSION_ITEM_MENU_OPENED_EVENT",{uid:this.item.uid})},VersionItemMenuComponent.prototype.onMenuHide=function(){this.isMenuOpen=!1},VersionItemMenuComponent.prototype.onOtherMenuOpening=function(e,t){this.item.uid!==t.uid&&(this.isMenuOpen=!1)},VersionItemMenuComponent.prototype.executeItemCallback=function(e,t){e.callback&&(e.callback(this.item),this.isMenuOpen=!1)},VersionItemMenuComponent.prototype.deleteItemCallback=function(e){this.managePageVersionService.deletePageVersion(e.uid)},VersionItemMenuComponent.prototype.editItemCallback=function(e){this.managePageVersionService.editPageVersion(e)},VersionItemMenuComponent.prototype.viewItemCallback=function(e){this.pageVersionSelectionService.selectPageVersion(e)},VersionItemMenuComponent.prototype.rollbackItemCallback=function(e){this.rollbackPageVersionService.rollbackPageVersion(e)},VersionItemMenuComponent=Be([Object(r.SeComponent)({templateUrl:"versionItemMenuTemplate.html",inputs:["item"]})],VersionItemMenuComponent)}(),ze=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},We=function(){function VersionItemContextComponent(e,t){this.pageVersionSelectionService=e,this.$translate=t,this.EMPTY_DESCRIPTION_MSG_KEY="se.cms.versions.no.description"}return VersionItemContextComponent.$inject=["pageVersionSelectionService","$translate"],VersionItemContextComponent.prototype.$onInit=function(){this.pageVersionSelectionService.hideToolbarContextIfNotNeeded()},VersionItemContextComponent.prototype.deselectPageVersion=function(){this.pageVersionSelectionService.deselectPageVersion()},VersionItemContextComponent.prototype.getPageVersion=function(){return this.pageVersionSelectionService.getSelectedPageVersion()},VersionItemContextComponent.prototype.getPopoverTemplate=function(){var e=this.getPageVersion();return'<div class="se-version-item-context--description__wrapper">\n\t\t\t<span class="se-version-item-context--description">'+(e&&e.description?e.description:this.$translate.instant(this.EMPTY_DESCRIPTION_MSG_KEY))+"</span>\n\t\t</div>"},VersionItemContextComponent=ze([Object(r.SeComponent)({templateUrl:"versionItemContextTemplate.html"})],VersionItemContextComponent)}(),qe=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ye=function(){function ManagePageVersionService(e,t,n,i,o,a,r){this.alertService=e,this.experienceService=t,this.confirmationModalService=n,this.genericEditorModalService=i,this.pageInfoService=o,this.pageVersioningService=a,this.pageVersionSelectionService=r}return ManagePageVersionService.$inject=["alertService","experienceService","confirmationModalService","genericEditorModalService","pageInfoService","pageVersioningService","pageVersionSelectionService"],ManagePageVersionService.prototype.createPageVersion=function(){var e=this;this.pageInfoService.getPageUUID().then(function(t){var n=e.getComponentDataForEditor(t,null);return e.genericEditorModalService.open(n,null,function(t){var n={versionId:t.uid};e.experienceService.updateExperience(n).then(function(){e.alertService.showSuccess("se.cms.versions.create.alert.success"),e.pageVersionSelectionService.selectPageVersion(t)})})})},ManagePageVersionService.prototype.editPageVersion=function(e){var t=this;this.pageInfoService.getPageUUID().then(function(n){var i=t.getComponentDataForEditor(n,e);return t.genericEditorModalService.open(i,null,function(e){t.pageVersionSelectionService.updatePageVersionDetails(e)})})},ManagePageVersionService.prototype.deletePageVersion=function(e){var t=this;this.pageInfoService.getPageUUID().then(function(n){t.confirmationModalService.confirm({title:"se.cms.actionitem.page.version.delete.confirmation.title",description:"se.cms.actionitem.page.version.delete.confirmation.description"}).then(function(){t.pageVersioningService.deletePageVersion(n,e).then(function(){t.alertService.showSuccess("se.cms.versions.delete.alert.success");var n=t.pageVersionSelectionService.getSelectedPageVersion();n&&n.uid===e&&t.experienceService.updateExperience().then(function(){t.pageVersionSelectionService.deselectPageVersion()})})})})},ManagePageVersionService.prototype.getComponentDataForEditor=function(e,t){var n={title:t?"se.cms.versions.edit":"se.cms.versions.create",cssClasses:"yFrontModal",structure:{attributes:[{cmsStructureType:"ShortString",qualifier:"label",i18nKey:"se.cms.versions.editor.label.name",required:!0},{cmsStructureType:"ShortString",qualifier:"description",i18nKey:"se.cms.versions.editor.description.name"}]},contentApi:this.pageVersioningService.getResourceURI().replace(":pageUuid",e)};return t&&(n.content=t,n.componentUuid=t.uid,n.componentType="versioning"),n},ManagePageVersionService=qe([Object(r.SeInjectable)()],ManagePageVersionService)}(),Ke=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Xe=function(){function PageVersionSelectionService(e,t,n,i,o,a,r,s,c,l,d,p){var u=this;this.crossFrameEventService=e,this.alertService=t,this.experienceService=n,this.cMSModesService=i,this.pageInfoService=o,this.pageVersioningService=a,this.$translate=r,this.SHOW_TOOLBAR_ITEM_CONTEXT=s,this.HIDE_TOOLBAR_ITEM_CONTEXT=c,this.EVENTS=p,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY="se.cms.pageVersionsMenu",this.PAGE_VERSION_UNSELECTED_MSG_KEY="se.cms.versions.unselect.version",this.selectedPageVersion=null,this.crossFrameEventService.subscribe(l,this.removePageVersionOnPerspectiveChange.bind(this)),this.crossFrameEventService.subscribe(d,this.resetPageVersionContext.bind(this)),this.crossFrameEventService.subscribe(this.EVENTS.PAGE_CHANGE,function(e,t){t.versionId&&!u.selectedPageVersion&&u.pageInfoService.getPageUUID().then(function(e){u.pageVersioningService.getPageVersionForId(e,String(t.versionId)).then(function(e){u.selectedPageVersion=e,u.showToolbarContextIfNeeded(),u.crossFrameEventService.publish(u.EVENTS.PAGE_SELECTED)})})})}return PageVersionSelectionService.$inject=["crossFrameEventService","alertService","experienceService","cMSModesService","pageInfoService","pageVersioningService","$translate","SHOW_TOOLBAR_ITEM_CONTEXT","HIDE_TOOLBAR_ITEM_CONTEXT","EVENT_PERSPECTIVE_CHANGED","EVENT_PERSPECTIVE_REFRESHED","EVENTS"],PageVersionSelectionService.prototype.hideToolbarContextIfNotNeeded=function(){this.selectedPageVersion||this.crossFrameEventService.publish(this.HIDE_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)},PageVersionSelectionService.prototype.showToolbarContextIfNeeded=function(){this.selectedPageVersion&&this.crossFrameEventService.publish(this.SHOW_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)},PageVersionSelectionService.prototype.selectPageVersion=function(e){this.isSameVersion(this.selectedPageVersion,e)||(this.selectedPageVersion=e,this.experienceService.updateExperience({versionId:e.uid}),this.showToolbarContextIfNeeded(),this.crossFrameEventService.publish(this.EVENTS.PAGE_SELECTED))},PageVersionSelectionService.prototype.updatePageVersionDetails=function(e){this.selectedPageVersion=e},PageVersionSelectionService.prototype.deselectPageVersion=function(e){var t=this;void 0===e&&(e=!0),this.selectedPageVersion&&e&&this.$translate(this.PAGE_VERSION_UNSELECTED_MSG_KEY).then(function(e){t.alertService.showInfo(e)}),this.selectedPageVersion=null,this.experienceService.updateExperience({versionId:null}),this.crossFrameEventService.publish(this.HIDE_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)},PageVersionSelectionService.prototype.getSelectedPageVersion=function(){return this.selectedPageVersion},PageVersionSelectionService.prototype.isSameVersion=function(e,t){return null!==e&&null!==t&&this.selectedPageVersion.uid===t.uid},PageVersionSelectionService.prototype.removePageVersionOnPerspectiveChange=function(){var e=this;this.cMSModesService.isVersioningPerspectiveActive().then(function(t){e.selectedPageVersion&&e.pageInfoService.getPageUUID().then(function(n){t&&e.selectedPageVersion.itemUUID===n||e.deselectPageVersion()})})},PageVersionSelectionService.prototype.resetPageVersionContext=function(){var e=this;this.experienceService.getCurrentExperience().then(function(t){!t.versionId&&e.selectedPageVersion?(e.selectedPageVersion=null,e.hideToolbarContextIfNotNeeded()):e.showToolbarContextIfNeeded()})},PageVersionSelectionService=Ke([Object(r.SeInjectable)()],PageVersionSelectionService)}(),Ze=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Je=function(){function RollbackPageVersionService(e,t,n,i,o,a,r,s,c){this.$log=e,this.alertService=t,this.confirmationModalService=n,this.experienceService=i,this.pageInfoService=o,this.pageVersioningService=a,this.pageVersionSelectionService=r,this.systemEventService=s,this.EVENT_CONTENT_CATALOG_UPDATE=c}return RollbackPageVersionService.$inject=["$log","alertService","confirmationModalService","experienceService","pageInfoService","pageVersioningService","pageVersionSelectionService","systemEventService","EVENT_CONTENT_CATALOG_UPDATE"],RollbackPageVersionService.prototype.rollbackPageVersion=function(e){var t=this,n=e||this.pageVersionSelectionService.getSelectedPageVersion();if(n){this.pageInfoService.getPageUUID().then(function(e){t.showConfirmationModal(n.label,"se.cms.actionitem.page.version.rollback.confirmation").then(t.performRollback.bind(t,e,n))})}},RollbackPageVersionService.prototype.showConfirmationModal=function(e,t){return this.confirmationModalService.confirm({title:t+".title",description:t+".description",descriptionPlaceholders:{versionLabel:e}})},RollbackPageVersionService.prototype.performRollback=function(e,t){var n=this;this.pageVersioningService.rollbackPageVersion(e,t.uid).then(function(){n.systemEventService.publishAsync(n.EVENT_CONTENT_CATALOG_UPDATE),n.alertService.showSuccess("se.cms.versions.rollback.alert.success"),n.experienceService.updateExperience({}).then(function(){n.pageVersionSelectionService.deselectPageVersion(!1)})},function(){n.$log.error("RollbackPageVersionService::performRollback - unable to perform page rollback")})},RollbackPageVersionService=Ze([Object(r.SeInjectable)()],RollbackPageVersionService)}(),Qe=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},et=function(){function PageVersionsModule(){}return PageVersionsModule=Qe([Object(r.SeModule)({imports:[ce,"seConstantsModule","smarteditServicesModule","perspectiveServiceModule","alertServiceModule"],declarations:[ke,Ge,We,He],providers:[Ye,Xe,Je]})],PageVersionsModule)}(),tt=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},nt=function(){function SelectComponentTypeModalService(e){this.modalService=e}return SelectComponentTypeModalService.$inject=["modalService"],SelectComponentTypeModalService.prototype.open=function(e){return this.modalService.open({title:"se.cms.nestedcomponenteditor.select.type",templateInline:'<sub-type-selector class="sub-type-selector" data-sub-types="modalController.subTypes"\n                data-on-sub-type-selected="modalController.onSubTypeSelected"></sub-type-selector>',controller:["modalManager",function ctrl(t){"ngInject";this.subTypes=Object.keys(e).map(function(t){return{id:t,label:e[t]}}),this.onSubTypeSelected=function(e){t.close(e.id)}}]})},SelectComponentTypeModalService=tt([Object(r.SeInjectable)()],SelectComponentTypeModalService)}(),it=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ot=function(){function SubTypeSelectorComponent(){}return SubTypeSelectorComponent.prototype.onChange=function(e){this.onSubTypeSelected(e)},SubTypeSelectorComponent=it([Object(r.SeComponent)({templateUrl:"subTypeSelectorTemplate.html",inputs:["subTypes","onSubTypeSelected"]})],SubTypeSelectorComponent)}(),at=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},rt=function(){function CmsComponentsModule(){}return CmsComponentsModule=at([Object(r.SeModule)({providers:[nt],declarations:[ot]})],CmsComponentsModule)}(),st=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ct=function(){function NavigationNodeEditorModalService(e,t,n,i){this.$q=e,this.genericEditorModalService=t,this.catalogService=n,this.NAVIGATION_NODE_TYPECODE=i}return NavigationNodeEditorModalService.$inject=["$q","genericEditorModalService","catalogService","NAVIGATION_NODE_TYPECODE"],NavigationNodeEditorModalService.prototype.open=function(e,t,n){var i=this;if(!e)throw new Error("NavigationNodeEditorModalService.open : missing [uriContext : IUriContext] parameter.");if(!t)throw new Error("NavigationNodeEditorModalService.open : missing [parent: NavigationalNode] parameter.");var o=this.$q.resolve(null);return n||(o=this.catalogService.getCatalogVersionUUid(e).then(function(e){return{catalogVersion:e,parent:t.uuid,itemtype:i.NAVIGATION_NODE_TYPECODE,visible:!0}})),o.then(function(e){return i.genericEditorModalService.open({componentUuid:n?n.uuid:null,componentType:i.NAVIGATION_NODE_TYPECODE,content:e,title:"se.cms.navigationmanagement.node.edit.title"},null,function(e){return e})})},NavigationNodeEditorModalService=st([Object(r.SeInjectable)()],NavigationNodeEditorModalService)}(),lt=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},dt=function(){function NavigationEditorTreeComponent(e,t,n,i,o,a,r,s,c,l,d,p){this.NAVIGATION_NODE_ROOT_NODE_UID=e,this.$q=t,this.$log=n,this.lodash=i,this.URIBuilder=o,this.restServiceFactory=a,this.NAVIGATION_MANAGEMENT_RESOURCE_URI=r,this.navigationEditorNodeService=s,this.navigationNodeEditorModalService=c,this.confirmationModalService=l,this.cmsitemsRestService=d,this.NAVIGATION_NODE_TYPECODE=p,this.nodeTemplateUrl="navigationNodeRenderTemplate.html"}var e;return NavigationEditorTreeComponent.$inject=["NAVIGATION_NODE_ROOT_NODE_UID","$q","$log","lodash","URIBuilder","restServiceFactory","NAVIGATION_MANAGEMENT_RESOURCE_URI","navigationEditorNodeService","navigationNodeEditorModalService","confirmationModalService","cmsitemsRestService","NAVIGATION_NODE_TYPECODE"],e=NavigationEditorTreeComponent,NavigationEditorTreeComponent.prototype.$onInit=function(){this.readOnly||(this.dragOptions=this.buildDragOptions()),this.nodeURI=new this.URIBuilder(this.NAVIGATION_MANAGEMENT_RESOURCE_URI).replaceParams(this.uriContext).build(),this.rootNodeUid=this.rootNodeUid||this.NAVIGATION_NODE_ROOT_NODE_UID,this.removeDefaultTemplate=!0,this.navigationsRestEndpoint=this.restServiceFactory.get(this.nodeURI),this.actions=this.buildActions()},NavigationEditorTreeComponent.prototype.buildDragOptions=function(){var e=this;return{onDropCallback:function(t){e.actions.dragAndDrop(t)},allowDropCallback:function(e){return e.sourceNode.parent.uid===e.destinationNodes[0].parent.uid},beforeDropCallback:function(e){return e.sourceNode.parent.uid===e.destinationNodes[0].parent.uid||{confirmDropI18nKey:"se.cms.navigationmanagement.navnode.confirmation"}}}},NavigationEditorTreeComponent.prototype.buildActions=function(){var t=this,n=[{key:"se.cms.navigationmanagement.navnode.edit",callback:function(e){t.actions.editNavigationNode(e)}},{key:"se.cms.navigationmanagement.navnode.removenode",callback:function(e){t.actions.removeItem(e)}},{key:"se.cms.navigationmanagement.navnode.move.up",condition:function(e){return t.actions.isMoveUpAllowed(e)},callback:function(e){t.actions.moveUp(e)}},{key:"se.cms.navigationmanagement.navnode.move.down",condition:function(e){return t.actions.isMoveDownAllowed(e)},callback:function(e){t.actions.moveDown(e)}},{key:"se.cms.navigationmanagement.navnode.addchild",callback:function(e){t.actions.addNewChild(e)}},{key:"se.cms.navigationmanagement.navnode.addsibling",callback:function(e){t.actions.addNewSibling(e)}}];return{isReadOnly:function(){return t.readOnly},hasChildren:function(e,t){return t.$modelValue.hasChildren},fetchData:function(e,n){if(n.uid===t.NAVIGATION_NODE_ROOT_NODE_UID&&(n.initiated=!1),n.initiated)return t.$q.resolve(n.nodes);var i=t.$q.resolve(null);return n.uid===t.NAVIGATION_NODE_ROOT_NODE_UID&&(i=t.getNavigationNodeCMSItemByUid(this.rootNodeUid).then(function(e){t.lodash.assign(n,e)})),i.then(function(){return n.nodes=[],e.fetchChildren(n)})},removeItem:function(n,i){if(t.readOnly)throw e.READY_ONLY_ERROR_I18N;t.confirmationModalService.confirm({description:"se.cms.navigationmanagement.navnode.removenode.confirmation.message",title:"se.cms.navigationmanagement.navnode.removenode.confirmation.title"}).then(function(){t.cmsitemsRestService.delete(i.$modelValue.uuid).then(function(){t.actions.refreshParentNode(i)})})},performMove:function(n,i,o,a){var r=this;if(t.readOnly)throw e.READY_ONLY_ERROR_I18N;return t.navigationEditorNodeService.updateNavigationNodePosition(i,t.uriContext).then(function(){o?a?t.actions.refreshNode(o):t.actions.refreshParentNode(o):t.actions.fetchData(r.root)},function(e){t.$log.error("Error updating node position:\n"+e)})},dragAndDrop:function(e,n){var i=n.sourceNode,o=n.destinationNodes,a=t.lodash.find(o,function(e){return e.uid!==i.uid});if(a){var r=a.parent;t.hasNotMoved(i,n.position,r)||(i.position=n.position,i.parentUid=r.uid,i.parent=r,t.actions.performMove(i,n.targetParentHandle,!0).then(function(){n.sourceParentHandle!==n.targetParentHandle&&t.actions.refreshNode(n.sourceParentHandle)}))}},moveUp:function(n,i){if(t.readOnly)throw e.READY_ONLY_ERROR_I18N;var o=i.$modelValue;o.position=parseInt(o.position,10)-1,t.actions.performMove(o,i)},moveDown:function(n,i){if(t.readOnly)throw e.READY_ONLY_ERROR_I18N;var o=i.$modelValue;o.position=parseInt(o.position,10)+1,t.actions.performMove(o,i)},isMoveUpAllowed:function(e,t){var n=t.$modelValue;return 0!==parseInt(n.position,10)},isMoveDownAllowed:function(e,t){var n=t.$modelValue;return n.parent.nodes=n.parent.nodes||[],parseInt(n.position+"",10)!==n.parent.nodes.length-1},refreshNode:function(e,t){return this.refresh(t)},refreshParentNode:function(e,t){return this.refreshParent(t)},editNavigationNode:function(e,n){var i=n.$modelValue,o={};return o.nodeUid=i.uid,o.entryIndex=void 0,t.navigationNodeEditorModalService.open(t.uriContext,i.parent,i).then(function(){var e;return e=i.parent.uid===t.NAVIGATION_NODE_ROOT_NODE_UID?i:i.parent,t.navigationEditorNodeService.getNavigationNode(e.uid,t.uriContext).then(function(o){return t.lodash.assign(e,o),i.parent.uid===t.NAVIGATION_NODE_ROOT_NODE_UID?t.actions.refreshNode(n):t.actions.refreshParentNode(n)})})},addTopLevelNode:function(){var e=this;return t.actions.addNewChild().then(function(){return t.getNavigationNodeCMSItemByUid(e.rootNodeUid).then(function(e){t.actions.fetchData(e)})})},getEntryString:function(e,n){return t.getEntriesCommaSeparated(n.entries||[])},getEntryTooltipString:function(e,t){return["<div>"].concat((t.entries||[]).map(function(e){return"<div>"+e.name+" ("+e.itemType+")</div>"}),["</div>"]).join("")},addNewChild:function(e,n){var i=n?n.$modelValue:t.actions._findNodeById(t.rootNodeUid);return t.actions._expandIfNeeded(n).then(function(){return t.navigationNodeEditorModalService.open(t.uriContext,i)}).then(function(e){e.parentUid=i.uid,i.hasChildren=!0,t.handleNodeCreation(e)})},addNewSibling:function(e,n){var i=n.$modelValue.parent;return t.navigationNodeEditorModalService.open(t.uriContext,i).then(function(e){e.parentUid=i.uid,t.handleNodeCreation(e)})},getDropdownItems:function(){return n},_findNodeById:function(e,t){return this.getNodeById(t)},_expandIfNeeded:function(e,n){return n&&n.collapsed?this.toggleAndfetch(n):t.$q.when()}}},NavigationEditorTreeComponent.prototype.hasNotMoved=function(e,t,n){return e.position===t&&e.parentUid===n.uid},NavigationEditorTreeComponent.prototype.handleNodeCreation=function(e){var t=this.actions._findNodeById(e.parentUid);t.nodes=t.nodes||[];var n=t.nodes.find(function(t){return t.uid===e.uid});return t&&!n?this.navigationsRestEndpoint.get({parentUid:t.uid}).then(function(e){(e.navigationNodes||[]).forEach(function(e){e.parent=t,e.nodes=e.nodes||[]}),t.nodes=e.navigationNodes||[],t.hasChildren=t.nodes.length>0}):this.$q.when()},NavigationEditorTreeComponent.prototype.getNavigationNodeCMSItemByUid=function(e){return this.cmsitemsRestService.get({typeCode:this.NAVIGATION_NODE_TYPECODE,pageSize:1,currentPage:0,itemSearchParams:"uid:"+e}).then(function(e){return e.response[0]})},NavigationEditorTreeComponent.prototype.getEntriesCommaSeparated=function(e){return e.map(function(e){return e.name+" ("+e.itemType+")"}).join(", ")},NavigationEditorTreeComponent.READY_ONLY_ERROR_I18N="navigation.in.readonly.mode",NavigationEditorTreeComponent=e=lt([Object(r.SeComponent)({templateUrl:"navigationEditorTreeComponentTemplate.html",inputs:["uriContext","readOnly","rootNodeUid"]})],NavigationEditorTreeComponent)}(),pt=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ut={provide:"NAVIGATION_NODE_ROOT_NODE_UID",useValue:"root"},gt={provide:"NAVIGATION_NODE_TYPECODE",useValue:"CMSNavigationNode"},mt=function(){function NavigationModule(){}return NavigationModule=pt([Object(r.SeModule)({imports:["smarteditServicesModule","editorModalServiceModule","genericEditorModalServiceModule","functionsModule","navigationModule","navigationEditorNodeServiceModule","resourceLocationsModule","confirmationModalServiceModule","resourceModule","yLoDashModule"],declarations:[dt],providers:[gt,ut,ct]})],NavigationModule)}(),ht=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ft=function(){function CmsSmarteditComponentsModule(){}return CmsSmarteditComponentsModule=ht([Object(r.SeModule)({imports:[et,Pe,Ve,rt,mt]})],CmsSmarteditComponentsModule)}(),vt=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},yt=function(){function NavigationManagementPageController(e,t,n,i){this.$routeParams=e,this.urlService=t,this.permissionService=n,this.catalogService=i,this.init()}return NavigationManagementPageController.$inject=["$routeParams","urlService","permissionService","catalogService"],NavigationManagementPageController.prototype.init=function(){var e=this;this.uriContext=this.urlService.buildUriContext(this.$routeParams.siteId,this.$routeParams.catalogId,this.$routeParams.catalogVersion),this.catalogVersion=this.$routeParams.catalogVersion,this.catalogService.getContentCatalogsForSite(this.$routeParams.siteId).then(function(t){e.catalogName=t.filter(function(t){return t.catalogId===e.$routeParams.catalogId})[0].name}),this.permissionService.isPermitted([{names:["se.edit.navigation"]}]).then(function(t){e.readOnly=!t},function(e){throw new Error(e)})},NavigationManagementPageController=vt([Object(r.SeInjectable)()],NavigationManagementPageController)}();n.d(t,"CmssmarteditContainer",function(){return Ct});var St=function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};!function doImport(){importAll(n(2)),importAll(n(124)),importAll(n(134))}(),a.module("AssetsServiceModule",["cmsSmarteditServicesModule"]),a.module("trashedPageModule",["cmsSmarteditServicesModule"]);var Ct=function(){function CmssmarteditContainer(){}return CmssmarteditContainer=St([Object(r.SeModule)({imports:[ce,ft,y,"cmsResourceLocationsModule","experienceInterceptorModule","resourceLocationsModule","cmssmarteditContainerTemplates","componentMenuModule","cmscommonsTemplates","editorModalServiceModule","genericEditorModule","catalogDetailsModule","synchronizeCatalogModule","pageListLinkModule","pageListControllerModule","slotRestrictionsServiceModule","cmsDragAndDropServiceModule","seMediaFieldModule","seMediaContainerFieldModule","pageRestrictionsModule","restrictionsEditorModule","yActionableSearchItemModule","seNavigationNodeSelector","pageSyncMenuToolbarItemModule","productSelectorModule","categorySelectorModule","clonePageWizardServiceModule","cmsLinkToSelectModule","rulesAndPermissionsRegistrationModule","smarteditServicesModule","singleActiveCatalogAwareItemSelectorModule","productCatalogDropdownPopulatorModule","productDropdownPopulatorModule","categoryDropdownPopulatorModule","cmsItemDropdownModule","catalogAwareRouteResolverModule","catalogVersionPermissionModule","componentRestrictionsEditorModule","pageRestrictionsEditorModule","pageVersionsModule","displayConditionsEditorModule","linkToggleModule","functionsModule","componentVisibilityAlertServiceModule","cmsGenericEditorConfigurationServiceModule","deletePageToolbarItemModule",R.name],config:["PAGE_LIST_PATH","TRASHED_PAGE_LIST_PATH","NAVIGATION_MANAGEMENT_PAGE_PATH","$routeProvider","catalogAwareRouteResolverFunctions",function(e,t,n,i,o){"ngInject";i.when(e,{templateUrl:"pageListTemplate.html",controller:"pageListController",controllerAs:"pageListCtl",resolve:{experienceFromPathResolve:o.experienceFromPathResolve}}),i.when(t,{templateUrl:"trashedpageListTemplate.html",controller:_,controllerAs:"trashedPageListCtl",resolve:{experienceFromPathResolve:o.experienceFromPathResolve}}),i.when(n,{templateUrl:"navigationManagementPageTemplate.html",controller:yt,controllerAs:"nav",resolve:{experienceFromPathResolve:o.experienceFromPathResolve}})}],initialize:["$log","$rootScope","$routeParams","NAVIGATION_MANAGEMENT_PAGE_PATH","ComponentService","systemEventService","catalogDetailsService","featureService","perspectiveService","assetsService","editorFieldMappingService","genericEditorTabService","cmsDragAndDropService","editorModalService","clonePageWizardService","CATALOG_DETAILS_COLUMNS","componentVisibilityAlertService","cmsGenericEditorConfigurationService","managePageVersionService","rollbackPageVersionService",function(e,t,n,i,o,a,r,s,c,l,p,u,g,m,h,f,v,y,S,C){"ngInject";y.setDefaultEditorFieldMappings(),y.setDefaultTabFieldMappings(),y.setDefaultTabsConfiguration(),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.componentMenuTemplate",type:"HYBRID_ACTION",nameI18nKey:"se.cms.componentmenu.btn.label.addcomponent",descriptionI18nKey:"cms.toolbaritem.componentmenutemplate.description",priority:100,section:"left",iconClassName:"hyicon hyicon-addlg se-toolbar-menu-ddlb--button__icon",callback:function(){a.publish("ySEComponentMenuOpen",{})},include:"componentMenuWrapperTemplate.html",permissions:["se.add.component"],keepAliveOnClose:!0}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageInfoMenu",type:"TEMPLATE",nameI18nKey:"se.cms.pageinfo.menu.btn.label",priority:120,section:"left",include:"pageInfoMenuWrapperTemplate.html",permissions:["se.read.page"]}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.clonePageMenu",type:"ACTION",nameI18nKey:"se.cms.clonepage.menu.btn.label",iconClassName:"hyicon hyicon-clone se-toolbar-menu-ddlb--button__icon",callback:function(){h.openClonePageWizard()},priority:130,section:"left",permissions:["se.clone.page"]}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageSyncMenu",nameI18nKey:"se.cms.toolbaritem.pagesyncmenu.name",type:"TEMPLATE",include:"pageSyncMenuToolbarItemWrapperTemplate.html",priority:140,section:"left",permissions:["se.sync.page"]}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"deletePageMenu",nameI18nKey:"se.cms.actionitem.page.trash",type:"TEMPLATE",include:"deletePageToolbarItemWrapperTemplate.html",priority:150,section:"left",permissions:["se.delete.page.menu"]}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageVersionsMenu",type:"HYBRID_ACTION",nameI18nKey:"se.cms.actionitem.page.versions",priority:102,section:"left",iconClassName:"hyicon hyicon-versions se-toolbar-menu-ddlb--button__icon",include:"pageVersionsMenuWrapperTemplate.html",contextTemplateUrl:"versionItemContextWrapperTemplate.html",permissions:["se.version.page"],keepAliveOnClose:!0}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.createVersionMenu",type:"ACTION",nameI18nKey:"se.cms.actionitem.page.versions.create",iconClassName:"hyicon hyicon-addlg se-toolbar-menu-ddlb--button__icon",callback:function(){S.createPageVersion()},priority:104,section:"left",permissions:["se.version.page","se.create.version.page"]}),s.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.rollbackVersionMenu",type:"ACTION",nameI18nKey:"se.cms.actionitem.page.versions.rollback",iconClassName:"hyicon hyicon-rollback se-toolbar-menu-ddlb--button__icon",callback:function(){C.rollbackPageVersion()},priority:106,section:"left",permissions:["se.version.page","se.rollback.version.page"]}),r.addItems([{include:"pageListLinkTemplate.html"},{include:"navigationEditorLinkTemplate.html"}]),r.addItems([{include:"catalogDetailsSyncTemplate.html"}],f.RIGHT),s.register({key:"se.cms.html5DragAndDrop.outer",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){g.register(),g.apply()},disablingCallback:function(){g.unregister()}}),c.register({key:"se.cms.perspective.basic",nameI18nKey:"se.cms.perspective.basic.name",descriptionI18nKey:"se.hotkey.tooltip",features:["se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.restrictionsMenu","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.emptySlotFix","se.cms.html5DragAndDrop","disableSharedSlotEditing","sharedSlotDisabledDecorator","se.cms.html5DragAndDrop.outer","externalComponentDecorator","externalcomponentbutton","externalSlotDisabledDecorator","clonecomponentbutton","deletePageMenu"],perspectives:[]}),c.register({key:"se.cms.perspective.advanced",nameI18nKey:"se.cms.perspective.advanced.name",descriptionI18nKey:"se.hotkey.tooltip",features:["se.slotContextualMenu","se.slotSyncButton","se.slotSharedButton","se.slotContextualMenuVisibility","se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.restrictionsMenu","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.cms.pageSyncMenu","se.emptySlotFix","se.cms.html5DragAndDrop","se.cms.html5DragAndDrop.outer","syncIndicator","externalSlotDisabledDecorator","externalComponentDecorator","externalcomponentbutton","clonecomponentbutton","slotUnsharedButton","deletePageMenu","se.cms.pageVersionsMenu"],perspectives:[]}),c.register({key:d.VERSIONING_PERSPECTIVE_KEY,nameI18nKey:"se.cms.perspective.versioning.name",descriptionI18nKey:"se.cms.perspective.versioning.description",features:["se.cms.pageVersionsMenu","se.cms.createVersionMenu","se.cms.rollbackVersionMenu","se.cms.restrictionsMenu","se.cms.pageInfoMenu","disableSharedSlotEditing","sharedSlotDisabledDecorator","externalSlotDisabledDecorator","externalComponentDecorator"],perspectives:[],permissions:["se.version.page"],isHotkeyDisabled:!0})}]})],CmssmarteditContainer)}()}]);