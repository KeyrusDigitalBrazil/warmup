<div *ngIf="user">
    <div *ngIf="titles">
        <global-alerts [confMsgs]="successMsgs" [errorMsgs]="errorMsgs"
                       (onCleared)="clearMessage($event)"></global-alerts>

        <div class="account-section">
            <div class="yCmsContentSlot account-section-content">
                <div class="account-section-header">
                    <div class="row">
                        <div class="container-lg col-md-6">
                            <ng-container i18n="@@text.account.profile.updatePersonalDetails">Personal details
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="container-lg col-md-6">
                        <div class="account-section-content">
                            <div class="account-section-form">
                                <form id="updateProfileForm" (ngSubmit)="onSubmit()" #userForm="ngForm">
                                    <div class="form-group">
                                        <label class="control-label " for="profile.title">
                                            <ng-container i18n="@@profile.title">Title</ng-container>
                                            <span class="mandatory"></span>
                                            <span class="skip"></span>
                                        </label>

                                        <div class="control">
                                            <select id="profile.title" name="titleCode" class="form-control"
                                                    [(ngModel)]="user.titleCode" required>
                                                <option value="" disabled="disabled" selected="selected">
                                                    <ng-container i18n="@@form.select.empty">Please select
                                                    </ng-container>
                                                </option>
                                                <option *ngFor="let title of titles.titles" [value]="title.code">
                                                    {{title.name}}
                                                </option>
                                                <div *ngIf="getValidationError('titleCode') as validationError"
                                                     class="help-block">
                                                    <span id="titleCode.errors">{{validationError.message}}</span>
                                                </div>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group" [ngClass]="{'has-error': getValidationError('firstName') }">
                                        <label class="control-label" for="profile.firstName">
                                            <ng-container i18n="@@profile.firstName">First Name</ng-container>
                                        </label>
                                        <input id="profile.firstName" name="firstName" class="text form-control"
                                               type="text" [(ngModel)]="user.firstName" required/>

                                        <div *ngIf="getValidationError('firstName') as validationError"
                                             class="help-block">
                                            <span id="firstName.errors">{{validationError.message}}</span>
                                        </div>
                                    </div>

                                    <div class="form-group" [ngClass]="{'has-error': getValidationError('lastName') }">
                                        <label class="control-label " for="profile.lastName">
                                            <ng-container i18n="@@profile.lastName">Last Name</ng-container>
                                        </label>
                                        <input id="profile.lastName" name="lastName" class="text form-control"
                                               type="text" [(ngModel)]="user.lastName" required/>

                                        <div *ngIf="getValidationError('lastName') as validationError"
                                             class="help-block">
                                            <span id="lastName.errors">{{validationError.message}}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-6 col-sm-push-6">
                                            <div class="accountActions">
                                                <button type="submit" class="btn btn-primary btn-block">
                                                    <ng-container i18n="@@text.account.profile.saveUpdates">Update
                                                    </ng-container>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-sm-pull-6">
                                            <div class="accountActions">
                                                <button type="button" class="btn btn-default btn-block backToHome">
                                                    <ng-container i18n="@@text.account.profile.cancel">Cancel
                                                    </ng-container>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>